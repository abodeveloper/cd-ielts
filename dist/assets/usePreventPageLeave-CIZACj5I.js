import{r as c,g as Ao,j as s,h as we,i as jt,k as zo,p as To,m as Lo,a as Jt,u as kr,R as ct,b as Mo}from"./index-CGz7kFpt.js";import{c as Po,a as Oo,b as $o}from"./tabs-CS0R4mVA.js";import{c as V,t as _r}from"./utils-CPYLdFy8.js";import{E as sr}from"./ErrorMessage-DbJcIzK3.js";import{c as Fo}from"./createLucideIcon-DMPZRlKd.js";import{p as qo,l as At,I as Ho,H as Mn}from"./useTestLogic-ChUu-jA7.js";import{B as Le,b as Ir}from"./button-BXvCQrzc.js";import{P as Ar,M as Go,i as Bo,j as Vo,m as or,G as Wo,o as Uo,q as Xo,s as Ko,t as Yo,Q as Jo,u as Qo,r as Zo}from"./index-MqYuSQRa.js";import{u as et,c as ea}from"./index-bldY7p9i.js";import{c as Qt}from"./index-qsNlV1cv.js";import{u as zr,c as bt}from"./index-C4TqYzej.js";import{u as Tr}from"./index-DnvDS510.js";import{u as Lr}from"./index-Bm-j2z8v.js";import{P as Mr}from"./index-BM-DUn4Q.js";import{P as tt}from"./index-BGwJmOWB.js";import{C as ta}from"./index-BvbFlekG.js";import{F as Ne,a as ye,b as Ee,c as Me,d as dt,e as We,L as Pr}from"./form-BKLfGanV.js";import{b as na,c as Or}from"./index.esm-B5zEG0hg.js";import{C as Zt,c as Pn}from"./card-D3gurF0g.js";import{c as $r,R as ra,I as sa}from"./index-0Hzafpii.js";import{u as oa}from"./index-R5DZRu04.js";import{C as aa,D as ia,a as la,b as ca,d as ua,e as da,g as ar,h as ir,i as lr,j as cr,k as it}from"./dropdown-menu-B0EhQtxc.js";import{T as ft,a as ht,b as xe,c as Ae,d as pt,e as ve}from"./table-Dl38T-DX.js";import{I as fa}from"./input-BcQLt0bQ.js";import{S as Cn,a as Nn,b as En,c as Sn,d as Je}from"./select-CA_Y5LNP.js";import{l as ze}from"./lodash-DX7nIOvF.js";import{S as ha}from"./slider-CnN8HRB_.js";import{c as Fr,R as pa,b as ga,P as ma,W as xa,C as va,T as ba,D as wa,a as qr,O as ya}from"./index-C3eEHiF2.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Na=Fo("grip-vertical",Ca);var ne=(e=>(e.READING="READING",e.LISTENING="LISTENING",e.WRITING="WRITING",e.SPEAKING="SPEAKING",e))(ne||{});const en=c.createContext(null);en.displayName="PanelGroupContext";const te={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},On=10,Qe=c.useLayoutEffect,ur=Ao.useId,Ea=typeof ur=="function"?ur:()=>null;let Sa=0;function $n(e=null){const t=Ea(),n=c.useRef(e||t||null);return n.current===null&&(n.current=""+Sa++),e??n.current}function Hr({children:e,className:t="",collapsedSize:n,collapsible:r,defaultSize:a,forwardedRef:o,id:i,maxSize:l,minSize:u,onCollapse:d,onExpand:h,onResize:f,order:p,style:g,tagName:x="div",...v}){const N=c.useContext(en);if(N===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:w,expandPanel:m,getPanelSize:S,getPanelStyle:j,groupId:M,isPanelCollapsed:R,reevaluatePanelConstraints:E,registerPanel:T,resizePanel:B,unregisterPanel:U}=N,H=$n(i),$=c.useRef({callbacks:{onCollapse:d,onExpand:h,onResize:f},constraints:{collapsedSize:n,collapsible:r,defaultSize:a,maxSize:l,minSize:u},id:H,idIsFromProps:i!==void 0,order:p});c.useRef({didLogMissingDefaultSizeWarning:!1}),Qe(()=>{const{callbacks:X,constraints:Z}=$.current,C={...Z};$.current.id=H,$.current.idIsFromProps=i!==void 0,$.current.order=p,X.onCollapse=d,X.onExpand=h,X.onResize=f,Z.collapsedSize=n,Z.collapsible=r,Z.defaultSize=a,Z.maxSize=l,Z.minSize=u,(C.collapsedSize!==Z.collapsedSize||C.collapsible!==Z.collapsible||C.maxSize!==Z.maxSize||C.minSize!==Z.minSize)&&E($.current,C)}),Qe(()=>{const X=$.current;return T(X),()=>{U(X)}},[p,H,T,U]),c.useImperativeHandle(o,()=>({collapse:()=>{w($.current)},expand:X=>{m($.current,X)},getId(){return H},getSize(){return S($.current)},isCollapsed(){return R($.current)},isExpanded(){return!R($.current)},resize:X=>{B($.current,X)}}),[w,m,S,R,H,B]);const K=j($.current,a);return c.createElement(x,{...v,children:e,className:t,id:H,style:{...K,...g},[te.groupId]:M,[te.panel]:"",[te.panelCollapsible]:r||void 0,[te.panelId]:H,[te.panelSize]:parseFloat(""+K.flexGrow).toFixed(1)})}const Gr=c.forwardRef((e,t)=>c.createElement(Hr,{...e,forwardedRef:t}));Hr.displayName="Panel";Gr.displayName="forwardRef(Panel)";let jn=null,Ht=-1,Ge=null;function ja(e,t){if(t){const n=(t&Xr)!==0,r=(t&Kr)!==0,a=(t&Yr)!==0,o=(t&Jr)!==0;if(n)return a?"se-resize":o?"ne-resize":"e-resize";if(r)return a?"sw-resize":o?"nw-resize":"w-resize";if(a)return"s-resize";if(o)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function Ra(){Ge!==null&&(document.head.removeChild(Ge),jn=null,Ge=null,Ht=-1)}function hn(e,t){var n,r;const a=ja(e,t);if(jn!==a){if(jn=a,Ge===null&&(Ge=document.createElement("style"),document.head.appendChild(Ge)),Ht>=0){var o;(o=Ge.sheet)===null||o===void 0||o.removeRule(Ht)}Ht=(n=(r=Ge.sheet)===null||r===void 0?void 0:r.insertRule(`*{cursor: ${a} !important;}`))!==null&&n!==void 0?n:-1}}function Br(e){return e.type==="keydown"}function Vr(e){return e.type.startsWith("pointer")}function Wr(e){return e.type.startsWith("mouse")}function tn(e){if(Vr(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(Wr(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function Da(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function ka(e,t,n){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function _a(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:hr(e),b:hr(t)};let r;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),r=e;q(r,"Stacking order can only be calculated for elements with a common ancestor");const a={a:fr(dr(n.a)),b:fr(dr(n.b))};if(a.a===a.b){const o=r.childNodes,i={a:n.a.at(-1),b:n.b.at(-1)};let l=o.length;for(;l--;){const u=o[l];if(u===i.a)return 1;if(u===i.b)return-1}}return Math.sign(a.a-a.b)}const Ia=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Aa(e){var t;const n=getComputedStyle((t=Ur(e))!==null&&t!==void 0?t:e).display;return n==="flex"||n==="inline-flex"}function za(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||Aa(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||Ia.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function dr(e){let t=e.length;for(;t--;){const n=e[t];if(q(n,"Missing node"),za(n))return n}return null}function fr(e){return e&&Number(getComputedStyle(e).zIndex)||0}function hr(e){const t=[];for(;e;)t.push(e),e=Ur(e);return t}function Ur(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const Xr=1,Kr=2,Yr=4,Jr=8,Ta=Da()==="coarse";let Se=[],mt=!1,Be=new Map,nn=new Map;const zt=new Set;function La(e,t,n,r,a){var o;const{ownerDocument:i}=t,l={direction:n,element:t,hitAreaMargins:r,setResizeHandlerState:a},u=(o=Be.get(i))!==null&&o!==void 0?o:0;return Be.set(i,u+1),zt.add(l),Vt(),function(){var h;nn.delete(e),zt.delete(l);const f=(h=Be.get(i))!==null&&h!==void 0?h:1;if(Be.set(i,f-1),Vt(),f===1&&Be.delete(i),Se.includes(l)){const p=Se.indexOf(l);p>=0&&Se.splice(p,1),qn(),a("up",!0,null)}}}function Ma(e){const{target:t}=e,{x:n,y:r}=tn(e);mt=!0,Fn({target:t,x:n,y:r}),Vt(),Se.length>0&&(Wt("down",e),e.preventDefault(),Qr(t)||e.stopImmediatePropagation())}function pn(e){const{x:t,y:n}=tn(e);if(mt&&e.buttons===0&&(mt=!1,Wt("up",e)),!mt){const{target:r}=e;Fn({target:r,x:t,y:n})}Wt("move",e),qn(),Se.length>0&&e.preventDefault()}function gn(e){const{target:t}=e,{x:n,y:r}=tn(e);nn.clear(),mt=!1,Se.length>0&&(e.preventDefault(),Qr(t)||e.stopImmediatePropagation()),Wt("up",e),Fn({target:t,x:n,y:r}),qn(),Vt()}function Qr(e){let t=e;for(;t;){if(t.hasAttribute(te.resizeHandle))return!0;t=t.parentElement}return!1}function Fn({target:e,x:t,y:n}){Se.splice(0);let r=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(r=e),zt.forEach(a=>{const{element:o,hitAreaMargins:i}=a,l=o.getBoundingClientRect(),{bottom:u,left:d,right:h,top:f}=l,p=Ta?i.coarse:i.fine;if(t>=d-p&&t<=h+p&&n>=f-p&&n<=u+p){if(r!==null&&document.contains(r)&&o!==r&&!o.contains(r)&&!r.contains(o)&&_a(r,o)>0){let x=r,v=!1;for(;x&&!x.contains(o);){if(ka(x.getBoundingClientRect(),l)){v=!0;break}x=x.parentElement}if(v)return}Se.push(a)}})}function mn(e,t){nn.set(e,t)}function qn(){let e=!1,t=!1;Se.forEach(r=>{const{direction:a}=r;a==="horizontal"?e=!0:t=!0});let n=0;nn.forEach(r=>{n|=r}),e&&t?hn("intersection",n):e?hn("horizontal",n):t?hn("vertical",n):Ra()}let xn;function Vt(){var e;(e=xn)===null||e===void 0||e.abort(),xn=new AbortController;const t={capture:!0,signal:xn.signal};zt.size&&(mt?(Se.length>0&&Be.forEach((n,r)=>{const{body:a}=r;n>0&&(a.addEventListener("contextmenu",gn,t),a.addEventListener("pointerleave",pn,t),a.addEventListener("pointermove",pn,t))}),Be.forEach((n,r)=>{const{body:a}=r;a.addEventListener("pointerup",gn,t),a.addEventListener("pointercancel",gn,t)})):Be.forEach((n,r)=>{const{body:a}=r;n>0&&(a.addEventListener("pointerdown",Ma,t),a.addEventListener("pointermove",pn,t))}))}function Wt(e,t){zt.forEach(n=>{const{setResizeHandlerState:r}=n,a=Se.includes(n);r(e,a,t)})}function Pa(){const[e,t]=c.useState(0);return c.useCallback(()=>t(n=>n+1),[])}function q(e,t){if(!e)throw console.error(t),Error(t)}function Ze(e,t,n=On){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function Te(e,t,n=On){return Ze(e,t,n)===0}function ge(e,t,n){return Ze(e,t,n)===0}function Oa(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){const a=e[r],o=t[r];if(!ge(a,o,n))return!1}return!0}function gt({panelConstraints:e,panelIndex:t,size:n}){const r=e[t];q(r!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:a=0,collapsible:o,maxSize:i=100,minSize:l=0}=r;if(Ze(n,l)<0)if(o){const u=(a+l)/2;Ze(n,u)<0?n=a:n=l}else n=l;return n=Math.min(i,n),n=parseFloat(n.toFixed(On)),n}function Rt({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:r,prevLayout:a,trigger:o}){if(ge(e,0))return t;const i=[...t],[l,u]=r;q(l!=null,"Invalid first pivot index"),q(u!=null,"Invalid second pivot index");let d=0;if(o==="keyboard"){{const f=e<0?u:l,p=n[f];q(p,`Panel constraints not found for index ${f}`);const{collapsedSize:g=0,collapsible:x,minSize:v=0}=p;if(x){const N=t[f];if(q(N!=null,`Previous layout not found for panel index ${f}`),ge(N,g)){const w=v-N;Ze(w,Math.abs(e))>0&&(e=e<0?0-w:w)}}}{const f=e<0?l:u,p=n[f];q(p,`No panel constraints found for index ${f}`);const{collapsedSize:g=0,collapsible:x,minSize:v=0}=p;if(x){const N=t[f];if(q(N!=null,`Previous layout not found for panel index ${f}`),ge(N,v)){const w=N-g;Ze(w,Math.abs(e))>0&&(e=e<0?0-w:w)}}}}{const f=e<0?1:-1;let p=e<0?u:l,g=0;for(;;){const v=t[p];q(v!=null,`Previous layout not found for panel index ${p}`);const w=gt({panelConstraints:n,panelIndex:p,size:100})-v;if(g+=w,p+=f,p<0||p>=n.length)break}const x=Math.min(Math.abs(e),Math.abs(g));e=e<0?0-x:x}{let p=e<0?l:u;for(;p>=0&&p<n.length;){const g=Math.abs(e)-Math.abs(d),x=t[p];q(x!=null,`Previous layout not found for panel index ${p}`);const v=x-g,N=gt({panelConstraints:n,panelIndex:p,size:v});if(!ge(x,N)&&(d+=x-N,i[p]=N,d.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?p--:p++}}if(Oa(a,i))return a;{const f=e<0?u:l,p=t[f];q(p!=null,`Previous layout not found for panel index ${f}`);const g=p+d,x=gt({panelConstraints:n,panelIndex:f,size:g});if(i[f]=x,!ge(x,g)){let v=g-x,w=e<0?u:l;for(;w>=0&&w<n.length;){const m=i[w];q(m!=null,`Previous layout not found for panel index ${w}`);const S=m+v,j=gt({panelConstraints:n,panelIndex:w,size:S});if(ge(m,j)||(v-=j-m,i[w]=j),ge(v,0))break;e>0?w--:w++}}}const h=i.reduce((f,p)=>p+f,0);return ge(h,100)?i:a}function $a({layout:e,panelsArray:t,pivotIndices:n}){let r=0,a=100,o=0,i=0;const l=n[0];q(l!=null,"No pivot index found"),t.forEach((f,p)=>{const{constraints:g}=f,{maxSize:x=100,minSize:v=0}=g;p===l?(r=v,a=x):(o+=v,i+=x)});const u=Math.min(a,100-o),d=Math.max(r,100-i),h=e[l];return{valueMax:u,valueMin:d,valueNow:h}}function Tt(e,t=document){return Array.from(t.querySelectorAll(`[${te.resizeHandleId}][data-panel-group-id="${e}"]`))}function Zr(e,t,n=document){const a=Tt(e,n).findIndex(o=>o.getAttribute(te.resizeHandleId)===t);return a??null}function es(e,t,n){const r=Zr(e,t,n);return r!=null?[r,r+1]:[-1,-1]}function Fa(e){return e instanceof HTMLElement?!0:typeof e=="object"&&e!==null&&"tagName"in e&&"getAttribute"in e}function ts(e,t=document){if(Fa(t)&&t.dataset.panelGroupId==e)return t;const n=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return n||null}function rn(e,t=document){const n=t.querySelector(`[${te.resizeHandleId}="${e}"]`);return n||null}function qa(e,t,n,r=document){var a,o,i,l;const u=rn(t,r),d=Tt(e,r),h=u?d.indexOf(u):-1,f=(a=(o=n[h])===null||o===void 0?void 0:o.id)!==null&&a!==void 0?a:null,p=(i=(l=n[h+1])===null||l===void 0?void 0:l.id)!==null&&i!==void 0?i:null;return[f,p]}function Ha({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:r,panelDataArray:a,panelGroupElement:o,setLayout:i}){c.useRef({didWarnAboutMissingResizeHandle:!1}),Qe(()=>{if(!o)return;const l=Tt(n,o);for(let u=0;u<a.length-1;u++){const{valueMax:d,valueMin:h,valueNow:f}=$a({layout:r,panelsArray:a,pivotIndices:[u,u+1]}),p=l[u];if(p!=null){const g=a[u];q(g,`No panel data found for index "${u}"`),p.setAttribute("aria-controls",g.id),p.setAttribute("aria-valuemax",""+Math.round(d)),p.setAttribute("aria-valuemin",""+Math.round(h)),p.setAttribute("aria-valuenow",f!=null?""+Math.round(f):"")}}return()=>{l.forEach((u,d)=>{u.removeAttribute("aria-controls"),u.removeAttribute("aria-valuemax"),u.removeAttribute("aria-valuemin"),u.removeAttribute("aria-valuenow")})}},[n,r,a,o]),c.useEffect(()=>{if(!o)return;const l=t.current;q(l,"Eager values not found");const{panelDataArray:u}=l,d=ts(n,o);q(d!=null,`No group found for id "${n}"`);const h=Tt(n,o);q(h,`No resize handles found for group id "${n}"`);const f=h.map(p=>{const g=p.getAttribute(te.resizeHandleId);q(g,"Resize handle element has no handle id attribute");const[x,v]=qa(n,g,u,o);if(x==null||v==null)return()=>{};const N=w=>{if(!w.defaultPrevented)switch(w.key){case"Enter":{w.preventDefault();const m=u.findIndex(S=>S.id===x);if(m>=0){const S=u[m];q(S,`No panel data found for index ${m}`);const j=r[m],{collapsedSize:M=0,collapsible:R,minSize:E=0}=S.constraints;if(j!=null&&R){const T=Rt({delta:ge(j,M)?E-M:M-j,initialLayout:r,panelConstraints:u.map(B=>B.constraints),pivotIndices:es(n,g,o),prevLayout:r,trigger:"keyboard"});r!==T&&i(T)}}break}}};return p.addEventListener("keydown",N),()=>{p.removeEventListener("keydown",N)}});return()=>{f.forEach(p=>p())}},[o,e,t,n,r,a,i])}function pr(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ns(e,t){const n=e==="horizontal",{x:r,y:a}=tn(t);return n?r:a}function Ga(e,t,n,r,a){const o=n==="horizontal",i=rn(t,a);q(i,`No resize handle element found for id "${t}"`);const l=i.getAttribute(te.groupId);q(l,"Resize handle element has no group id attribute");let{initialCursorPosition:u}=r;const d=ns(n,e),h=ts(l,a);q(h,`No group element found for id "${l}"`);const f=h.getBoundingClientRect(),p=o?f.width:f.height;return(d-u)/p*100}function Ba(e,t,n,r,a,o){if(Br(e)){const i=n==="horizontal";let l=0;e.shiftKey?l=100:a!=null?l=a:l=10;let u=0;switch(e.key){case"ArrowDown":u=i?0:l;break;case"ArrowLeft":u=i?-l:0;break;case"ArrowRight":u=i?l:0;break;case"ArrowUp":u=i?0:-l;break;case"End":u=100;break;case"Home":u=-100;break}return u}else return r==null?0:Ga(e,t,n,r,o)}function Va({panelDataArray:e}){const t=Array(e.length),n=e.map(o=>o.constraints);let r=0,a=100;for(let o=0;o<e.length;o++){const i=n[o];q(i,`Panel constraints not found for index ${o}`);const{defaultSize:l}=i;l!=null&&(r++,t[o]=l,a-=l)}for(let o=0;o<e.length;o++){const i=n[o];q(i,`Panel constraints not found for index ${o}`);const{defaultSize:l}=i;if(l!=null)continue;const u=e.length-r,d=a/u;r++,t[o]=d,a-=d}return t}function lt(e,t,n){t.forEach((r,a)=>{const o=e[a];q(o,`Panel data not found for index ${a}`);const{callbacks:i,constraints:l,id:u}=o,{collapsedSize:d=0,collapsible:h}=l,f=n[u];if(f==null||r!==f){n[u]=r;const{onCollapse:p,onExpand:g,onResize:x}=i;x&&x(r,f),h&&(p||g)&&(g&&(f==null||Te(f,d))&&!Te(r,d)&&g(),p&&(f==null||!Te(f,d))&&Te(r,d)&&p())}})}function qt(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Wa({defaultSize:e,dragState:t,layout:n,panelData:r,panelIndex:a,precision:o=3}){const i=n[a];let l;return i==null?l=e!=null?e.toPrecision(o):"1":r.length===1?l="1":l=i.toPrecision(o),{flexBasis:0,flexGrow:l,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function Ua(e,t=10){let n=null;return(...a)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{e(...a)},t)}}function gr(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,n)=>{localStorage.setItem(t,n)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function rs(e){return`react-resizable-panels:${e}`}function ss(e){return e.map(t=>{const{constraints:n,id:r,idIsFromProps:a,order:o}=t;return a?r:o?`${o}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((t,n)=>t.localeCompare(n)).join(",")}function os(e,t){try{const n=rs(e),r=t.getItem(n);if(r){const a=JSON.parse(r);if(typeof a=="object"&&a!=null)return a}}catch{}return null}function Xa(e,t,n){var r,a;const o=(r=os(e,n))!==null&&r!==void 0?r:{},i=ss(t);return(a=o[i])!==null&&a!==void 0?a:null}function Ka(e,t,n,r,a){var o;const i=rs(e),l=ss(t),u=(o=os(e,a))!==null&&o!==void 0?o:{};u[l]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{a.setItem(i,JSON.stringify(u))}catch(d){console.error(d)}}function mr({layout:e,panelConstraints:t}){const n=[...e],r=n.reduce((o,i)=>o+i,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(o=>`${o}%`).join(", ")}`);if(!ge(r,100)&&n.length>0)for(let o=0;o<t.length;o++){const i=n[o];q(i!=null,`No layout data found for index ${o}`);const l=100/r*i;n[o]=l}let a=0;for(let o=0;o<t.length;o++){const i=n[o];q(i!=null,`No layout data found for index ${o}`);const l=gt({panelConstraints:t,panelIndex:o,size:i});i!=l&&(a+=i-l,n[o]=l)}if(!ge(a,0))for(let o=0;o<t.length;o++){const i=n[o];q(i!=null,`No layout data found for index ${o}`);const l=i+a,u=gt({panelConstraints:t,panelIndex:o,size:l});if(i!==u&&(a-=u-i,n[o]=u,ge(a,0)))break}return n}const Ya=100,Dt={getItem:e=>(gr(Dt),Dt.getItem(e)),setItem:(e,t)=>{gr(Dt),Dt.setItem(e,t)}},xr={};function as({autoSaveId:e=null,children:t,className:n="",direction:r,forwardedRef:a,id:o=null,onLayout:i=null,keyboardResizeBy:l=null,storage:u=Dt,style:d,tagName:h="div",...f}){const p=$n(o),g=c.useRef(null),[x,v]=c.useState(null),[N,w]=c.useState([]),m=Pa(),S=c.useRef({}),j=c.useRef(new Map),M=c.useRef(0),R=c.useRef({autoSaveId:e,direction:r,dragState:x,id:p,keyboardResizeBy:l,onLayout:i,storage:u}),E=c.useRef({layout:N,panelDataArray:[],panelDataArrayChanged:!1});c.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),c.useImperativeHandle(a,()=>({getId:()=>R.current.id,getLayout:()=>{const{layout:b}=E.current;return b},setLayout:b=>{const{onLayout:k}=R.current,{layout:z,panelDataArray:_}=E.current,L=mr({layout:b,panelConstraints:_.map(O=>O.constraints)});pr(z,L)||(w(L),E.current.layout=L,k&&k(L),lt(_,L,S.current))}}),[]),Qe(()=>{R.current.autoSaveId=e,R.current.direction=r,R.current.dragState=x,R.current.id=p,R.current.onLayout=i,R.current.storage=u}),Ha({committedValuesRef:R,eagerValuesRef:E,groupId:p,layout:N,panelDataArray:E.current.panelDataArray,setLayout:w,panelGroupElement:g.current}),c.useEffect(()=>{const{panelDataArray:b}=E.current;if(e){if(N.length===0||N.length!==b.length)return;let k=xr[e];k==null&&(k=Ua(Ka,Ya),xr[e]=k);const z=[...b],_=new Map(j.current);k(e,z,_,N,u)}},[e,N,u]),c.useEffect(()=>{});const T=c.useCallback(b=>{const{onLayout:k}=R.current,{layout:z,panelDataArray:_}=E.current;if(b.constraints.collapsible){const L=_.map(le=>le.constraints),{collapsedSize:O=0,panelSize:G,pivotIndices:W}=Ke(_,b,z);if(q(G!=null,`Panel size not found for panel "${b.id}"`),!Te(G,O)){j.current.set(b.id,G);const ee=ut(_,b)===_.length-1?G-O:O-G,Y=Rt({delta:ee,initialLayout:z,panelConstraints:L,pivotIndices:W,prevLayout:z,trigger:"imperative-api"});qt(z,Y)||(w(Y),E.current.layout=Y,k&&k(Y),lt(_,Y,S.current))}}},[]),B=c.useCallback((b,k)=>{const{onLayout:z}=R.current,{layout:_,panelDataArray:L}=E.current;if(b.constraints.collapsible){const O=L.map(Q=>Q.constraints),{collapsedSize:G=0,panelSize:W=0,minSize:le=0,pivotIndices:ee}=Ke(L,b,_),Y=k??le;if(Te(W,G)){const Q=j.current.get(b.id),ce=Q!=null&&Q>=Y?Q:Y,nt=ut(L,b)===L.length-1?W-ce:ce-W,oe=Rt({delta:nt,initialLayout:_,panelConstraints:O,pivotIndices:ee,prevLayout:_,trigger:"imperative-api"});qt(_,oe)||(w(oe),E.current.layout=oe,z&&z(oe),lt(L,oe,S.current))}}},[]),U=c.useCallback(b=>{const{layout:k,panelDataArray:z}=E.current,{panelSize:_}=Ke(z,b,k);return q(_!=null,`Panel size not found for panel "${b.id}"`),_},[]),H=c.useCallback((b,k)=>{const{panelDataArray:z}=E.current,_=ut(z,b);return Wa({defaultSize:k,dragState:x,layout:N,panelData:z,panelIndex:_})},[x,N]),$=c.useCallback(b=>{const{layout:k,panelDataArray:z}=E.current,{collapsedSize:_=0,collapsible:L,panelSize:O}=Ke(z,b,k);return q(O!=null,`Panel size not found for panel "${b.id}"`),L===!0&&Te(O,_)},[]),K=c.useCallback(b=>{const{layout:k,panelDataArray:z}=E.current,{collapsedSize:_=0,collapsible:L,panelSize:O}=Ke(z,b,k);return q(O!=null,`Panel size not found for panel "${b.id}"`),!L||Ze(O,_)>0},[]),X=c.useCallback(b=>{const{panelDataArray:k}=E.current;k.push(b),k.sort((z,_)=>{const L=z.order,O=_.order;return L==null&&O==null?0:L==null?-1:O==null?1:L-O}),E.current.panelDataArrayChanged=!0,m()},[m]);Qe(()=>{if(E.current.panelDataArrayChanged){E.current.panelDataArrayChanged=!1;const{autoSaveId:b,onLayout:k,storage:z}=R.current,{layout:_,panelDataArray:L}=E.current;let O=null;if(b){const W=Xa(b,L,z);W&&(j.current=new Map(Object.entries(W.expandToSizes)),O=W.layout)}O==null&&(O=Va({panelDataArray:L}));const G=mr({layout:O,panelConstraints:L.map(W=>W.constraints)});pr(_,G)||(w(G),E.current.layout=G,k&&k(G),lt(L,G,S.current))}}),Qe(()=>{const b=E.current;return()=>{b.layout=[]}},[]);const Z=c.useCallback(b=>{let k=!1;const z=g.current;return z&&window.getComputedStyle(z,null).getPropertyValue("direction")==="rtl"&&(k=!0),function(L){L.preventDefault();const O=g.current;if(!O)return()=>null;const{direction:G,dragState:W,id:le,keyboardResizeBy:ee,onLayout:Y}=R.current,{layout:Q,panelDataArray:ce}=E.current,{initialLayout:Ce}=W??{},nt=es(le,b,O);let oe=Ba(L,b,G,W,ee,O);const rt=G==="horizontal";rt&&k&&(oe=-oe);const Re=ce.map(Ft=>Ft.constraints),De=Rt({delta:oe,initialLayout:Ce??Q,panelConstraints:Re,pivotIndices:nt,prevLayout:Q,trigger:Br(L)?"keyboard":"mouse-or-touch"}),Xe=!qt(Q,De);(Vr(L)||Wr(L))&&M.current!=oe&&(M.current=oe,!Xe&&oe!==0?rt?mn(b,oe<0?Xr:Kr):mn(b,oe<0?Yr:Jr):mn(b,0)),Xe&&(w(De),E.current.layout=De,Y&&Y(De),lt(ce,De,S.current))}},[]),C=c.useCallback((b,k)=>{const{onLayout:z}=R.current,{layout:_,panelDataArray:L}=E.current,O=L.map(Q=>Q.constraints),{panelSize:G,pivotIndices:W}=Ke(L,b,_);q(G!=null,`Panel size not found for panel "${b.id}"`);const ee=ut(L,b)===L.length-1?G-k:k-G,Y=Rt({delta:ee,initialLayout:_,panelConstraints:O,pivotIndices:W,prevLayout:_,trigger:"imperative-api"});qt(_,Y)||(w(Y),E.current.layout=Y,z&&z(Y),lt(L,Y,S.current))},[]),y=c.useCallback((b,k)=>{const{layout:z,panelDataArray:_}=E.current,{collapsedSize:L=0,collapsible:O}=k,{collapsedSize:G=0,collapsible:W,maxSize:le=100,minSize:ee=0}=b.constraints,{panelSize:Y}=Ke(_,b,z);Y!=null&&(O&&W&&Te(Y,L)?Te(L,G)||C(b,G):Y<ee?C(b,ee):Y>le&&C(b,le))},[C]),I=c.useCallback((b,k)=>{const{direction:z}=R.current,{layout:_}=E.current;if(!g.current)return;const L=rn(b,g.current);q(L,`Drag handle element not found for id "${b}"`);const O=ns(z,k);v({dragHandleId:b,dragHandleRect:L.getBoundingClientRect(),initialCursorPosition:O,initialLayout:_})},[]),D=c.useCallback(()=>{v(null)},[]),A=c.useCallback(b=>{const{panelDataArray:k}=E.current,z=ut(k,b);z>=0&&(k.splice(z,1),delete S.current[b.id],E.current.panelDataArrayChanged=!0,m())},[m]),P=c.useMemo(()=>({collapsePanel:T,direction:r,dragState:x,expandPanel:B,getPanelSize:U,getPanelStyle:H,groupId:p,isPanelCollapsed:$,isPanelExpanded:K,reevaluatePanelConstraints:y,registerPanel:X,registerResizeHandle:Z,resizePanel:C,startDragging:I,stopDragging:D,unregisterPanel:A,panelGroupElement:g.current}),[T,x,r,B,U,H,p,$,K,y,X,Z,C,I,D,A]),F={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return c.createElement(en.Provider,{value:P},c.createElement(h,{...f,children:t,className:n,id:o,ref:g,style:{...F,...d},[te.group]:"",[te.groupDirection]:r,[te.groupId]:p}))}const is=c.forwardRef((e,t)=>c.createElement(as,{...e,forwardedRef:t}));as.displayName="PanelGroup";is.displayName="forwardRef(PanelGroup)";function ut(e,t){return e.findIndex(n=>n===t||n.id===t.id)}function Ke(e,t,n){const r=ut(e,t),o=r===e.length-1?[r-1,r]:[r,r+1],i=n[r];return{...t.constraints,panelSize:i,pivotIndices:o}}function Ja({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:r}){c.useEffect(()=>{if(e||n==null||r==null)return;const a=rn(t,r);if(a==null)return;const o=i=>{if(!i.defaultPrevented)switch(i.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{i.preventDefault(),n(i);break}case"F6":{i.preventDefault();const l=a.getAttribute(te.groupId);q(l,`No group element found for id "${l}"`);const u=Tt(l,r),d=Zr(l,t,r);q(d!==null,`No resize element found for id "${t}"`);const h=i.shiftKey?d>0?d-1:u.length-1:d+1<u.length?d+1:0;u[h].focus();break}}};return a.addEventListener("keydown",o),()=>{a.removeEventListener("keydown",o)}},[r,e,t,n])}function ls({children:e=null,className:t="",disabled:n=!1,hitAreaMargins:r,id:a,onBlur:o,onClick:i,onDragging:l,onFocus:u,onPointerDown:d,onPointerUp:h,style:f={},tabIndex:p=0,tagName:g="div",...x}){var v,N;const w=c.useRef(null),m=c.useRef({onClick:i,onDragging:l,onPointerDown:d,onPointerUp:h});c.useEffect(()=>{m.current.onClick=i,m.current.onDragging=l,m.current.onPointerDown=d,m.current.onPointerUp=h});const S=c.useContext(en);if(S===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:j,groupId:M,registerResizeHandle:R,startDragging:E,stopDragging:T,panelGroupElement:B}=S,U=$n(a),[H,$]=c.useState("inactive"),[K,X]=c.useState(!1),[Z,C]=c.useState(null),y=c.useRef({state:H});Qe(()=>{y.current.state=H}),c.useEffect(()=>{if(n)C(null);else{const P=R(U);C(()=>P)}},[n,U,R]);const I=(v=r?.coarse)!==null&&v!==void 0?v:15,D=(N=r?.fine)!==null&&N!==void 0?N:5;c.useEffect(()=>{if(n||Z==null)return;const P=w.current;q(P,"Element ref not attached");let F=!1;return La(U,P,j,{coarse:I,fine:D},(k,z,_)=>{if(!z){$("inactive");return}switch(k){case"down":{$("drag"),F=!1,q(_,'Expected event to be defined for "down" action'),E(U,_);const{onDragging:L,onPointerDown:O}=m.current;L?.(!0),O?.();break}case"move":{const{state:L}=y.current;F=!0,L!=="drag"&&$("hover"),q(_,'Expected event to be defined for "move" action'),Z(_);break}case"up":{$("hover"),T();const{onClick:L,onDragging:O,onPointerUp:G}=m.current;O?.(!1),G?.(),F||L?.();break}}})},[I,j,n,D,R,U,Z,E,T]),Ja({disabled:n,handleId:U,resizeHandler:Z,panelGroupElement:B});const A={touchAction:"none",userSelect:"none"};return c.createElement(g,{...x,children:e,className:t,id:a,onBlur:()=>{X(!1),o?.()},onFocus:()=>{X(!0),u?.()},ref:w,role:"separator",style:{...A,...f},tabIndex:p,[te.groupDirection]:j,[te.groupId]:M,[te.resizeHandle]:"",[te.resizeHandleActive]:H==="drag"?"pointer":K?"keyboard":void 0,[te.resizeHandleEnabled]:!n,[te.resizeHandleId]:U,[te.resizeHandleState]:H})}ls.displayName="PanelResizeHandle";const cs=({className:e,...t})=>s.jsx(is,{className:V("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",e),...t}),Rn=Gr,Qa=({withHandle:e,className:t,...n})=>s.jsx(ls,{className:V("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",t),...n,children:e&&s.jsx("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:s.jsx(Na,{className:"h-2.5 w-2.5"})})}),Hn=({leftContent:e,rightContent:t,direction:n="horizontal",defaultSizes:r=[50,50],className:a})=>s.jsxs(cs,{direction:n,className:V("w-full border rounded-none",a),children:[s.jsx(Rn,{defaultSize:r[0],children:e}),s.jsx(Qa,{withHandle:!0}),s.jsx(Rn,{defaultSize:r[1],children:t})]});var sn="Checkbox",[Za,qc]=Qt(sn),[ei,Gn]=Za(sn);function ti(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:a,disabled:o,form:i,name:l,onCheckedChange:u,required:d,value:h="on",internal_do_not_use_render:f}=e,[p,g]=zr({prop:n,defaultProp:a??!1,onChange:u,caller:sn}),[x,v]=c.useState(null),[N,w]=c.useState(null),m=c.useRef(!1),S=x?!!i||!!x.closest("form"):!0,j={checked:p,disabled:o,setChecked:g,control:x,setControl:v,name:l,form:i,value:h,hasConsumerStoppedPropagationRef:m,required:d,defaultChecked:Ve(a)?!1:a,isFormControl:S,bubbleInput:N,setBubbleInput:w};return s.jsx(ei,{scope:t,...j,children:ni(f)?f(j):r})}var us="CheckboxTrigger",ds=c.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},a)=>{const{control:o,value:i,disabled:l,checked:u,required:d,setControl:h,setChecked:f,hasConsumerStoppedPropagationRef:p,isFormControl:g,bubbleInput:x}=Gn(us,e),v=et(a,h),N=c.useRef(u);return c.useEffect(()=>{const w=o?.form;if(w){const m=()=>f(N.current);return w.addEventListener("reset",m),()=>w.removeEventListener("reset",m)}},[o,f]),s.jsx(tt.button,{type:"button",role:"checkbox","aria-checked":Ve(u)?"mixed":u,"aria-required":d,"data-state":ms(u),"data-disabled":l?"":void 0,disabled:l,value:i,...r,ref:v,onKeyDown:bt(t,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:bt(n,w=>{f(m=>Ve(m)?!0:!m),x&&g&&(p.current=w.isPropagationStopped(),p.current||w.stopPropagation())})})});ds.displayName=us;var Bn=c.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:o,required:i,disabled:l,value:u,onCheckedChange:d,form:h,...f}=e;return s.jsx(ti,{__scopeCheckbox:n,checked:a,defaultChecked:o,disabled:l,required:i,onCheckedChange:d,name:r,form:h,value:u,internal_do_not_use_render:({isFormControl:p})=>s.jsxs(s.Fragment,{children:[s.jsx(ds,{...f,ref:t,__scopeCheckbox:n}),p&&s.jsx(gs,{__scopeCheckbox:n})]})})});Bn.displayName=sn;var fs="CheckboxIndicator",hs=c.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,o=Gn(fs,n);return s.jsx(Mr,{present:r||Ve(o.checked)||o.checked===!0,children:s.jsx(tt.span,{"data-state":ms(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});hs.displayName=fs;var ps="CheckboxBubbleInput",gs=c.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:a,checked:o,defaultChecked:i,required:l,disabled:u,name:d,value:h,form:f,bubbleInput:p,setBubbleInput:g}=Gn(ps,e),x=et(n,g),v=Tr(o),N=Lr(r);c.useEffect(()=>{const m=p;if(!m)return;const S=window.HTMLInputElement.prototype,M=Object.getOwnPropertyDescriptor(S,"checked").set,R=!a.current;if(v!==o&&M){const E=new Event("click",{bubbles:R});m.indeterminate=Ve(o),M.call(m,Ve(o)?!1:o),m.dispatchEvent(E)}},[p,v,o,a]);const w=c.useRef(Ve(o)?!1:o);return s.jsx(tt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??w.current,required:l,disabled:u,name:d,value:h,form:f,...t,tabIndex:-1,ref:x,style:{...t.style,...N,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});gs.displayName=ps;function ni(e){return typeof e=="function"}function Ve(e){return e==="indeterminate"}function ms(e){return Ve(e)?"indeterminate":e?"checked":"unchecked"}const xs=c.forwardRef(({className:e,...t},n)=>s.jsx(Bn,{ref:n,className:V("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(hs,{className:V("flex items-center justify-center text-current"),children:s.jsx(ta,{className:"h-4 w-4"})})}));xs.displayName=Bn.displayName;const ri=({control:e,name:t,label:n,options:r,orientation:a="vertical",className:o="",maxSelections:i,onValueChange:l})=>{const{setValue:u}=na(),d=Or({control:e,name:t});return c.useEffect(()=>{if(i&&d&&d.length>i){const h=d.slice(0,i);u(t,h),l&&l(h)}},[d,i,t,u,l]),s.jsx(Ne,{control:e,name:t,render:({field:h})=>s.jsxs(ye,{className:`space-y-2 ${a==="horizontal"?"space-x-4":""} ${o}`,children:[n&&s.jsx("div",{className:"font-medium",children:n}),r.map(f=>{const p=f.id||`${t}_${f.value}`;return s.jsxs(ye,{className:"flex flex-row items-start space-x-3 space-y-0",children:[s.jsx(Ee,{children:s.jsx(xs,{id:p,checked:h.value?.includes(f.value)||!1,onCheckedChange:g=>{const x=h.value||[];if(g&&i&&x.length>=i)return;const v=g?[...x,f.value]:x.filter(N=>N!==f.value);h.onChange(v),l&&l(v)}})}),s.jsxs("div",{className:"space-y-1 leading-none",children:[s.jsx("span",{children:f.label})," ",f.helperText&&s.jsx(Me,{children:f.helperText})]})]},f.value)})]})})};var ue=(e=>(e.TRUE_FALSE_NOT_GIVEN="true_false_not_given",e.YES_NO_NOT_GIVEN="yes_no_not_given",e.MULTIPLE_CHOICE="multiple_choice_multiple_answers",e.MATCHING_HEADINGS="matching_headings",e.MATCHING_INFORMATION="matching_information",e.MATCHING_FEATURES="matching_features",e.MATCHING_SENTENCE_ENDINGS="matching_sentence_endings",e.SENTENCE_COMPLETION="sentence_completion",e.SUMMARY_COMPLETION="summary_completion",e.DIAGRAM_LABEL="diagram_label",e.SHORT_ANSWER="short_answer",e.LIST_SELECTION="list_selection",e))(ue||{});const on=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function wt(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Vn(e){return"nodeType"in e}function de(e){var t,n;return e?wt(e)?e:Vn(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Wn(e){const{Document:t}=de(e);return e instanceof t}function Pt(e){return wt(e)?!1:e instanceof de(e).HTMLElement}function vs(e){return e instanceof de(e).SVGElement}function yt(e){return e?wt(e)?e.document:Vn(e)?Wn(e)?e:Pt(e)||vs(e)?e.ownerDocument:document:document:document}const Ue=on?c.useLayoutEffect:c.useEffect;function Un(e){const t=c.useRef(e);return Ue(()=>{t.current=e}),c.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.current==null?void 0:t.current(...r)},[])}function si(){const e=c.useRef(null),t=c.useCallback((r,a)=>{e.current=setInterval(r,a)},[]),n=c.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Lt(e,t){t===void 0&&(t=[e]);const n=c.useRef(e);return Ue(()=>{n.current!==e&&(n.current=e)},t),n}function Ot(e,t){const n=c.useRef();return c.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Ut(e){const t=Un(e),n=c.useRef(null),r=c.useCallback(a=>{a!==n.current&&t?.(a,n.current),n.current=a},[]);return[n,r]}function Dn(e){const t=c.useRef();return c.useEffect(()=>{t.current=e},[e]),t.current}let vn={};function an(e,t){return c.useMemo(()=>{if(t)return t;const n=vn[e]==null?0:vn[e]+1;return vn[e]=n,e+"-"+n},[e,t])}function bs(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((o,i)=>{const l=Object.entries(i);for(const[u,d]of l){const h=o[u];h!=null&&(o[u]=h+e*d)}return o},{...t})}}const xt=bs(1),Xt=bs(-1);function oi(e){return"clientX"in e&&"clientY"in e}function ws(e){if(!e)return!1;const{KeyboardEvent:t}=de(e.target);return t&&e instanceof t}function ai(e){if(!e)return!1;const{TouchEvent:t}=de(e.target);return t&&e instanceof t}function kn(e){if(ai(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return oi(e)?{x:e.clientX,y:e.clientY}:null}const vr="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function ii(e){return e.matches(vr)?e:e.querySelector(vr)}const li={display:"none"};function ci(e){let{id:t,value:n}=e;return we.createElement("div",{id:t,style:li},n)}function ui(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return we.createElement("div",{id:t,style:a,role:"status","aria-live":r,"aria-atomic":!0},n)}function di(){const[e,t]=c.useState("");return{announce:c.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const ys=c.createContext(null);function fi(e){const t=c.useContext(ys);c.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function hi(){const[e]=c.useState(()=>new Set),t=c.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[c.useCallback(r=>{let{type:a,event:o}=r;e.forEach(i=>{var l;return(l=i[a])==null?void 0:l.call(i,o)})},[e]),t]}const pi={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},gi={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function mi(e){let{announcements:t=gi,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=pi}=e;const{announce:o,announcement:i}=di(),l=an("DndLiveRegion"),[u,d]=c.useState(!1);if(c.useEffect(()=>{d(!0)},[]),fi(c.useMemo(()=>({onDragStart(f){let{active:p}=f;o(t.onDragStart({active:p}))},onDragMove(f){let{active:p,over:g}=f;t.onDragMove&&o(t.onDragMove({active:p,over:g}))},onDragOver(f){let{active:p,over:g}=f;o(t.onDragOver({active:p,over:g}))},onDragEnd(f){let{active:p,over:g}=f;o(t.onDragEnd({active:p,over:g}))},onDragCancel(f){let{active:p,over:g}=f;o(t.onDragCancel({active:p,over:g}))}}),[o,t])),!u)return null;const h=we.createElement(we.Fragment,null,we.createElement(ci,{id:r,value:a.draggable}),we.createElement(ui,{id:l,announcement:i}));return n?jt.createPortal(h,n):h}var re;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(re||(re={}));function Kt(){}const je=Object.freeze({x:0,y:0});function xi(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function vi(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function bi(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),i=a-r,l=o-n;if(r<a&&n<o){const u=t.width*t.height,d=e.width*e.height,h=i*l,f=h/(u+d-h);return Number(f.toFixed(4))}return 0}const wi=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=[];for(const o of r){const{id:i}=o,l=n.get(i);if(l){const u=bi(l,t);u>0&&a.push({id:i,data:{droppableContainer:o,value:u}})}}return a.sort(xi)};function yi(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Cs(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:je}function Ci(e){return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return a.reduce((i,l)=>({...i,top:i.top+e*l.y,bottom:i.bottom+e*l.y,left:i.left+e*l.x,right:i.right+e*l.x}),{...n})}}const Ni=Ci(1);function Ei(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Si(e,t,n){const r=Ei(t);if(!r)return e;const{scaleX:a,scaleY:o,x:i,y:l}=r,u=e.left-i-(1-a)*parseFloat(n),d=e.top-l-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),h=a?e.width/a:e.width,f=o?e.height/o:e.height;return{width:h,height:f,top:d,right:u+h,bottom:d+f,left:u}}const ji={ignoreTransform:!1};function $t(e,t){t===void 0&&(t=ji);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:h}=de(e).getComputedStyle(e);d&&(n=Si(n,d,h))}const{top:r,left:a,width:o,height:i,bottom:l,right:u}=n;return{top:r,left:a,width:o,height:i,bottom:l,right:u}}function br(e){return $t(e,{ignoreTransform:!0})}function Ri(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Di(e,t){return t===void 0&&(t=de(e).getComputedStyle(e)),t.position==="fixed"}function ki(e,t){t===void 0&&(t=de(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const o=t[a];return typeof o=="string"?n.test(o):!1})}function Xn(e,t){const n=[];function r(a){if(t!=null&&n.length>=t||!a)return n;if(Wn(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!Pt(a)||vs(a)||n.includes(a))return n;const o=de(e).getComputedStyle(a);return a!==e&&ki(a,o)&&n.push(a),Di(a,o)?n:r(a.parentNode)}return e?r(e):n}function Ns(e){const[t]=Xn(e,1);return t??null}function bn(e){return!on||!e?null:wt(e)?e:Vn(e)?Wn(e)||e===yt(e).scrollingElement?window:Pt(e)?e:null:null}function Es(e){return wt(e)?e.scrollX:e.scrollLeft}function Ss(e){return wt(e)?e.scrollY:e.scrollTop}function _n(e){return{x:Es(e),y:Ss(e)}}var se;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(se||(se={}));function js(e){return!on||!e?!1:e===document.scrollingElement}function Rs(e){const t={x:0,y:0},n=js(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,i=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:a,isLeft:o,isBottom:i,isRight:l,maxScroll:r,minScroll:t}}const _i={x:.2,y:.2};function Ii(e,t,n,r,a){let{top:o,left:i,right:l,bottom:u}=n;r===void 0&&(r=10),a===void 0&&(a=_i);const{isTop:d,isBottom:h,isLeft:f,isRight:p}=Rs(e),g={x:0,y:0},x={x:0,y:0},v={height:t.height*a.y,width:t.width*a.x};return!d&&o<=t.top+v.height?(g.y=se.Backward,x.y=r*Math.abs((t.top+v.height-o)/v.height)):!h&&u>=t.bottom-v.height&&(g.y=se.Forward,x.y=r*Math.abs((t.bottom-v.height-u)/v.height)),!p&&l>=t.right-v.width?(g.x=se.Forward,x.x=r*Math.abs((t.right-v.width-l)/v.width)):!f&&i<=t.left+v.width&&(g.x=se.Backward,x.x=r*Math.abs((t.left+v.width-i)/v.width)),{direction:g,speed:x}}function Ai(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:i}=window;return{top:0,left:0,right:o,bottom:i,width:o,height:i}}const{top:t,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function Ds(e){return e.reduce((t,n)=>xt(t,_n(n)),je)}function zi(e){return e.reduce((t,n)=>t+Es(n),0)}function Ti(e){return e.reduce((t,n)=>t+Ss(n),0)}function Li(e,t){if(t===void 0&&(t=$t),!e)return;const{top:n,left:r,bottom:a,right:o}=t(e);Ns(e)&&(a<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Mi=[["x",["left","right"],zi],["y",["top","bottom"],Ti]];class Kn{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Xn(n),a=Ds(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,i,l]of Mi)for(const u of i)Object.defineProperty(this,u,{get:()=>{const d=l(r),h=a[o]-d;return this.rect[u]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class kt{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var a;(a=this.target)==null||a.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Pi(e){const{EventTarget:t}=de(e);return e instanceof t?e:yt(e)}function wn(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var be;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(be||(be={}));function wr(e){e.preventDefault()}function Oi(e){e.stopPropagation()}var J;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(J||(J={}));const ks={start:[J.Space,J.Enter],cancel:[J.Esc],end:[J.Space,J.Enter,J.Tab]},$i=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case J.Right:return{...n,x:n.x+25};case J.Left:return{...n,x:n.x-25};case J.Down:return{...n,y:n.y+25};case J.Up:return{...n,y:n.y-25}}};class _s{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new kt(yt(n)),this.windowListeners=new kt(de(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(be.Resize,this.handleCancel),this.windowListeners.add(be.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(be.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Li(r),n(je)}handleKeyDown(t){if(ws(t)){const{active:n,context:r,options:a}=this.props,{keyboardCodes:o=ks,coordinateGetter:i=$i,scrollBehavior:l="smooth"}=a,{code:u}=t;if(o.end.includes(u)){this.handleEnd(t);return}if(o.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:d}=r.current,h=d?{x:d.left,y:d.top}:je;this.referenceCoordinates||(this.referenceCoordinates=h);const f=i(t,{active:n,context:r.current,currentCoordinates:h});if(f){const p=Xt(f,h),g={x:0,y:0},{scrollableAncestors:x}=r.current;for(const v of x){const N=t.code,{isTop:w,isRight:m,isLeft:S,isBottom:j,maxScroll:M,minScroll:R}=Rs(v),E=Ai(v),T={x:Math.min(N===J.Right?E.right-E.width/2:E.right,Math.max(N===J.Right?E.left:E.left+E.width/2,f.x)),y:Math.min(N===J.Down?E.bottom-E.height/2:E.bottom,Math.max(N===J.Down?E.top:E.top+E.height/2,f.y))},B=N===J.Right&&!m||N===J.Left&&!S,U=N===J.Down&&!j||N===J.Up&&!w;if(B&&T.x!==f.x){const H=v.scrollLeft+p.x,$=N===J.Right&&H<=M.x||N===J.Left&&H>=R.x;if($&&!p.y){v.scrollTo({left:H,behavior:l});return}$?g.x=v.scrollLeft-H:g.x=N===J.Right?v.scrollLeft-M.x:v.scrollLeft-R.x,g.x&&v.scrollBy({left:-g.x,behavior:l});break}else if(U&&T.y!==f.y){const H=v.scrollTop+p.y,$=N===J.Down&&H<=M.y||N===J.Up&&H>=R.y;if($&&!p.x){v.scrollTo({top:H,behavior:l});return}$?g.y=v.scrollTop-H:g.y=N===J.Down?v.scrollTop-M.y:v.scrollTop-R.y,g.y&&v.scrollBy({top:-g.y,behavior:l});break}}this.handleMove(t,xt(Xt(f,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}_s.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=ks,onActivation:a}=t,{active:o}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const l=o.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),a?.({event:e.nativeEvent}),!0)}return!1}}];function yr(e){return!!(e&&"distance"in e)}function Cr(e){return!!(e&&"delay"in e)}class Yn{constructor(t,n,r){var a;r===void 0&&(r=Pi(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:i}=o;this.props=t,this.events=n,this.document=yt(i),this.documentListeners=new kt(this.document),this.listeners=new kt(r),this.windowListeners=new kt(de(i)),this.initialCoordinates=(a=kn(o))!=null?a:je,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(be.Resize,this.handleCancel),this.windowListeners.add(be.DragStart,wr),this.windowListeners.add(be.VisibilityChange,this.handleCancel),this.windowListeners.add(be.ContextMenu,wr),this.documentListeners.add(be.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Cr(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(yr(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:a}=this.props;a(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(be.Click,Oi,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(be.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:a,props:o}=this,{onMove:i,options:{activationConstraint:l}}=o;if(!a)return;const u=(n=kn(t))!=null?n:je,d=Xt(a,u);if(!r&&l){if(yr(l)){if(l.tolerance!=null&&wn(d,l.tolerance))return this.handleCancel();if(wn(d,l.distance))return this.handleStart()}if(Cr(l)&&wn(d,l.tolerance))return this.handleCancel();this.handlePending(l,d);return}t.cancelable&&t.preventDefault(),i(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===J.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Fi={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Is extends Yn{constructor(t){const{event:n}=t,r=yt(n.target);super(t,Fi,r)}}Is.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const qi={move:{name:"mousemove"},end:{name:"mouseup"}};var In;(function(e){e[e.RightClick=2]="RightClick"})(In||(In={}));class Hi extends Yn{constructor(t){super(t,qi,yt(t.event.target))}}Hi.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===In.RightClick?!1:(r?.({event:n}),!0)}}];const yn={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Gi extends Yn{constructor(t){super(t,yn)}static setup(){return window.addEventListener(yn.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(yn.move.name,t)};function t(){}}}Gi.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:a}=n;return a.length>1?!1:(r?.({event:n}),!0)}}];var _t;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(_t||(_t={}));var Yt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Yt||(Yt={}));function Bi(e){let{acceleration:t,activator:n=_t.Pointer,canScroll:r,draggingRect:a,enabled:o,interval:i=5,order:l=Yt.TreeOrder,pointerCoordinates:u,scrollableAncestors:d,scrollableAncestorRects:h,delta:f,threshold:p}=e;const g=Wi({delta:f,disabled:!o}),[x,v]=si(),N=c.useRef({x:0,y:0}),w=c.useRef({x:0,y:0}),m=c.useMemo(()=>{switch(n){case _t.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case _t.DraggableRect:return a}},[n,a,u]),S=c.useRef(null),j=c.useCallback(()=>{const R=S.current;if(!R)return;const E=N.current.x*w.current.x,T=N.current.y*w.current.y;R.scrollBy(E,T)},[]),M=c.useMemo(()=>l===Yt.TreeOrder?[...d].reverse():d,[l,d]);c.useEffect(()=>{if(!o||!d.length||!m){v();return}for(const R of M){if(r?.(R)===!1)continue;const E=d.indexOf(R),T=h[E];if(!T)continue;const{direction:B,speed:U}=Ii(R,T,m,t,p);for(const H of["x","y"])g[H][B[H]]||(U[H]=0,B[H]=0);if(U.x>0||U.y>0){v(),S.current=R,x(j,i),N.current=U,w.current=B;return}}N.current={x:0,y:0},w.current={x:0,y:0},v()},[t,j,r,v,o,i,JSON.stringify(m),JSON.stringify(g),x,d,M,h,JSON.stringify(p)])}const Vi={x:{[se.Backward]:!1,[se.Forward]:!1},y:{[se.Backward]:!1,[se.Forward]:!1}};function Wi(e){let{delta:t,disabled:n}=e;const r=Dn(t);return Ot(a=>{if(n||!r||!a)return Vi;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[se.Backward]:a.x[se.Backward]||o.x===-1,[se.Forward]:a.x[se.Forward]||o.x===1},y:{[se.Backward]:a.y[se.Backward]||o.y===-1,[se.Forward]:a.y[se.Forward]||o.y===1}}},[n,t,r])}function Ui(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return Ot(a=>{var o;return t==null?null:(o=r??a)!=null?o:null},[r,t])}function Xi(e,t){return c.useMemo(()=>e.reduce((n,r)=>{const{sensor:a}=r,o=a.activators.map(i=>({eventName:i.eventName,handler:t(i.handler,r)}));return[...n,...o]},[]),[e,t])}var Mt;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Mt||(Mt={}));var An;(function(e){e.Optimized="optimized"})(An||(An={}));const Nr=new Map;function Ki(e,t){let{dragging:n,dependencies:r,config:a}=t;const[o,i]=c.useState(null),{frequency:l,measure:u,strategy:d}=a,h=c.useRef(e),f=N(),p=Lt(f),g=c.useCallback(function(w){w===void 0&&(w=[]),!p.current&&i(m=>m===null?w:m.concat(w.filter(S=>!m.includes(S))))},[p]),x=c.useRef(null),v=Ot(w=>{if(f&&!n)return Nr;if(!w||w===Nr||h.current!==e||o!=null){const m=new Map;for(let S of e){if(!S)continue;if(o&&o.length>0&&!o.includes(S.id)&&S.rect.current){m.set(S.id,S.rect.current);continue}const j=S.node.current,M=j?new Kn(u(j),j):null;S.rect.current=M,M&&m.set(S.id,M)}return m}return w},[e,o,n,f,u]);return c.useEffect(()=>{h.current=e},[e]),c.useEffect(()=>{f||g()},[n,f]),c.useEffect(()=>{o&&o.length>0&&i(null)},[JSON.stringify(o)]),c.useEffect(()=>{f||typeof l!="number"||x.current!==null||(x.current=setTimeout(()=>{g(),x.current=null},l))},[l,f,g,...r]),{droppableRects:v,measureDroppableContainers:g,measuringScheduled:o!=null};function N(){switch(d){case Mt.Always:return!1;case Mt.BeforeDragging:return n;default:return!n}}}function As(e,t){return Ot(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Yi(e,t){return As(e,t)}function Ji(e){let{callback:t,disabled:n}=e;const r=Un(t),a=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return c.useEffect(()=>()=>a?.disconnect(),[a]),a}function ln(e){let{callback:t,disabled:n}=e;const r=Un(t),a=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return c.useEffect(()=>()=>a?.disconnect(),[a]),a}function Qi(e){return new Kn($t(e),e)}function Er(e,t,n){t===void 0&&(t=Qi);const[r,a]=c.useState(null);function o(){a(u=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=u??n)!=null?d:null}const h=t(e);return JSON.stringify(u)===JSON.stringify(h)?u:h})}const i=Ji({callback(u){if(e)for(const d of u){const{type:h,target:f}=d;if(h==="childList"&&f instanceof HTMLElement&&f.contains(e)){o();break}}}}),l=ln({callback:o});return Ue(()=>{o(),e?(l?.observe(e),i?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),i?.disconnect())},[e]),r}function Zi(e){const t=As(e);return Cs(e,t)}const Sr=[];function el(e){const t=c.useRef(e),n=Ot(r=>e?r&&r!==Sr&&e&&t.current&&e.parentNode===t.current.parentNode?r:Xn(e):Sr,[e]);return c.useEffect(()=>{t.current=e},[e]),n}function tl(e){const[t,n]=c.useState(null),r=c.useRef(e),a=c.useCallback(o=>{const i=bn(o.target);i&&n(l=>l?(l.set(i,_n(i)),new Map(l)):null)},[]);return c.useEffect(()=>{const o=r.current;if(e!==o){i(o);const l=e.map(u=>{const d=bn(u);return d?(d.addEventListener("scroll",a,{passive:!0}),[d,_n(d)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),r.current=e}return()=>{i(e),i(o)};function i(l){l.forEach(u=>{const d=bn(u);d?.removeEventListener("scroll",a)})}},[a,e]),c.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,i)=>xt(o,i),je):Ds(e):je,[e,t])}function jr(e,t){t===void 0&&(t=[]);const n=c.useRef(null);return c.useEffect(()=>{n.current=null},t),c.useEffect(()=>{const r=e!==je;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Xt(e,n.current):je}function nl(e){c.useEffect(()=>{if(!on)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function rl(e,t){return c.useMemo(()=>e.reduce((n,r)=>{let{eventName:a,handler:o}=r;return n[a]=i=>{o(i,t)},n},{}),[e,t])}function zs(e){return c.useMemo(()=>e?Ri(e):null,[e])}const Rr=[];function sl(e,t){t===void 0&&(t=$t);const[n]=e,r=zs(n?de(n):null),[a,o]=c.useState(Rr);function i(){o(()=>e.length?e.map(u=>js(u)?r:new Kn(t(u),u)):Rr)}const l=ln({callback:i});return Ue(()=>{l?.disconnect(),i(),e.forEach(u=>l?.observe(u))},[e]),a}function ol(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Pt(t)?t:e}function al(e){let{measure:t}=e;const[n,r]=c.useState(null),a=c.useCallback(d=>{for(const{target:h}of d)if(Pt(h)){r(f=>{const p=t(h);return f?{...f,width:p.width,height:p.height}:p});break}},[t]),o=ln({callback:a}),i=c.useCallback(d=>{const h=ol(d);o?.disconnect(),h&&o?.observe(h),r(h?t(h):null)},[t,o]),[l,u]=Ut(i);return c.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const il=[{sensor:Is,options:{}},{sensor:_s,options:{}}],ll={current:{}},Gt={draggable:{measure:br},droppable:{measure:br,strategy:Mt.WhileDragging,frequency:An.Optimized},dragOverlay:{measure:$t}};class It extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const cl={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new It,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Kt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Gt,measureDroppableContainers:Kt,windowRect:null,measuringScheduled:!1},ul={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Kt,draggableNodes:new Map,over:null,measureDroppableContainers:Kt},cn=c.createContext(ul),dl=c.createContext(cl);function fl(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new It}}}function hl(e,t){switch(t.type){case re.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case re.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case re.DragEnd:case re.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case re.RegisterDroppable:{const{element:n}=t,{id:r}=n,a=new It(e.droppable.containers);return a.set(r,n),{...e,droppable:{...e.droppable,containers:a}}}case re.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const i=new It(e.droppable.containers);return i.set(n,{...o,disabled:a}),{...e,droppable:{...e.droppable,containers:i}}}case re.UnregisterDroppable:{const{id:n,key:r}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const o=new It(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function pl(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:a}=c.useContext(cn),o=Dn(r),i=Dn(n?.id);return c.useEffect(()=>{if(!t&&!r&&o&&i!=null){if(!ws(o)||document.activeElement===o.target)return;const l=a.get(i);if(!l)return;const{activatorNode:u,node:d}=l;if(!u.current&&!d.current)return;requestAnimationFrame(()=>{for(const h of[u.current,d.current]){if(!h)continue;const f=ii(h);if(f){f.focus();break}}})}},[r,t,a,i,o]),null}function gl(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((a,o)=>o({transform:a,...r}),n):n}function ml(e){return c.useMemo(()=>({draggable:{...Gt.draggable,...e?.draggable},droppable:{...Gt.droppable,...e?.droppable},dragOverlay:{...Gt.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function xl(e){let{activeNode:t,measure:n,initialRect:r,config:a=!0}=e;const o=c.useRef(!1),{x:i,y:l}=typeof a=="boolean"?{x:a,y:a}:a;Ue(()=>{if(!i&&!l||!t){o.current=!1;return}if(o.current||!r)return;const d=t?.node.current;if(!d||d.isConnected===!1)return;const h=n(d),f=Cs(h,r);if(i||(f.x=0),l||(f.y=0),o.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=Ns(d);p&&p.scrollBy({top:f.y,left:f.x})}},[t,i,l,r,n])}const Ts=c.createContext({...je,scaleX:1,scaleY:1});var He;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(He||(He={}));const vl=c.memo(function(t){var n,r,a,o;let{id:i,accessibility:l,autoScroll:u=!0,children:d,sensors:h=il,collisionDetection:f=wi,measuring:p,modifiers:g,...x}=t;const v=c.useReducer(hl,void 0,fl),[N,w]=v,[m,S]=hi(),[j,M]=c.useState(He.Uninitialized),R=j===He.Initialized,{draggable:{active:E,nodes:T,translate:B},droppable:{containers:U}}=N,H=E!=null?T.get(E):null,$=c.useRef({initial:null,translated:null}),K=c.useMemo(()=>{var ie;return E!=null?{id:E,data:(ie=H?.data)!=null?ie:ll,rect:$}:null},[E,H]),X=c.useRef(null),[Z,C]=c.useState(null),[y,I]=c.useState(null),D=Lt(x,Object.values(x)),A=an("DndDescribedBy",i),P=c.useMemo(()=>U.getEnabled(),[U]),F=ml(p),{droppableRects:b,measureDroppableContainers:k,measuringScheduled:z}=Ki(P,{dragging:R,dependencies:[B.x,B.y],config:F.droppable}),_=Ui(T,E),L=c.useMemo(()=>y?kn(y):null,[y]),O=Io(),G=Yi(_,F.draggable.measure);xl({activeNode:E!=null?T.get(E):null,config:O.layoutShiftCompensation,initialRect:G,measure:F.draggable.measure});const W=Er(_,F.draggable.measure,G),le=Er(_?_.parentElement:null),ee=c.useRef({activatorEvent:null,active:null,activeNode:_,collisionRect:null,collisions:null,droppableRects:b,draggableNodes:T,draggingNode:null,draggingNodeRect:null,droppableContainers:U,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Y=U.getNodeFor((n=ee.current.over)==null?void 0:n.id),Q=al({measure:F.dragOverlay.measure}),ce=(r=Q.nodeRef.current)!=null?r:_,Ce=R?(a=Q.rect)!=null?a:W:null,nt=!!(Q.nodeRef.current&&Q.rect),oe=Zi(nt?null:W),rt=zs(ce?de(ce):null),Re=el(R?Y??_:null),De=sl(Re),Xe=gl(g,{transform:{x:B.x-oe.x,y:B.y-oe.y,scaleX:1,scaleY:1},activatorEvent:y,active:K,activeNodeRect:W,containerNodeRect:le,draggingNodeRect:Ce,over:ee.current.over,overlayNodeRect:Q.rect,scrollableAncestors:Re,scrollableAncestorRects:De,windowRect:rt}),Ft=L?xt(L,B):null,Zn=tl(Re),Eo=jr(Zn),So=jr(Zn,[W]),st=xt(Xe,Eo),ot=Ce?Ni(Ce,Xe):null,Ct=K&&ot?f({active:K,collisionRect:ot,droppableRects:b,droppableContainers:P,pointerCoordinates:Ft}):null,er=vi(Ct,"id"),[Oe,tr]=c.useState(null),jo=nt?Xe:xt(Xe,So),Ro=yi(jo,(o=Oe?.rect)!=null?o:null,W),dn=c.useRef(null),nr=c.useCallback((ie,fe)=>{let{sensor:he,options:$e}=fe;if(X.current==null)return;const me=T.get(X.current);if(!me)return;const pe=ie.nativeEvent,ke=new he({active:X.current,activeNode:me,event:pe,options:$e,context:ee,onAbort(ae){if(!T.get(ae))return;const{onDragAbort:_e}=D.current,Ie={id:ae};_e?.(Ie),m({type:"onDragAbort",event:Ie})},onPending(ae,Fe,_e,Ie){if(!T.get(ae))return;const{onDragPending:Et}=D.current,qe={id:ae,constraint:Fe,initialCoordinates:_e,offset:Ie};Et?.(qe),m({type:"onDragPending",event:qe})},onStart(ae){const Fe=X.current;if(Fe==null)return;const _e=T.get(Fe);if(!_e)return;const{onDragStart:Ie}=D.current,Nt={activatorEvent:pe,active:{id:Fe,data:_e.data,rect:$}};jt.unstable_batchedUpdates(()=>{Ie?.(Nt),M(He.Initializing),w({type:re.DragStart,initialCoordinates:ae,active:Fe}),m({type:"onDragStart",event:Nt}),C(dn.current),I(pe)})},onMove(ae){w({type:re.DragMove,coordinates:ae})},onEnd:at(re.DragEnd),onCancel:at(re.DragCancel)});dn.current=ke;function at(ae){return async function(){const{active:_e,collisions:Ie,over:Nt,scrollAdjustedTranslate:Et}=ee.current;let qe=null;if(_e&&Et){const{cancelDrop:St}=D.current;qe={activatorEvent:pe,active:_e,collisions:Ie,delta:Et,over:Nt},ae===re.DragEnd&&typeof St=="function"&&await Promise.resolve(St(qe))&&(ae=re.DragCancel)}X.current=null,jt.unstable_batchedUpdates(()=>{w({type:ae}),M(He.Uninitialized),tr(null),C(null),I(null),dn.current=null;const St=ae===re.DragEnd?"onDragEnd":"onDragCancel";if(qe){const fn=D.current[St];fn?.(qe),m({type:St,event:qe})}})}}},[T]),Do=c.useCallback((ie,fe)=>(he,$e)=>{const me=he.nativeEvent,pe=T.get($e);if(X.current!==null||!pe||me.dndKit||me.defaultPrevented)return;const ke={active:pe};ie(he,fe.options,ke)===!0&&(me.dndKit={capturedBy:fe.sensor},X.current=$e,nr(he,fe))},[T,nr]),rr=Xi(h,Do);nl(h),Ue(()=>{W&&j===He.Initializing&&M(He.Initialized)},[W,j]),c.useEffect(()=>{const{onDragMove:ie}=D.current,{active:fe,activatorEvent:he,collisions:$e,over:me}=ee.current;if(!fe||!he)return;const pe={active:fe,activatorEvent:he,collisions:$e,delta:{x:st.x,y:st.y},over:me};jt.unstable_batchedUpdates(()=>{ie?.(pe),m({type:"onDragMove",event:pe})})},[st.x,st.y]),c.useEffect(()=>{const{active:ie,activatorEvent:fe,collisions:he,droppableContainers:$e,scrollAdjustedTranslate:me}=ee.current;if(!ie||X.current==null||!fe||!me)return;const{onDragOver:pe}=D.current,ke=$e.get(er),at=ke&&ke.rect.current?{id:ke.id,rect:ke.rect.current,data:ke.data,disabled:ke.disabled}:null,ae={active:ie,activatorEvent:fe,collisions:he,delta:{x:me.x,y:me.y},over:at};jt.unstable_batchedUpdates(()=>{tr(at),pe?.(ae),m({type:"onDragOver",event:ae})})},[er]),Ue(()=>{ee.current={activatorEvent:y,active:K,activeNode:_,collisionRect:ot,collisions:Ct,droppableRects:b,draggableNodes:T,draggingNode:ce,draggingNodeRect:Ce,droppableContainers:U,over:Oe,scrollableAncestors:Re,scrollAdjustedTranslate:st},$.current={initial:Ce,translated:ot}},[K,_,Ct,ot,T,ce,Ce,b,U,Oe,Re,st]),Bi({...O,delta:B,draggingRect:ot,pointerCoordinates:Ft,scrollableAncestors:Re,scrollableAncestorRects:De});const ko=c.useMemo(()=>({active:K,activeNode:_,activeNodeRect:W,activatorEvent:y,collisions:Ct,containerNodeRect:le,dragOverlay:Q,draggableNodes:T,droppableContainers:U,droppableRects:b,over:Oe,measureDroppableContainers:k,scrollableAncestors:Re,scrollableAncestorRects:De,measuringConfiguration:F,measuringScheduled:z,windowRect:rt}),[K,_,W,y,Ct,le,Q,T,U,b,Oe,k,Re,De,F,z,rt]),_o=c.useMemo(()=>({activatorEvent:y,activators:rr,active:K,activeNodeRect:W,ariaDescribedById:{draggable:A},dispatch:w,draggableNodes:T,over:Oe,measureDroppableContainers:k}),[y,rr,K,W,w,A,T,Oe,k]);return we.createElement(ys.Provider,{value:S},we.createElement(cn.Provider,{value:_o},we.createElement(dl.Provider,{value:ko},we.createElement(Ts.Provider,{value:Ro},d)),we.createElement(pl,{disabled:l?.restoreFocus===!1})),we.createElement(mi,{...l,hiddenTextDescribedById:A}));function Io(){const ie=Z?.autoScrollEnabled===!1,fe=typeof u=="object"?u.enabled===!1:u===!1,he=R&&!ie&&!fe;return typeof u=="object"?{...u,enabled:he}:{enabled:he}}}),bl=c.createContext(null),Dr="button",wl="Draggable";function yl(e){let{id:t,data:n,disabled:r=!1,attributes:a}=e;const o=an(wl),{activators:i,activatorEvent:l,active:u,activeNodeRect:d,ariaDescribedById:h,draggableNodes:f,over:p}=c.useContext(cn),{role:g=Dr,roleDescription:x="draggable",tabIndex:v=0}=a??{},N=u?.id===t,w=c.useContext(N?Ts:bl),[m,S]=Ut(),[j,M]=Ut(),R=rl(i,t),E=Lt(n);Ue(()=>(f.set(t,{id:t,key:o,node:m,activatorNode:j,data:E}),()=>{const B=f.get(t);B&&B.key===o&&f.delete(t)}),[f,t]);const T=c.useMemo(()=>({role:g,tabIndex:v,"aria-disabled":r,"aria-pressed":N&&g===Dr?!0:void 0,"aria-roledescription":x,"aria-describedby":h.draggable}),[r,g,v,N,x,h.draggable]);return{active:u,activatorEvent:l,activeNodeRect:d,attributes:T,isDragging:N,listeners:r?void 0:R,node:m,over:p,setNodeRef:S,setActivatorNodeRef:M,transform:w}}const Cl="Droppable",Nl={timeout:25};function El(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:a}=e;const o=an(Cl),{active:i,dispatch:l,over:u,measureDroppableContainers:d}=c.useContext(cn),h=c.useRef({disabled:n}),f=c.useRef(!1),p=c.useRef(null),g=c.useRef(null),{disabled:x,updateMeasurementsFor:v,timeout:N}={...Nl,...a},w=Lt(v??r),m=c.useCallback(()=>{if(!f.current){f.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{d(Array.isArray(w.current)?w.current:[w.current]),g.current=null},N)},[N]),S=ln({callback:m,disabled:x||!i}),j=c.useCallback((T,B)=>{S&&(B&&(S.unobserve(B),f.current=!1),T&&S.observe(T))},[S]),[M,R]=Ut(j),E=Lt(t);return c.useEffect(()=>{!S||!M.current||(S.disconnect(),f.current=!1,S.observe(M.current))},[M,S]),c.useEffect(()=>(l({type:re.RegisterDroppable,element:{id:r,key:o,disabled:n,node:M,rect:p,data:E}}),()=>l({type:re.UnregisterDroppable,key:o,id:r})),[r]),c.useEffect(()=>{n!==h.current.disabled&&(l({type:re.SetDroppableDisabled,id:r,key:o,disabled:n}),h.current.disabled=n)},[r,o,n,l]),{active:i,rect:p,isOver:u?.id===r,node:M,over:u,setNodeRef:R}}const Sl=({label:e,value:t})=>{const{attributes:n,listeners:r,setNodeRef:a,transform:o}=yl({id:t}),i=o?{transform:`translate(${o.x}px, ${o.y}px)`}:void 0;return s.jsx(Zt,{ref:a,style:i,...r,...n,className:"p-2 cursor-grab select-none shadow inline-block w-fit",children:e})},jl=({id:e,children:t})=>{const{isOver:n,setNodeRef:r}=El({id:e});return s.jsx("div",{ref:r,className:V("min-h-[40px] min-w-[100px] w-fit border-b border-dashed px-2 py-1 flex items-center justify-center transition-colors",n?"bg-primary/10":"bg-transparent"),children:t})},Rl=({options:e,questions:t,form:n,isRepeatAnswer:r=!1})=>{const[a,o]=c.useState(null),[i,l]=c.useState([]),[u,d]=c.useState([]),h=c.useMemo(()=>e,[e]),f=c.useMemo(()=>t,[t]);c.useEffect(()=>{if(!h?.length){o("Notogri yoki bosh variantlar kiritilgan.");return}if(!f?.length){o("Notogri yoki bosh savollar kiritilgan.");return}l(h),d(f.map(x=>({...x,answer:x.answer||n.getValues(`answers.${parseInt(x.question_number)-1}.answer`)||void 0}))),o(null)},[]);const p=x=>{const{over:v,active:N}=x;if(!v)return;const w=h.find(j=>String(j.value)===String(N.id));if(!w)return;const m=parseInt(v.id)-1,S=u.find(j=>j.question_number===v.id)?.answer;if(S&&!r){const j=h.find(M=>String(M.value)===String(S));j&&!i.some(M=>String(M.value)===String(j.value))&&l(M=>[...M,j])}n.setValue(`answers.${m}.answer`,w.value),d(j=>j.map(M=>M.question_number===v.id?{...M,answer:w.value}:M)),r||l(j=>j.filter(R=>String(R.value)!==String(w.value)))},g=x=>{const v=parseInt(x)-1,N=u.find(w=>w.question_number===x);if(N?.answer&&(n.setValue(`answers.${v}.answer`,""),d(w=>w.map(m=>m.question_number===x?{...m,answer:void 0}:m)),!r)){const w=h.find(m=>String(m.value)===String(N.answer));w&&!i.some(m=>String(m.value)===String(w.value))&&l(m=>[...m,w])}};return a?s.jsx("div",{className:"p-4 text-red-600",children:a}):s.jsx(vl,{onDragEnd:p,children:s.jsxs("div",{className:"space-y-6 mt-4 mb-6",children:[s.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(x=>s.jsx(Sl,{label:x.label,value:x.value},x.value))}),s.jsx("div",{className:"space-y-4",children:u.map(x=>s.jsxs("div",{className:"flex flex-row items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"font-bold",children:x.question_number}),s.jsx("span",{children:x.question_text||""}),s.jsx(jl,{id:x.question_number,children:x.answer?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:h.find(v=>String(v.value)===String(x.answer))?.label||"?"}),s.jsx("button",{onClick:()=>g(x.question_number),className:"text-destructive hover:text-destructive/70",children:s.jsx(Ar,{size:15})})]}):s.jsx("span",{className:"text-muted-foreground",children:x.question_number})})]},x.question_number))})]})})};var Jn="Radio",[Dl,Ls]=Qt(Jn),[kl,_l]=Dl(Jn),Ms=c.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:a=!1,required:o,disabled:i,value:l="on",onCheck:u,form:d,...h}=e,[f,p]=c.useState(null),g=et(t,N=>p(N)),x=c.useRef(!1),v=f?d||!!f.closest("form"):!0;return s.jsxs(kl,{scope:n,checked:a,disabled:i,children:[s.jsx(tt.button,{type:"button",role:"radio","aria-checked":a,"data-state":Fs(a),"data-disabled":i?"":void 0,disabled:i,value:l,...h,ref:g,onClick:bt(e.onClick,N=>{a||u?.(),v&&(x.current=N.isPropagationStopped(),x.current||N.stopPropagation())})}),v&&s.jsx($s,{control:f,bubbles:!x.current,name:r,value:l,checked:a,required:o,disabled:i,form:d,style:{transform:"translateX(-100%)"}})]})});Ms.displayName=Jn;var Ps="RadioIndicator",Os=c.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...a}=e,o=_l(Ps,n);return s.jsx(Mr,{present:r||o.checked,children:s.jsx(tt.span,{"data-state":Fs(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:t})})});Os.displayName=Ps;var Il="RadioBubbleInput",$s=c.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...a},o)=>{const i=c.useRef(null),l=et(i,o),u=Tr(n),d=Lr(t);return c.useEffect(()=>{const h=i.current;if(!h)return;const f=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(f,"checked").set;if(u!==n&&g){const x=new Event("click",{bubbles:r});g.call(h,n),h.dispatchEvent(x)}},[u,n,r]),s.jsx(tt.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:l,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});$s.displayName=Il;function Fs(e){return e?"checked":"unchecked"}var Al=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],un="RadioGroup",[zl,Hc]=Qt(un,[$r,Ls]),qs=$r(),Hs=Ls(),[Tl,Ll]=zl(un),Gs=c.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:a,value:o,required:i=!1,disabled:l=!1,orientation:u,dir:d,loop:h=!0,onValueChange:f,...p}=e,g=qs(n),x=oa(d),[v,N]=zr({prop:o,defaultProp:a??null,onChange:f,caller:un});return s.jsx(Tl,{scope:n,name:r,required:i,disabled:l,value:v,onValueChange:N,children:s.jsx(ra,{asChild:!0,...g,orientation:u,dir:x,loop:h,children:s.jsx(tt.div,{role:"radiogroup","aria-required":i,"aria-orientation":u,"data-disabled":l?"":void 0,dir:x,...p,ref:t})})})});Gs.displayName=un;var Bs="RadioGroupItem",Vs=c.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...a}=e,o=Ll(Bs,n),i=o.disabled||r,l=qs(n),u=Hs(n),d=c.useRef(null),h=et(t,d),f=o.value===a.value,p=c.useRef(!1);return c.useEffect(()=>{const g=v=>{Al.includes(v.key)&&(p.current=!0)},x=()=>p.current=!1;return document.addEventListener("keydown",g),document.addEventListener("keyup",x),()=>{document.removeEventListener("keydown",g),document.removeEventListener("keyup",x)}},[]),s.jsx(sa,{asChild:!0,...l,focusable:!i,active:f,children:s.jsx(Ms,{disabled:i,required:o.required,checked:f,...u,...a,name:o.name,ref:h,onCheck:()=>o.onValueChange(a.value),onKeyDown:bt(g=>{g.key==="Enter"&&g.preventDefault()}),onFocus:bt(a.onFocus,()=>{p.current&&d.current?.click()})})})});Vs.displayName=Bs;var Ml="RadioGroupIndicator",Ws=c.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,a=Hs(n);return s.jsx(Os,{...a,...r,ref:t})});Ws.displayName=Ml;var Us=Gs,Xs=Vs,Pl=Ws;const Bt=c.forwardRef(({className:e,...t},n)=>s.jsx(Us,{className:V("grid gap-2",e),...t,ref:n}));Bt.displayName=Us.displayName;const zn=c.forwardRef(({className:e,...t},n)=>s.jsx(Xs,{ref:n,className:V("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(Pl,{className:"flex items-center justify-center",children:s.jsx(aa,{className:"h-3 w-3 fill-primary"})})}));zn.displayName=Xs.displayName;const Ol=({control:e,name:t,label:n,helperText:r,required:a,className:o,rules:i,floatingError:l,...u})=>{const d=n&&s.jsxs(We,{className:"my-3",children:[n," ",a&&s.jsx("span",{className:"text-red-600",children:"*"})]});return t&&e?s.jsx(Ne,{control:e,name:t,rules:i,render:({field:h})=>s.jsxs(ye,{children:[d,s.jsx(Ee,{children:s.jsx("input",{autoComplete:"off",type:"text",className:V("placeholder:text-primary text-center h-7","bg-transparent border border-ring rounded-md px-2 py-1","focus:outline-none focus:ring-1 focus:ring-ring","inline-block mx-2 my-2"),...u,...h})}),r&&s.jsx(Me,{children:r}),s.jsx(dt,{className:V(l)})]})}):s.jsxs(s.Fragment,{children:[d,s.jsx(fa,{...u,className:_r(["mt-2",o])}),s.jsx(Me,{children:r})]})},Ye=({control:e,name:t,label:n,rules:r,helperText:a,value:o,...i})=>t&&e?s.jsx(Ne,{control:e,name:t,rules:r,render:({field:l})=>{const u=()=>{l.onChange(o)};return s.jsxs(ye,{className:"flex flex-row items-center space-x-3",children:[s.jsx(Ee,{children:s.jsx(zn,{value:o,checked:l.value===o,onClick:u,onMouseDown:d=>{d.stopPropagation()},...i})}),s.jsxs("div",{className:"space-y-1 leading-none cursor-pointer",onClick:u,children:[n&&s.jsx(We,{className:"cursor-pointer select-text",style:{userSelect:"text",WebkitUserSelect:"text"},children:n}),a&&s.jsx(Me,{children:a})]})]})}}):s.jsxs("div",{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[s.jsx(zn,{value:o,...i}),s.jsxs("div",{className:"space-y-1 leading-none",children:[n&&s.jsx(We,{children:n}),s.jsx(Me,{children:a})]})]}),$l=({control:e,name:t,label:n,rules:r,helperText:a,options:o,dir:i,id:l,className:u,...d})=>t&&e?s.jsx(Ne,{control:e,name:t,rules:r,render:({field:h})=>s.jsxs(ye,{className:`flex flex-col space-y-2 ${u}`,id:l,children:[n&&s.jsx(We,{children:n}),s.jsx(Ee,{children:s.jsxs(Cn,{onValueChange:h.onChange,value:h.value,dir:i,...d,children:[s.jsx(Nn,{children:s.jsx(En,{placeholder:"Select"})}),s.jsx(Sn,{children:o?.map(f=>s.jsx(Je,{value:f.value,children:f.label},f.value))})]})}),a&&s.jsx(Me,{children:a})]})}):s.jsxs("div",{className:`flex flex-col space-y-2 rounded-md border p-4 ${u}`,id:l,children:[s.jsx(We,{children:n}),s.jsxs(Cn,{dir:i,...d,children:[s.jsx(Nn,{children:s.jsx(En,{placeholder:"Select..."})}),s.jsx(Sn,{children:o?.map(h=>s.jsx(Je,{value:h.value,children:h.label},h.value))})]}),s.jsx(Me,{children:a})]}),Fl=({number:e,type:t,form:n,options:r,questions:a})=>{const o=Number(e)-1;return t===ue.SENTENCE_COMPLETION||t===ue.SHORT_ANSWER||t===ue.SUMMARY_COMPLETION||t===ue.DIAGRAM_LABEL?s.jsx(Ol,{id:e,control:n.control,name:`answers.${o}.answer`,type:"text"}):t===ue.TRUE_FALSE_NOT_GIVEN?s.jsx(Ne,{control:n.control,name:`answers.${o}.answer`,render:({field:i})=>s.jsxs(ye,{className:"my-5",children:[s.jsx(Ee,{children:s.jsxs(Bt,{value:i.value||"",onValueChange:i.onChange,className:"gap-4",children:[s.jsx(Ye,{control:n.control,name:`answers.${o}.answer`,value:"TRUE",id:e,label:"TRUE"}),s.jsx(Ye,{control:n.control,name:`answers.${o}.answer`,value:"FALSE",id:e,label:"FALSE"}),s.jsx(Ye,{control:n.control,name:`answers.${o}.answer`,value:"NOT GIVEN",id:e,label:"NOT GIVEN"})]})}),s.jsx(dt,{})]})}):t===ue.YES_NO_NOT_GIVEN?s.jsx(Ne,{control:n.control,name:`answers.${o}.answer`,render:({field:i})=>s.jsxs(ye,{className:"my-5",children:[s.jsx(Ee,{children:s.jsxs(Bt,{value:i.value||"",onValueChange:i.onChange,className:"gap-4",children:[s.jsx(Ye,{control:n.control,name:`answers.${o}.answer`,value:"YES",id:e,label:"YES"}),s.jsx(Ye,{control:n.control,name:`answers.${o}.answer`,value:"NO",id:e,label:"NO"}),s.jsx(Ye,{control:n.control,name:`answers.${o}.answer`,value:"NOT GIVEN",id:e,label:"NOT GIVEN"})]})}),s.jsx(dt,{})]})}):t===ue.MULTIPLE_CHOICE?s.jsx(Ne,{control:n.control,name:`answers.${o}.answer`,render:({field:i})=>s.jsxs(ye,{className:"my-5",children:[s.jsx(Ee,{children:s.jsx(Bt,{value:i.value||"",onValueChange:i.onChange,className:"gap-4",children:r?.map(l=>s.jsx(Ye,{control:n.control,name:`answers.${o}.answer`,value:l.value,id:e,label:`${l.value}) ${l.label}`},l.value))})}),s.jsx(dt,{})]})}):t===ue.MATCHING_INFORMATION?s.jsxs("div",{className:"space-y-8",children:[s.jsxs(ft,{children:[s.jsx(ht,{children:s.jsxs(xe,{children:[s.jsx(Ae,{}),r?.map(i=>s.jsx(Ae,{children:i.value},i.value))]})}),s.jsx(pt,{children:a.map((i,l)=>s.jsxs(xe,{children:[s.jsxs(ve,{children:[i?.question_number,". ",i?.question_text]}),r?.map(u=>s.jsx(ve,{children:s.jsx(Ne,{control:n.control,name:`answers.${l}.answer`,render:({field:d})=>s.jsxs(ye,{className:"flex items-center space-x-2",children:[s.jsx(Ee,{children:s.jsx("input",{type:"radio",onChange:()=>d.onChange(u.value),name:`${i.question_number-1}`,value:u.value,id:`${i.question_number}`,className:`h-4 w-4 rounded-full border border-primary appearance-none 
                                checked:bg-white 
                                relative 
                                checked:after:content-[''] 
                                checked:after:block 
                                checked:after:w-2.5 checked:after:h-2.5 
                                checked:after:rounded-full 
                                checked:after:bg-primary 
                                checked:after:mx-auto checked:after:my-auto 
                                checked:after:absolute checked:after:inset-0
                                disabled:cursor-not-allowed disabled:opacity-50`})}),s.jsx(We,{htmlFor:`${e}-${l}-${u.value}`}),s.jsx(dt,{})]})})},u.value))]},l))})]}),s.jsxs(ft,{children:[s.jsx(ht,{children:s.jsx(xe,{children:s.jsx(Ae,{colSpan:2,children:"First invented or used by"})})}),s.jsx(pt,{children:r?.map((i,l)=>s.jsxs(xe,{children:[s.jsx(ve,{className:"w-[50px]",children:i.value}),s.jsx(ve,{children:i.label})]},l))})]})]}):t===ue.MATCHING_HEADINGS?s.jsx($l,{control:n.control,name:`answers.${o}.answer`,id:e,className:"mx-2 my-2",options:ze.isEmpty(r)?[]:r?.map(i=>({label:i.value,value:i.value}))}):null},Tn=({htmlString:e,form:t,className:n="",enabledHighlight:r=!0,storageKey:a})=>{const o=c.useRef(null),[i,l]=c.useState(null),[u,d]=c.useState(null),[h,f]=c.useState(null),p=c.useRef(0),g=c.useRef(null),x=Or({control:t.control,name:"answers"}),[v,N]=c.useState(e),w=c.useRef(!1),m=()=>Date.now().toString()+Math.random().toString(36).slice(2),S=C=>{if(C instanceof HTMLElement){const y=C.tagName.toLowerCase();if(["input","button","textarea","select"].includes(y))return!0;if(y==="label"||C.closest("label"))return!1;if(C.closest(".FormControl"))return!C.closest("label, .FormLabel, [role='label']");if(C.closest(".FormItem, .FormLabel"))return!1}if(C.nodeType===Node.TEXT_NODE&&C.parentElement){const y=C.parentElement;return y.tagName.toLowerCase()==="label"||y.closest("label, .FormLabel, [role='label']")?!1:y.closest(".FormControl")?!y.closest("label, .FormLabel"):(y.closest(".FormItem"),!1)}return!1},j=(C,y)=>{try{if(C.collapsed||S(C.startContainer)||S(C.endContainer))return;if(C.startContainer.nodeType===Node.TEXT_NODE&&C.startOffset>0){const A=C.startContainer.splitText(C.startOffset);C.setStart(A,0)}C.endContainer.nodeType===Node.TEXT_NODE&&C.endOffset<C.endContainer.textContent.length&&C.endContainer.splitText(C.endOffset);const I=C.extractContents(),D=document.createElement("span");D.className="highlight",D.dataset.highlightId=y,D.appendChild(I),C.insertNode(D),D.parentNode?.normalize(),a&&o.current&&setTimeout(()=>{if(o.current)try{localStorage.setItem(`highlights_${a}`,o.current.innerHTML)}catch(A){console.warn("Failed to save highlights:",A)}},0)}catch(I){console.warn("Error applying highlight:",I)}},M=C=>{if(!o.current)return[];const y=[],I=document.createTreeWalker(o.current,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,{acceptNode(A){return S(A)?NodeFilter.FILTER_REJECT:C.intersectsNode(A)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});let D=I.nextNode();for(;D;)y.push(D),D=I.nextNode();return y},R=()=>{if(!r||!i)return;const C=m(),y=i.cloneRange(),I=M(y);I.length===0?j(y,C):I.forEach(D=>{if(D.nodeType===Node.TEXT_NODE){const A=document.createRange();A.selectNodeContents(D),y.comparePoint(D,0)<0&&A.setStart(y.startContainer,y.startOffset),y.comparePoint(D,D.textContent.length)>0&&A.setEnd(y.endContainer,y.endOffset),A.collapsed||j(A,C)}}),l(null),d(null),f(null)},E=c.useCallback(()=>{r&&(g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{const C=window.getSelection();if(C&&C.rangeCount>0&&o.current?.contains(C.anchorNode)){const y=C.getRangeAt(0),I=C.toString().trim();if(S(y.startContainer)||S(y.endContainer)){l(null),f(null),d(null);return}if(!y.collapsed&&I.length>0){const D=y.getBoundingClientRect(),A=y.commonAncestorContainer instanceof HTMLElement?y.commonAncestorContainer:y.commonAncestorContainer.parentElement;A&&A.classList?.contains("highlight")?(f(A),l(null)):(f(null),l(y));const P=window.innerWidth,F=200,b=50;let k=D.left+window.scrollX+D.width/2;k+F/2>P+window.scrollX?k=P+window.scrollX-F/2-10:k-F/2<window.scrollX&&(k=window.scrollX+F/2+10);let z=D.top+window.scrollY-b-35;z<window.scrollY&&(z=D.bottom+window.scrollY+35),d({x:k,y:z,width:F})}else l(null),f(null),d(null)}else l(null),f(null),d(null)},150))},[r]),T=c.useCallback(C=>{const y=C.target;if(y){const D=y.tagName?.toLowerCase();if(["input","button","textarea","select"].includes(D))return;if(D==="label"||y.closest("label, .FormLabel")){const A=Date.now();if(A-p.current<300)return;p.current=A,E();return}if(y.closest(".FormControl")){if(y.closest("label, .FormLabel")){const A=Date.now();if(A-p.current<300)return;p.current=A,E();return}return}if(y.closest(".FormItem")){const A=Date.now();if(A-p.current<300)return;p.current=A,E();return}}const I=Date.now();I-p.current<300||(p.current=I,E())},[E]),B=c.useCallback(C=>{const y=C.target;if(y){const I=y.tagName?.toLowerCase();if(["input","button","textarea","select"].includes(I))return;if(I==="label"||y.closest("label, .FormLabel")){E();return}if(y.closest(".FormControl")){if(y.closest("label, .FormLabel")){E();return}return}if(y.closest(".FormItem")){E();return}}E()},[E]);c.useEffect(()=>{if(!r)return;document.addEventListener("mouseup",T),document.addEventListener("dblclick",B);const C=y=>{o.current?.contains(y.target)||(f(null),d(null))};return document.body.addEventListener("click",C),()=>{document.removeEventListener("mouseup",T),document.removeEventListener("dblclick",B),document.body.removeEventListener("click",C),g.current&&clearTimeout(g.current)}},[T,B,r]);const U=C=>{C.stopPropagation();const y=C.currentTarget;f(y),l(null);const I=y.getBoundingClientRect(),D=window.innerWidth,A=200,P=50;let F=I.left+window.scrollX+I.width/2;F+A/2>D+window.scrollX?F=D+window.scrollX-A/2-10:F-A/2<window.scrollX&&(F=window.scrollX+A/2+10);let b=I.top+window.scrollY-P-35;b<window.scrollY&&(b=I.bottom+window.scrollY+35),d({x:F,y:b,width:A})},H=()=>{if(r){try{if(h){const C=h,y=C.parentNode;if(y){for(;C.firstChild;)y.insertBefore(C.firstChild,C);y.removeChild(C),y.normalize()}}else if(i&&!h){const C=i.cloneRange();if(!o.current)return;const y=[],I=document.createTreeWalker(o.current,NodeFilter.SHOW_ELEMENT,{acceptNode(A){return A instanceof HTMLElement&&A.classList.contains("highlight")&&C.intersectsNode(A)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});let D=I.nextNode();for(;D;)y.push(D),D=I.nextNode();y.forEach(A=>{const P=A.parentNode;if(P){for(;A.firstChild;)P.insertBefore(A.firstChild,A);P.removeChild(A),P.normalize()}})}a&&o.current&&setTimeout(()=>{if(o.current)try{localStorage.setItem(`highlights_${a}`,o.current.innerHTML)}catch(C){console.warn("Failed to save highlights:",C)}},0)}catch(C){console.warn("Error clearing highlight:",C)}l(null),f(null),d(null)}},$=C=>{const y=window.getSelection();y&&y.rangeCount>0&&y.removeAllRanges()};c.useEffect(()=>{N(e),w.current=!1},[e]),c.useEffect(()=>{if(a&&o.current&&!w.current)try{const C=localStorage.getItem(`highlights_${a}`);C?setTimeout(()=>{if(o.current){const y=document.createElement("div");y.innerHTML=C;const I=y.querySelectorAll(".highlight");I.length>0&&I.forEach(D=>{const A=D.getAttribute("data-highlight-id"),P=D.textContent;if(P&&o.current){const F=document.createTreeWalker(o.current,NodeFilter.SHOW_TEXT,null);let b;for(;b=F.nextNode();){const z=(b.textContent||"").indexOf(P);if(z!==-1&&b.parentElement&&!b.parentElement.classList.contains("highlight"))try{const _=document.createRange();_.setStart(b,z),_.setEnd(b,z+P.length);const L=document.createElement("span");L.className="highlight",L.dataset.highlightId=A||Date.now().toString();const O=_.extractContents();L.appendChild(O),_.insertNode(L);break}catch{}}}})}w.current=!0},150):w.current=!0}catch(C){console.warn("Failed to restore highlights:",C),w.current=!0}},[a,v]);const K=typeof v=="string"&&v.trim().length>0?v:e;let X=-1;const Z=qo(K,{replace:C=>{if(C instanceof At.Element){if(C.name==="img"&&C.attribs){const{src:y,alt:I,style:D,className:A}=C.attribs;let P={};return D&&D.split(";").forEach(F=>{const[b,k]=F.split(":").map(z=>z.trim());if(b&&k){const z=b.replace(/-([a-z])/g,_=>_[1].toUpperCase());P[z]=k}}),s.jsx(Ho,{src:y||"",alt:I||"",style:P,className:A||""},y||Math.random().toString())}if(C.name==="span"&&C.attribs?.class?.includes("highlight"))return c.createElement("span",{...C.attribs,onClick:U,style:{cursor:"pointer"},key:C.attribs["data-highlight-id"]||void 0},At.domToReact(C.children));if(C.name==="question-input"){const{attribs:y}=C,I=y["data-question-number"]??"",D=y["data-question-type"]??"";let A=[],P=[];try{A=JSON.parse(y["data-question-options"]||"[]"),P=JSON.parse(y["data-question"]||"[]")}catch(b){return console.warn("Error parsing question-input attributes:",b),s.jsx("span",{className:"text-destructive",children:"Invalid question input"})}if(!I||!D)return console.warn("Missing question-number or question-type:",y),s.jsx("span",{className:"text-destructive",children:"Invalid question input"});const F=s.jsx(Fl,{number:I,type:D,form:t,options:A,questions:P});return D===ue.TRUE_FALSE_NOT_GIVEN||D===ue.YES_NO_NOT_GIVEN||D===ue.MULTIPLE_CHOICE?s.jsx("div",{id:`question-${I}`,style:{margin:"8px 0",userSelect:"text"},className:"select-text",children:F},I):s.jsx("span",{id:`question-${I}`,style:{display:"inline-block",minWidth:150},children:F},I)}if(C.name==="list-selection-tegs"){const{attribs:y}=C;let I=[],D=[];const A=y.question_type||"";try{I=JSON.parse(y.question_numbers||"[]"),D=JSON.parse(y["data-options"]||"[]")}catch(F){return console.warn("Error parsing list-selection-tegs attributes:",F),s.jsx("span",{className:"text-destructive",children:"Invalid list selection tags"})}if(!I.length||!D.length||A!==ue.LIST_SELECTION)return console.warn("Invalid list-selection-tegs attributes:",y),s.jsx("span",{className:"text-destructive",children:"Invalid list selection tags"});const P=D.map(F=>({value:F.value,label:F.label||F.value,id:`sharedAnswers_${I.join("_")}_${F.value}`}));return s.jsx("div",{className:"my-6",children:s.jsx(ri,{control:t.control,name:`sharedAnswers_${I.join("_")}`,options:P,maxSelections:I.length,orientation:"vertical",className:"w-full",onValueChange:F=>{I.forEach((b,k)=>{const z=parseInt(b)-1;t.setValue(`answers.${z}.answer`,F[k]||"")})}})},I.join("_"))}if(C.name==="drag-drop-tegs"){const{attribs:y}=C,I=!!y.repeat_answer;let D=[],A=[];try{D=JSON.parse(y["data-options"]||"[]"),A=JSON.parse(y["data-questions"]||"[]")}catch(P){return console.warn("Error parsing drag-drop-tegs attributes:",P),s.jsx("span",{className:"text-destructive",children:"Invalid drag-drop tags"})}return s.jsx(Rl,{options:D,questions:A,form:t,isRepeatAnswer:I})}if(C.name==="table-tegs"){const{attribs:y}=C;let I=[],D=[];const A=y.table_name||"";try{I=JSON.parse(y["data-options"]||"[]"),D=JSON.parse(y["data-questions"]||"[]")}catch(P){return console.warn("Error parsing table-tegs attributes:",P),s.jsx("span",{className:"text-destructive",children:"Invalid table tags"})}return s.jsxs("div",{className:"space-y-8 my-8",children:[s.jsxs(ft,{className:"selectable-table",children:[s.jsx(ht,{children:s.jsxs(xe,{children:[s.jsx(Ae,{}),I?.map(P=>s.jsx(Ae,{children:P.value},P.value))]})}),s.jsx(pt,{children:D.map(P=>{const F=parseInt(String(P.question_number),10);if(Number.isNaN(F)||F<=0)return console.warn("Invalid question number in table-tegs:",P.question_number),null;const b=F-1,k=x?.[b]?.answer??"";return s.jsxs(xe,{id:`question-${P.question_number}`,children:[s.jsxs(ve,{className:"question-text-cell",children:[P?.question_number,". ",P?.question_text]}),I?.map(z=>s.jsx(ve,{children:s.jsx(Ne,{control:t.control,name:`answers.${b}.answer`,render:({field:_})=>{const L=O=>{O.stopPropagation(),_.onChange(z.value)};return s.jsx(ye,{className:"flex items-center space-x-2",children:s.jsx(Ee,{children:s.jsx("input",{type:"radio",onClick:L,onChange:O=>{O.target.checked&&_.onChange(z.value)},checked:k===z.value,name:`table_tegs_question_${P.question_number}`,value:z.value,id:`${P.question_number}_${z.value}_table`,className:`h-4 w-4 rounded-full border border-primary appearance-none
                                            checked:bg-white
                                            relative
                                            checked:after:content-['']
                                            checked:after:block
                                            checked:after:w-2.5 checked:after:h-2.5
                                            checked:after:rounded-full
                                            checked:after:bg-primary
                                            checked:after:mx-auto checked:after:my-auto
                                            checked:after:absolute checked:after:inset-0`})})})}})},z.value))]},`table-tegs-${P.question_number}`)})})]}),s.jsxs(ft,{children:[s.jsx(ht,{children:s.jsx(xe,{children:s.jsx(Ae,{colSpan:2,children:A})})}),s.jsx(pt,{children:I?.map(P=>s.jsxs(xe,{children:[s.jsx(ve,{className:"w-[50px]",children:P.value}),s.jsx(ve,{children:P.label})]},P.value))})]})]})}if(C.name==="table-tegs-input"){const{attribs:y}=C;let I=[],D=[];const A=y.table_name||"";try{I=JSON.parse(y["data-options"]||"[]"),D=JSON.parse(y["data-questions"]||"[]")}catch(b){return console.warn("Error parsing table-tegs-input attributes:",b),s.jsx("span",{className:"text-destructive",children:"Invalid table input tags"})}const P=y.repeat_answer!=="False",F=new Map(D.map(b=>{const k=parseInt(String(b.question_number),10);if(Number.isNaN(k)||k<=0)return[String(b.question_number),void 0];const z=k-1;return[String(b.question_number),x?.[z]?.answer??""]}));return s.jsxs("div",{className:"space-y-8 my-8",children:[s.jsxs(ft,{className:"selectable-table",children:[s.jsx(ht,{children:s.jsxs(xe,{children:[s.jsx(Ae,{}),I?.map(b=>s.jsx(Ae,{children:b.value},b.value))]})}),s.jsx(pt,{children:D.map(b=>{const k=parseInt(String(b.question_number),10);if(Number.isNaN(k)||k<=0)return console.warn("Invalid question number in table-tegs-input:",b.question_number),null;const z=k-1,_=String(b.question_number),L=F.get(_)??"";return s.jsxs(xe,{id:`question-${b.question_number}`,children:[s.jsxs(ve,{className:"question-text-cell",children:[b?.question_number,". ",b?.question_text]}),I?.map(O=>{const G=O.value,W=L===G,ee=!P&&Array.from(F.entries()).some(([Y,Q])=>Y!==_&&Q&&String(Q).trim()!==""&&Q===G)&&!W;return s.jsx(ve,{children:s.jsx(Ne,{control:t.control,name:`answers.${z}.answer`,render:({field:Y})=>{const Q=ce=>{ce.stopPropagation(),ee||Y.onChange(G)};return s.jsxs(ye,{className:"flex items-center space-x-2",children:[s.jsx(Ee,{children:s.jsx("input",{type:"radio",onClick:Q,onChange:ce=>{ce.target.checked&&!ee&&Y.onChange(G)},checked:W,name:`table_tegs_input_question_${b.question_number}`,value:G,id:`${b.question_number}_${G}_input`,disabled:ee,className:`h-4 w-4 rounded-full border border-primary appearance-none
                          checked:bg-white
                          relative
                          checked:after:content-['']
                          checked:after:block
                          checked:after:w-2.5 checked:after:h-2.5
                          checked:after:rounded-full
                          checked:after:bg-primary
                          checked:after:mx-auto checked:after:my-auto
                          checked:after:absolute checked:after:inset-0
                          disabled:cursor-not-allowed disabled:opacity-50`})}),s.jsx(We,{})]})}})},O.value)})]},`table-tegs-input-${b.question_number}`)})})]}),I?.length>0&&A&&A!=="List"&&s.jsxs(ft,{className:"selectable-table",children:[s.jsx(ht,{children:s.jsx(xe,{children:s.jsx(Ae,{colSpan:2,children:A||"Options"})})}),s.jsx(pt,{children:I.map(b=>s.jsxs(xe,{children:[s.jsx(ve,{className:"w-[50px]",children:b.value}),s.jsx(ve,{children:b.label})]},b.value))})]})]})}if(C.name==="drag-drop-matching-sentence-endings")return X+=1,s.jsx(Hl,{blockKey:`drag-drop-${X}`,element:C,form:t,onPreventSelection:$},`drag-drop-${X}`)}}});return s.jsxs(s.Fragment,{children:[s.jsx("style",{children:`
        .highlight {
          background-color: #fde68a;
          transition: background-color 0.2s;
        }
        .highlight:hover {
          background-color: #fad980;
        }
        .drag-drop-container {
          min-height: 40px;
        }
        input, button, [draggable] {
          pointer-events: auto;
          user-select: none;
        }
        question-input, list-selection-tegs, drag-drop-tegs, table-tegs, table-tegs-input, drag-drop-matching-sentence-endings, drag-drop-sentence-input {
          user-select: text;
        }
        .selectable-table {
          user-select: text;
        }
        .selectable-table .question-text-cell {
          user-select: text;
          cursor: text;
        }
        .selectable-table td, .selectable-table th {
          user-select: text;
        }
        /* Ensure all text elements are selectable for highlighting */
        p, div, span, h1, h2, h3, h4, h5, h6, li, td, th {
          user-select: text;
          -webkit-user-select: text;
          -moz-user-select: text;
          -ms-user-select: text;
        }
        /* Ensure labels and option text are selectable */
        label, .FormLabel, [role="label"] {
          user-select: text !important;
          -webkit-user-select: text !important;
          -moz-user-select: text !important;
          -ms-user-select: text !important;
          cursor: text;
        }
        /* Ensure FormItem allows text selection (contains option labels) */
        .FormItem {
          user-select: text;
          -webkit-user-select: text;
        }
        /* But keep inputs non-selectable */
        .FormItem input[type="radio"],
        .FormItem input[type="checkbox"],
        .FormControl input {
          user-select: none !important;
          -webkit-user-select: none !important;
        }
        /* Ensure question containers are highlightable */
        [id^="question-"] {
          user-select: text !important;
          -webkit-user-select: text !important;
        }
      `}),s.jsx("div",{ref:o,className:`w-full text-sm text-[--foreground] ${n}
          [&_table]:w-full [&_table]:border-collapse
          [&_td]:border [&_td]:border-[--border] [&_td]:p-2
          [&_th]:border [&_th]:border-[--border] [&_th]:p-2
          [&_p]:mb-2 [&_p]:text-[--foreground]
          [&_h3]:text-lg [&_h3]:font-semibold [&_h3]:mb-2 [&_h3]:text-[--foreground]
          [&_strong]:font-bold [&_em]:italic select-text`,style:{userSelect:"text"},children:Z}),r&&u&&(i||h)&&s.jsxs("div",{className:"absolute z-50 flex gap-2 rounded-lg border bg-muted p-2 shadow-lg -translate-x-1/2",style:{left:u.x,top:u.y},children:[!h&&s.jsxs(Le,{size:"sm",onClick:R,children:[s.jsx(Go,{className:"mr-1 h-4 w-4"})," Highlight"]}),s.jsxs(Le,{size:"sm",variant:"destructive",onClick:H,disabled:!h&&!i,children:[s.jsx(Bo,{className:"mr-1 h-4 w-4"})," Clear"]})]})]})},ql=e=>{const t=[],n=r=>{r?.forEach(a=>{if(a instanceof At.Element){if(a.name==="drag-drop-sentence-input"){const o=a.attribs["data-question-number"];o&&t.push(o)}a.children&&a.children.length&&n(a.children)}})};return n(e||[]),t},Hl=({element:e,form:t,blockKey:n,onPreventSelection:r})=>{const a=c.useMemo(()=>{try{return JSON.parse(e.attribs["data-options"]||"[]")}catch(m){return console.error("Invalid data-options JSON:",m),[]}},[e]);if(!a.length)return s.jsx("span",{className:"text-destructive block my-4",children:"No drag drop options"});const o=e.attribs["data-repeat"]==="True",i=c.useMemo(()=>ql(e.children),[e.children]),[l,u]=c.useState({});c.useEffect(()=>{const m=t.getValues("answers")||[],S={};i.forEach(j=>{const M=parseInt(j,10)-1,R=m?.[M]?.answer;R&&(S[j]=R)}),u(j=>{const M=JSON.stringify(j),R=JSON.stringify(S);return M===R?j:S})},[t,i]);const d=c.useMemo(()=>o?new Set:new Set(Object.values(l).filter(m=>m?String(m).trim().length>0:!1)),[l,o]),h=c.useCallback((m,S)=>{u(M=>{const R={...M};return o||Object.entries(R).forEach(([E,T])=>{if(E!==m&&T===S){R[E]="";const B=parseInt(E,10)-1;t.setValue(`answers.${B}.answer`,"")}}),R[m]=S,R});const j=parseInt(m,10)-1;t.setValue(`answers.${j}.answer`,S)},[t,o]),f=c.useCallback(m=>{u(j=>{if(!j[m])return j;const M={...j};return M[m]="",M});const S=parseInt(m,10)-1;t.setValue(`answers.${S}.answer`,"")},[t]),p=c.useCallback((m,S)=>{m.dataTransfer.setData("text/plain",S),m.currentTarget.style.opacity="0.5",r?.(m)},[r]),g=c.useCallback(m=>{m.currentTarget.style.opacity="1"},[]),x=c.useCallback((m,S)=>{m.preventDefault();const j=m.dataTransfer.getData("text/plain");j&&(h(S,j),m.currentTarget.style.backgroundColor="")},[h]),v=c.useCallback(m=>{m.preventDefault(),m.currentTarget.style.backgroundColor="#e0f7fa"},[]),N=c.useCallback(m=>{m.currentTarget.style.backgroundColor=""},[]),w=c.useMemo(()=>At.domToReact(e.children,{replace:m=>{if(m instanceof At.Element&&m.name==="drag-drop-sentence-input"){const S=m.attribs,j=S["data-question-number"]??"",M=S["data-question-type"]??"";if(!j||M!=="matching_sentence_endings"&&M!=="matching_headings")return s.jsx("span",{className:"text-destructive",children:"Invalid drag-drop input"},`${n}-invalid`);const R=l[j],E=a.find(T=>T.value===R)?.label||R;return s.jsx("span",{onDrop:T=>x(T,j),onDragOver:v,onDragLeave:N,className:"inline-block min-w-[150px] border-2 border-gray-400 border-dashed p-1 my-1 mx-2 rounded-md text-center align-middle","data-question-number":j,children:R?s.jsxs("span",{className:"inline-flex items-center justify-between gap-2 w-full",children:[s.jsx("span",{className:"font-semibold",children:E}),s.jsx("button",{type:"button",onClick:()=>f(j),onMouseDown:r,className:"text-destructive hover:text-destructive/70",children:s.jsx(Ar,{size:16})})]}):s.jsx("span",{className:"text-muted-foreground",children:j})},`${n}-${j}`)}return m}}),[e.children,l,x,N,v,f,r,n,a]);return s.jsxs("span",{className:"block my-6",children:[w,s.jsx("span",{className:"block mt-6",children:s.jsx("div",{className:"flex flex-wrap gap-3",children:a.map(m=>{const S=!o&&d.has(m.value);return s.jsx("div",{draggable:!0,onDragStart:j=>p(j,m.value),onDragEnd:g,className:`p-2 rounded-lg min-w-[150px] text-center cursor-move transition-colors ${S?"bg-muted text-muted-foreground opacity-70":"bg-primary text-primary-foreground hover:bg-muted-foreground"}`,children:m.label},`${n}-${m.value}`)})})})]})},Qn=zo()(To(e=>({contrast:"black-on-white",textSize:"regular",setContrast:t=>e({contrast:t}),setTextSize:t=>e({textSize:t})}),{name:"test-display-storage",storage:Lo(()=>localStorage)})),Gl=e=>{switch(e){case"black-on-white":return"bg-white [&_p]:text-black [&_div]:text-black [&_span]:text-black [&_h1]:text-black [&_h2]:text-black [&_h3]:text-black [&_h4]:text-black [&_h5]:text-black [&_h6]:text-black [&_li]:text-black [&_td]:text-black [&_th]:text-black [&_label]:text-black";case"white-on-black":return"bg-black [&_p]:text-white [&_div]:text-white [&_span]:text-white [&_h1]:text-white [&_h2]:text-white [&_h3]:text-white [&_h4]:text-white [&_h5]:text-white [&_h6]:text-white [&_li]:text-white [&_td]:text-white [&_th]:text-white [&_label]:text-white";case"yellow-on-black":return"bg-black [&_p]:text-yellow-300 [&_div]:text-yellow-300 [&_span]:text-yellow-300 [&_h1]:text-yellow-300 [&_h2]:text-yellow-300 [&_h3]:text-yellow-300 [&_h4]:text-yellow-300 [&_h5]:text-yellow-300 [&_h6]:text-yellow-300 [&_li]:text-yellow-300 [&_td]:text-yellow-300 [&_th]:text-yellow-300 [&_label]:text-yellow-300";default:return"bg-white [&_p]:text-black [&_div]:text-black [&_span]:text-black [&_h1]:text-black [&_h2]:text-black [&_h3]:text-black [&_h4]:text-black [&_h5]:text-black [&_h6]:text-black [&_li]:text-black [&_td]:text-black [&_th]:text-black [&_label]:text-black"}},Bl=e=>{switch(e){case"regular":return"text-sm [&_p]:text-sm [&_div]:text-sm [&_span]:text-sm";case"large":return"text-base [&_p]:text-base [&_div]:text-base [&_span]:text-base";case"extra-large":return"text-lg [&_p]:text-lg [&_div]:text-lg [&_span]:text-lg";default:return"text-sm [&_p]:text-sm [&_div]:text-sm [&_span]:text-sm"}},Ks=(e,t)=>V(Gl(e),Bl(t)),Vl=({part:e,form:t,testId:n})=>{const{user:r}=Jt(),{contrast:a,textSize:o}=Qn(),i=r?.id||"guest",l=n&&e.id?`listening-${i}-${n}-${e.id}-script`:void 0,u=n&&e.id?`listening-${i}-${n}-${e.id}-questions`:void 0,d=Ks(a,o);return s.jsx("div",{className:V("h-[calc(100vh-232px)]",d),children:e.is_script?s.jsx(Hn,{leftContent:s.jsx(Mn,{className:V("h-full overflow-y-auto p-6",d),htmlString:e.audioscript,storageKey:l}),rightContent:s.jsx("div",{className:V("h-full overflow-y-auto overflow-x-hidden p-6 space-y-8",d),children:e.questions?s.jsx(s.Fragment,{children:s.jsx(Tn,{htmlString:e.questions,form:t,storageKey:u,className:d})}):s.jsx("div",{children:"No questions available"})})}):s.jsx(cs,{direction:"horizontal",className:V("w-full border rounded-none"),children:s.jsx(Rn,{defaultSize:100,children:s.jsx("div",{className:V("h-full overflow-y-auto overflow-x-hidden p-6 space-y-8",d),children:e.questions?s.jsx(Tn,{htmlString:e.questions,form:t,storageKey:u,className:d}):s.jsx("div",{children:"No questions available"})})})})})},Wl=({part:e,form:t,testId:n})=>{const{user:r}=Jt(),{contrast:a,textSize:o}=Qn(),i=r?.id||"guest",l=n&&e.id?`reading-${i}-${n}-${e.id}-content`:void 0,u=n&&e.id?`reading-${i}-${n}-${e.id}-questions`:void 0,d=Ks(a,o);return s.jsx("div",{className:V("h-[calc(100vh-232px)]",d),children:s.jsx(Hn,{leftContent:s.jsx(Mn,{className:V("h-full overflow-y-auto p-6",d),htmlString:e.content||"<p>Sample content for testing</p>",enabledHighlight:!0,storageKey:l}),rightContent:s.jsx("div",{className:V("h-full overflow-y-auto overflow-x-hidden p-6 space-y-8",d),children:e.questions?s.jsx(Tn,{htmlString:e.questions,form:t,storageKey:u,className:d}):s.jsx("div",{children:"No questions available"})})})})},Ln=c.forwardRef(({className:e,...t},n)=>s.jsx("textarea",{className:V("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...t}));Ln.displayName="Textarea";const Ul=({control:e,name:t,label:n,helperText:r,required:a,className:o,rules:i,floatingError:l,...u})=>{const d=n&&s.jsxs(We,{className:"my-3",children:[n," ",a&&s.jsx("span",{className:"text-[--destructive]",children:"*"})]});return t&&e?s.jsx(Ne,{control:e,name:t,rules:i,render:({field:h})=>s.jsxs(ye,{children:[d,s.jsx(Ee,{children:s.jsx(Ln,{autoComplete:"off",placeholder:"...",className:V(o),...u,...h})}),r&&s.jsx(Me,{children:r}),s.jsx(dt,{className:V(l)})]})}):s.jsxs(s.Fragment,{children:[d,s.jsx(Ln,{...u,className:_r([o])}),r&&s.jsx(Me,{children:r})]})},Xl=({part:e,form:t,index:n,testId:r})=>{const a=t.watch(`answers.${n}.answer`)||"",o=a.trim().split(/\s+/).filter(d=>d.length>0).length,[i,l]=c.useState("16px"),u=r&&e.id?`writing-${r}-${e.id}-question`:void 0;return s.jsx("div",{className:"h-[calc(100vh-232px)] bg-muted",children:s.jsx(Hn,{leftContent:s.jsx(Mn,{className:"h-full overflow-y-auto p-6 text-sm",htmlString:e.writing_questions[0].question,enabledHighlight:!0,storageKey:u}),rightContent:s.jsxs("div",{className:"h-full overflow-y-auto p-6 space-y-4 text-sm",children:[s.jsx(Ul,{floatingError:!0,id:"1",control:t.control,name:`answers.${n}.answer`,className:"min-h-[calc(100vh-335px)]",style:{fontSize:i}}),s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Word count: ",a.trim()?o:0]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pr,{htmlFor:"font-size-trigger",className:"text-xs text-muted-foreground",children:"Font size:"}),s.jsxs(Cn,{onValueChange:d=>l(d),defaultValue:"16px",children:[s.jsx(Nn,{id:"font-size-trigger",className:"w-[75px]",children:s.jsx(En,{placeholder:"Select font size"})}),s.jsxs(Sn,{children:[s.jsx(Je,{value:"12px",children:"12px"}),s.jsx(Je,{value:"14px",children:"14px"}),s.jsx(Je,{value:"16px",children:"16px"}),s.jsx(Je,{value:"18px",children:"18px"}),s.jsx(Je,{value:"20px",children:"20px"})]})]})]})]})]})})})},Kl=e=>"questions"in e,Yl=e=>"questions"in e&&"question_numbers"in e&&Array.isArray(e.question_numbers),Gc=({data:e,activeTab:t,testType:n,form:r,testId:a})=>{const o=(i,l)=>{switch(n){case ne.READING:return Kl(i)?s.jsx(s.Fragment,{children:s.jsx(Wl,{part:i,form:r,testId:a})}):s.jsx(sr,{title:"Error",message:"Invalid reading data"});case ne.LISTENING:return Yl(i)?s.jsx(Vl,{part:i,form:r,testId:a}):s.jsx(sr,{title:"Error",message:"Invalid listening data"});case ne.WRITING:return s.jsx(Xl,{part:i,index:l,form:r,testId:a});default:return s.jsx("div",{children:"Unsupported test type"})}};return s.jsx("div",{children:e.map((i,l)=>s.jsx(Po,{value:`tab-${i.id}`,className:V("h-full bg-muted",t!==`tab-${i.id}`&&"hidden"),children:o(i,l)},i.id))})},Bc=({activePart:e,testType:t})=>{if(!e)return null;const n=()=>{switch(t){case ne.READING:return ze.get(e,"passage_number","");case ne.LISTENING:return ze.get(e,"listening_section","");case ne.WRITING:return ze.get(e,"writing_task","");default:return"Follow the instructions for this part."}};return s.jsx(Zt,{className:"w-full shadow-sm rounded-none",children:s.jsxs(Pn,{className:"p-3 text-sm h-[70px]",children:[s.jsxs("div",{className:"font-semibold",children:["Part ",n()]}),s.jsx("div",{children:e.description})]})})},Vc=({timeLeft:e,formatTime:t,testType:n=ne.READING,audioRef:r,handleVolumeChange:a,handlePauseToggle:o,isPaused:i=!1,studentHasStarted:l=!1,userHasStarted:u=!1,type:d})=>{const h=kr(),f=()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},p=()=>{g?.role===ct.TEACHER?h(d==="Thematic"?"/teacher/tests/thematic":"/teacher/tests/mock"):h(d==="Thematic"?"/student/tests/thematic":"/student/tests/mock"),f()},{user:g}=Jt(),{contrast:x,textSize:v,setContrast:N,setTextSize:w}=Qn(),[m,S]=c.useState(.5),[j,M]=c.useState(0),[R,E]=c.useState(0),T=r?.current;c.useEffect(()=>{if(n!==ne.LISTENING||!T){M(0),E(0);return}const $=()=>{M(T.currentTime||0)},K=()=>{const X=Number.isFinite(T.duration)?T.duration:0;E(X)};return $(),K(),T.addEventListener("timeupdate",$),T.addEventListener("loadedmetadata",K),T.addEventListener("durationchange",K),T.addEventListener("ended",$),()=>{T.removeEventListener("timeupdate",$),T.removeEventListener("loadedmetadata",K),T.removeEventListener("durationchange",K),T.removeEventListener("ended",$)}},[n,T]);const B=$=>{const K=Math.floor($/60),X=Math.floor($%60);return`${K.toString().padStart(2,"0")}:${X.toString().padStart(2,"0")}`},U=R>0?Math.max(R-j,0):j,H=$=>{const K=$[0];S(K),a&&a(K)};return s.jsx(Zt,{className:"w-full shadow-md rounded-none",children:s.jsxs(Pn,{className:"p-3 grid grid-cols-3 items-center h-[50px]",children:[s.jsxs("div",{className:"text-sm flex items-center gap-2",children:[s.jsx(Vo,{}),s.jsx("b",{children:"Candidate:"})," ",g?.full_name||g?.username]}),s.jsx("div",{className:"text-sm font-semibold font-mono flex items-center gap-2 justify-center",children:n===ne.LISTENING&&r?s.jsxs(s.Fragment,{children:[s.jsx(or,{className:"w-5 h-5"}),B(U)]}):s.jsx("span",{className:"text-muted-foreground",children:"-"})}),s.jsxs("div",{className:"flex items-center gap-8 justify-end",children:[s.jsxs("div",{className:"text-sm font-semibold font-mono flex items-center gap-2 whitespace-nowrap",children:[s.jsx(or,{className:"w-5 h-5"}),s.jsx("span",{className:"whitespace-nowrap",children:"Time Left:"}),s.jsx("span",{className:V("text-red-400",e<600&&"text-red-700"),children:t(e)})]}),n===ne.LISTENING&&r&&a&&s.jsxs("div",{className:"flex items-center gap-4",children:[d==="Thematic"&&o&&s.jsx(Le,{onClick:o,variant:"outline",size:"sm",type:"button",className:"flex items-center gap-1 h-8 w-8 p-0",disabled:g?.role===ct.STUDENT&&l&&!i,title:g?.role===ct.STUDENT&&l&&!i?"Students cannot pause after starting audio":u?i?"Resume audio":"Pause audio":"Start audio",children:!u||i?s.jsx(Wo,{className:"w-4 h-4"}):s.jsx(Uo,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex items-center gap-2",children:[m===0?s.jsx(Xo,{className:"w-5 h-5"}):s.jsx(Ko,{className:"w-5 h-5"}),s.jsx(ha,{id:"volume",min:0,max:1,step:.01,defaultValue:[.5],onValueChange:H,className:"w-24"})]})]}),(n===ne.LISTENING||n===ne.READING)&&s.jsxs(ia,{children:[s.jsx(la,{asChild:!0,children:s.jsxs(Le,{variant:"outline",size:"sm",type:"button",className:"flex items-center gap-2 h-7",children:[s.jsx(Yo,{className:"w-4 h-4"}),"Options"]})}),s.jsxs(ca,{align:"end",className:"w-56",children:[s.jsx(ua,{children:"Options"}),s.jsx(da,{}),s.jsxs(ar,{children:[s.jsx(ir,{children:s.jsx("span",{children:"Contrast"})}),s.jsx(lr,{children:s.jsxs(cr,{value:x,onValueChange:$=>N($),children:[s.jsx(it,{value:"black-on-white",children:"Black on white"}),s.jsx(it,{value:"white-on-black",children:"White on Black"}),s.jsx(it,{value:"yellow-on-black",children:"Yellow on black"})]})})]}),s.jsxs(ar,{children:[s.jsx(ir,{children:s.jsx("span",{children:"Text size"})}),s.jsx(lr,{children:s.jsxs(cr,{value:v,onValueChange:$=>w($),children:[s.jsx(it,{value:"regular",children:"Regular"}),s.jsx(it,{value:"large",children:"Large"}),s.jsx(it,{value:"extra-large",children:"Extra large"})]})})]})]})]}),(g?.role===ct.TEACHER||g?.role===ct.STUDENT&&d==="Thematic")&&s.jsxs(Le,{onClick:p,variant:"default",type:"button",className:"flex items-center gap-2 h-7 w-24",children:[s.jsx(Jo,{className:"w-4 h-4"}),"Back"]})]})]})})};var Ys="AlertDialog",[Jl,Wc]=Qt(Ys,[Fr]),Pe=Fr(),Js=e=>{const{__scopeAlertDialog:t,...n}=e,r=Pe(t);return s.jsx(pa,{...r,...n,modal:!0})};Js.displayName=Ys;var Ql="AlertDialogTrigger",Qs=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Pe(n);return s.jsx(ga,{...a,...r,ref:t})});Qs.displayName=Ql;var Zl="AlertDialogPortal",Zs=e=>{const{__scopeAlertDialog:t,...n}=e,r=Pe(t);return s.jsx(ma,{...r,...n})};Zs.displayName=Zl;var ec="AlertDialogOverlay",eo=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Pe(n);return s.jsx(ya,{...a,...r,ref:t})});eo.displayName=ec;var vt="AlertDialogContent",[tc,nc]=Jl(vt),rc=ea("AlertDialogContent"),to=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...a}=e,o=Pe(n),i=c.useRef(null),l=et(t,i),u=c.useRef(null);return s.jsx(xa,{contentName:vt,titleName:no,docsSlug:"alert-dialog",children:s.jsx(tc,{scope:n,cancelRef:u,children:s.jsxs(va,{role:"alertdialog",...o,...a,ref:l,onOpenAutoFocus:bt(a.onOpenAutoFocus,d=>{d.preventDefault(),u.current?.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[s.jsx(rc,{children:r}),s.jsx(oc,{contentRef:i})]})})})});to.displayName=vt;var no="AlertDialogTitle",ro=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Pe(n);return s.jsx(ba,{...a,...r,ref:t})});ro.displayName=no;var so="AlertDialogDescription",oo=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Pe(n);return s.jsx(wa,{...a,...r,ref:t})});oo.displayName=so;var sc="AlertDialogAction",ao=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Pe(n);return s.jsx(qr,{...a,...r,ref:t})});ao.displayName=sc;var io="AlertDialogCancel",lo=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:a}=nc(io,n),o=Pe(n),i=et(t,a);return s.jsx(qr,{...o,...r,ref:i})});lo.displayName=io;var oc=({contentRef:e})=>{const t=`\`${vt}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${vt}\` by passing a \`${so}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${vt}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return c.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},ac=Js,ic=Qs,lc=Zs,co=eo,uo=to,fo=ao,ho=lo,po=ro,go=oo;const cc=ac,uc=ic,dc=lc,mo=c.forwardRef(({className:e,...t},n)=>s.jsx(co,{className:V("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));mo.displayName=co.displayName;const xo=c.forwardRef(({className:e,...t},n)=>s.jsxs(dc,{children:[s.jsx(mo,{}),s.jsx(uo,{ref:n,className:V("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));xo.displayName=uo.displayName;const vo=({className:e,...t})=>s.jsx("div",{className:V("flex flex-col space-y-2 text-center sm:text-left",e),...t});vo.displayName="AlertDialogHeader";const bo=({className:e,...t})=>s.jsx("div",{className:V("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});bo.displayName="AlertDialogFooter";const wo=c.forwardRef(({className:e,...t},n)=>s.jsx(po,{ref:n,className:V("text-lg font-semibold",e),...t}));wo.displayName=po.displayName;const yo=c.forwardRef(({className:e,...t},n)=>s.jsx(go,{ref:n,className:V("text-sm text-muted-foreground",e),...t}));yo.displayName=go.displayName;const Co=c.forwardRef(({className:e,...t},n)=>s.jsx(fo,{ref:n,className:V(Ir(),e),...t}));Co.displayName=fo.displayName;const No=c.forwardRef(({className:e,...t},n)=>s.jsx(ho,{ref:n,className:V(Ir({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));No.displayName=ho.displayName;const fc=({trigger:e,title:t,description:n,onConfirm:r,confirmText:a="Confirm",cancelText:o="Cancel",isLoading:i})=>s.jsxs(cc,{children:[s.jsx(uc,{asChild:!0,children:e}),s.jsxs(xo,{children:[s.jsxs(vo,{children:[s.jsx(wo,{children:t}),s.jsx(yo,{children:n})]}),s.jsxs(bo,{children:[s.jsx(No,{disabled:i,children:o}),s.jsx(Co,{asChild:!0,children:s.jsx(Le,{onClick:r,disabled:i,loading:i,children:a})})]})]})]}),Uc=({data:e,form:t,activeTab:n,testType:r,setActiveTab:a,currentTabIndex:o,handlePrevious:i,handleNext:l,onSubmit:u,isTestFinished:d,isLoading:h,disableSubmit:f=!1,disableSubmitReason:p})=>{const g=v=>{switch(r){case ne.READING:return ze.get(v,"passage_number","");case ne.LISTENING:return ze.get(v,"listening_section","");case ne.WRITING:return ze.get(v,"writing_task","");default:return""}},x=(v,N)=>{a(`tab-${N}`),setTimeout(()=>{const w=document.getElementById(`question-${v}`);w&&w.scrollIntoView({behavior:"smooth",block:"center"})},100)};return s.jsx(Zt,{className:"w-full shadow-md p-2 sticky bottom-0 z-50 rounded-none",children:s.jsxs(Pn,{className:"p-0 flex items-center justify-between gap-2 h-[80px]",children:[s.jsx(Oo,{className:V(r===ne.WRITING?"!flex !flex-row w-full gap-2 min-h-min":"grid grid-cols-2 gap-2 min-h-min"),children:e.map(v=>{const N=ze.get(v,"question_numbers",[]);return s.jsxs("div",{className:V(r===ne.WRITING?"flex gap-1":"flex gap-2"),children:[s.jsxs($o,{value:`tab-${v.id}`,className:V(r===ne.WRITING?"flex items-center gap-1 px-2 py-1 text-sm":"flex items-center gap-2"),children:["Part ",g(v)]}),!ze.isEmpty(N)&&s.jsx("div",{className:"flex flex-wrap gap-1",children:N?.sort((w,m)=>w.question_number-m.question_number).map(w=>{const m=t.watch(`answers.${w?.question_number-1}.answer`),S=!!m&&m.trim()!=="";return s.jsx(Pr,{onClick:j=>{j.preventDefault(),j.stopPropagation(),x(w?.question_number,v.id)},className:V("cursor-pointer rounded text-sm flex items-center justify-center",r===ne.WRITING?"h-6 w-6":"h-7 w-7",S?"bg-primary text-background hover:bg-primary/90":"border border-primary text-primary hover:bg-primary/10"),children:w?.question_number},w.id)})})]},v.id)})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Le,{type:"button",onClick:i,disabled:o===0||d,variant:"outline",size:"sm",className:"p-0 w-8 h-8",children:s.jsx(Qo,{className:"w-4 h-4"})}),s.jsx(Le,{type:"button",onClick:l,disabled:o===e.length-1||d,variant:"outline",size:"sm",className:"p-0 w-8 h-8",children:s.jsx(Zo,{className:"w-4 h-4"})}),s.jsx(fc,{trigger:s.jsx(Le,{type:"button",disabled:d||f,className:"w-full md:w-auto",children:"Submit"}),title:"Submit Test ?",description:"Are you sure you want to submit the test? This action cannot be undone.",onConfirm:u,confirmText:"Yes, Submit",cancelText:"No, Cancel",isLoading:h}),f&&p&&s.jsx("p",{className:"text-xs text-muted-foreground max-w-[200px]",children:p})]})]})})},Xc=e=>{const{user:t}=Jt(),n=Mo(),r=kr(),a=t?.role===ct.STUDENT,o=c.useCallback(()=>{const u=document.documentElement;u.requestFullscreen&&u.requestFullscreen().catch(d=>{console.error("Fullscreen rejimini yoqishda xato:",d)})},[]),i=c.useCallback(()=>{document.exitFullscreen&&document.fullscreenElement&&document.exitFullscreen().catch(u=>{console.error("Fullscreen rejimidan chiqishda xato:",u)})},[]),l=c.useCallback(()=>{a&&e&&(window.confirm("Test hali tugamadi! Chiqishni xohlaysizmi?")?i():r(n.pathname,{replace:!0}))},[a,e,n.pathname,r,i]);c.useEffect(()=>{if(!a)return;if(!e){i();return}o();const u=f=>{e&&(f.preventDefault(),f.returnValue="Test hali tugamadi! Chiqishni tasdiqlasangiz, natijalar saqlanmaydi!")},d=f=>{e&&(f.ctrlKey&&f.key==="r"||f.key==="F5")&&(f.preventDefault(),alert("Test tugamaguncha sahifani yangilash taqiqlangan!")),e&&f.key==="F11"&&(f.preventDefault(),alert("Test tugamaguncha fullscreen rejimidan chiqish taqiqlangan!"))},h=()=>{e&&!document.fullscreenElement&&(o(),alert("Test tugamaguncha fullscreen rejimida qolishingiz kerak!"))};return window.addEventListener("beforeunload",u),window.addEventListener("keydown",d),window.addEventListener("popstate",l),document.addEventListener("fullscreenchange",h),()=>{window.removeEventListener("beforeunload",u),window.removeEventListener("keydown",d),window.removeEventListener("popstate",l),document.removeEventListener("fullscreenchange",h)}},[a,e,l,o,i])};export{Gc as C,Bc as P,Vc as T,ne as a,Uc as b,Xc as u};
