import{r as c,g as Yo,j as a,h as ye,i as jt,a as Zt,u as zr,R as lt,b as Jo}from"./index-Bk_KIJQw.js";import{c as Qo,a as Zo,b as ea}from"./tabs-wAfRN8WS.js";import{c as X,t as Pr}from"./utils-CPYLdFy8.js";import{E as fr}from"./ErrorMessage-D8Avkacj.js";import{c as ta}from"./createLucideIcon-bqnMj12g.js";import{p as na,l as zt,I as ra,H as Hn}from"./useTestLogic-BH9iFgYA.js";import{B as Ue,b as Tr}from"./button-Bg86iIAO.js";import{P as Mr,M as sa,i as oa,j as aa,m as hr,G as ia,o as la,q as ca,s as ua,Q as da,t as fa,r as ha}from"./index-B3_N89nF.js";import{u as ge,c as pa}from"./index-DpKMrrjJ.js";import{c as Ot}from"./index-BfwTnhO0.js";import{u as qn,c as bt}from"./index-BNi8iqJE.js";import{u as Gn,S as En,a as Nn,b as Rn,c as jn,d as Ze,e as Lr}from"./select-B5LjV8Kn.js";import{u as Bn}from"./index-1uohO9B7.js";import{P as Or}from"./index-DMbLzsrR.js";import{P as Ce}from"./index-Ba0qyXpF.js";import{C as ma}from"./index-DsyHTC3Q.js";import{F as Ne,a as Se,b as Re,c as Le,d as ut,e as Ke,L as $r}from"./form-CfglpSdt.js";import{b as ga,c as Fr}from"./index.esm-CrWNwdts.js";import{C as en,c as Vn}from"./card-BPk6Hfi0.js";import{c as Hr,R as va,I as xa}from"./index-YxiuUYXL.js";import{u as qr,c as ba}from"./index-BO9X9Ck_.js";import{C as wa}from"./circle-CDlWXe7X.js";import{T as dt,a as ft,b as xe,c as Pe,d as ht,e as be}from"./table-DbHzeX2j.js";import{I as ya}from"./input-CUkf-qJu.js";import{l as Te}from"./lodash-BXIecI6Y.js";import{c as Gr,R as Sa,b as Ca,P as Ea,W as Na,C as Ra,T as ja,D as Da,a as Br,O as Ia}from"./index-DGSHpYpQ.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Aa=ta("grip-vertical",ka);var se=(e=>(e.READING="READING",e.LISTENING="LISTENING",e.WRITING="WRITING",e.SPEAKING="SPEAKING",e))(se||{});const tn=c.createContext(null);tn.displayName="PanelGroupContext";const te={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},Un=10,et=c.useLayoutEffect,pr=Yo.useId,_a=typeof pr=="function"?pr:()=>null;let za=0;function Wn(e=null){const t=_a(),n=c.useRef(e||t||null);return n.current===null&&(n.current=""+za++),e??n.current}function Vr({children:e,className:t="",collapsedSize:n,collapsible:r,defaultSize:s,forwardedRef:o,id:i,maxSize:l,minSize:u,onCollapse:f,onExpand:h,onResize:d,order:p,style:m,tagName:v="div",...g}){const w=c.useContext(tn);if(w===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:x,expandPanel:b,getPanelSize:N,getPanelStyle:S,groupId:k,isPanelCollapsed:D,reevaluatePanelConstraints:R,registerPanel:M,resizePanel:H,unregisterPanel:q}=w,$=Wn(i),G=c.useRef({callbacks:{onCollapse:f,onExpand:h,onResize:d},constraints:{collapsedSize:n,collapsible:r,defaultSize:s,maxSize:l,minSize:u},id:$,idIsFromProps:i!==void 0,order:p});c.useRef({didLogMissingDefaultSizeWarning:!1}),et(()=>{const{callbacks:W,constraints:Y}=G.current,E={...Y};G.current.id=$,G.current.idIsFromProps=i!==void 0,G.current.order=p,W.onCollapse=f,W.onExpand=h,W.onResize=d,Y.collapsedSize=n,Y.collapsible=r,Y.defaultSize=s,Y.maxSize=l,Y.minSize=u,(E.collapsedSize!==Y.collapsedSize||E.collapsible!==Y.collapsible||E.maxSize!==Y.maxSize||E.minSize!==Y.minSize)&&R(G.current,E)}),et(()=>{const W=G.current;return M(W),()=>{q(W)}},[p,$,M,q]),c.useImperativeHandle(o,()=>({collapse:()=>{x(G.current)},expand:W=>{b(G.current,W)},getId(){return $},getSize(){return N(G.current)},isCollapsed(){return D(G.current)},isExpanded(){return!D(G.current)},resize:W=>{H(G.current,W)}}),[x,b,N,D,$,H]);const Z=S(G.current,s);return c.createElement(v,{...g,children:e,className:t,id:$,style:{...Z,...m},[te.groupId]:k,[te.panel]:"",[te.panelCollapsible]:r||void 0,[te.panelId]:$,[te.panelSize]:parseFloat(""+Z.flexGrow).toFixed(1)})}const Ur=c.forwardRef((e,t)=>c.createElement(Vr,{...e,forwardedRef:t}));Vr.displayName="Panel";Ur.displayName="forwardRef(Panel)";let Dn=null,Bt=-1,Be=null;function Pa(e,t){if(t){const n=(t&Jr)!==0,r=(t&Qr)!==0,s=(t&Zr)!==0,o=(t&es)!==0;if(n)return s?"se-resize":o?"ne-resize":"e-resize";if(r)return s?"sw-resize":o?"nw-resize":"w-resize";if(s)return"s-resize";if(o)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function Ta(){Be!==null&&(document.head.removeChild(Be),Dn=null,Be=null,Bt=-1)}function mn(e,t){var n,r;const s=Pa(e,t);if(Dn!==s){if(Dn=s,Be===null&&(Be=document.createElement("style"),document.head.appendChild(Be)),Bt>=0){var o;(o=Be.sheet)===null||o===void 0||o.removeRule(Bt)}Bt=(n=(r=Be.sheet)===null||r===void 0?void 0:r.insertRule(`*{cursor: ${s} !important;}`))!==null&&n!==void 0?n:-1}}function Wr(e){return e.type==="keydown"}function Kr(e){return e.type.startsWith("pointer")}function Xr(e){return e.type.startsWith("mouse")}function nn(e){if(Kr(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(Xr(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function Ma(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function La(e,t,n){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function Oa(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:vr(e),b:vr(t)};let r;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),r=e;B(r,"Stacking order can only be calculated for elements with a common ancestor");const s={a:gr(mr(n.a)),b:gr(mr(n.b))};if(s.a===s.b){const o=r.childNodes,i={a:n.a.at(-1),b:n.b.at(-1)};let l=o.length;for(;l--;){const u=o[l];if(u===i.a)return 1;if(u===i.b)return-1}}return Math.sign(s.a-s.b)}const $a=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Fa(e){var t;const n=getComputedStyle((t=Yr(e))!==null&&t!==void 0?t:e).display;return n==="flex"||n==="inline-flex"}function Ha(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||Fa(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||$a.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function mr(e){let t=e.length;for(;t--;){const n=e[t];if(B(n,"Missing node"),Ha(n))return n}return null}function gr(e){return e&&Number(getComputedStyle(e).zIndex)||0}function vr(e){const t=[];for(;e;)t.push(e),e=Yr(e);return t}function Yr(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const Jr=1,Qr=2,Zr=4,es=8,qa=Ma()==="coarse";let je=[],gt=!1,Ve=new Map,rn=new Map;const Pt=new Set;function Ga(e,t,n,r,s){var o;const{ownerDocument:i}=t,l={direction:n,element:t,hitAreaMargins:r,setResizeHandlerState:s},u=(o=Ve.get(i))!==null&&o!==void 0?o:0;return Ve.set(i,u+1),Pt.add(l),Wt(),function(){var h;rn.delete(e),Pt.delete(l);const d=(h=Ve.get(i))!==null&&h!==void 0?h:1;if(Ve.set(i,d-1),Wt(),d===1&&Ve.delete(i),je.includes(l)){const p=je.indexOf(l);p>=0&&je.splice(p,1),Xn(),s("up",!0,null)}}}function Ba(e){const{target:t}=e,{x:n,y:r}=nn(e);gt=!0,Kn({target:t,x:n,y:r}),Wt(),je.length>0&&(Kt("down",e),e.preventDefault(),ts(t)||e.stopImmediatePropagation())}function gn(e){const{x:t,y:n}=nn(e);if(gt&&e.buttons===0&&(gt=!1,Kt("up",e)),!gt){const{target:r}=e;Kn({target:r,x:t,y:n})}Kt("move",e),Xn(),je.length>0&&e.preventDefault()}function vn(e){const{target:t}=e,{x:n,y:r}=nn(e);rn.clear(),gt=!1,je.length>0&&(e.preventDefault(),ts(t)||e.stopImmediatePropagation()),Kt("up",e),Kn({target:t,x:n,y:r}),Xn(),Wt()}function ts(e){let t=e;for(;t;){if(t.hasAttribute(te.resizeHandle))return!0;t=t.parentElement}return!1}function Kn({target:e,x:t,y:n}){je.splice(0);let r=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(r=e),Pt.forEach(s=>{const{element:o,hitAreaMargins:i}=s,l=o.getBoundingClientRect(),{bottom:u,left:f,right:h,top:d}=l,p=qa?i.coarse:i.fine;if(t>=f-p&&t<=h+p&&n>=d-p&&n<=u+p){if(r!==null&&document.contains(r)&&o!==r&&!o.contains(r)&&!r.contains(o)&&Oa(r,o)>0){let v=r,g=!1;for(;v&&!v.contains(o);){if(La(v.getBoundingClientRect(),l)){g=!0;break}v=v.parentElement}if(g)return}je.push(s)}})}function xn(e,t){rn.set(e,t)}function Xn(){let e=!1,t=!1;je.forEach(r=>{const{direction:s}=r;s==="horizontal"?e=!0:t=!0});let n=0;rn.forEach(r=>{n|=r}),e&&t?mn("intersection",n):e?mn("horizontal",n):t?mn("vertical",n):Ta()}let bn;function Wt(){var e;(e=bn)===null||e===void 0||e.abort(),bn=new AbortController;const t={capture:!0,signal:bn.signal};Pt.size&&(gt?(je.length>0&&Ve.forEach((n,r)=>{const{body:s}=r;n>0&&(s.addEventListener("contextmenu",vn,t),s.addEventListener("pointerleave",gn,t),s.addEventListener("pointermove",gn,t))}),Ve.forEach((n,r)=>{const{body:s}=r;s.addEventListener("pointerup",vn,t),s.addEventListener("pointercancel",vn,t)})):Ve.forEach((n,r)=>{const{body:s}=r;n>0&&(s.addEventListener("pointerdown",Ba,t),s.addEventListener("pointermove",gn,t))}))}function Kt(e,t){Pt.forEach(n=>{const{setResizeHandlerState:r}=n,s=je.includes(n);r(e,s,t)})}function Va(){const[e,t]=c.useState(0);return c.useCallback(()=>t(n=>n+1),[])}function B(e,t){if(!e)throw console.error(t),Error(t)}function tt(e,t,n=Un){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function Me(e,t,n=Un){return tt(e,t,n)===0}function me(e,t,n){return tt(e,t,n)===0}function Ua(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){const s=e[r],o=t[r];if(!me(s,o,n))return!1}return!0}function pt({panelConstraints:e,panelIndex:t,size:n}){const r=e[t];B(r!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:s=0,collapsible:o,maxSize:i=100,minSize:l=0}=r;if(tt(n,l)<0)if(o){const u=(s+l)/2;tt(n,u)<0?n=s:n=l}else n=l;return n=Math.min(i,n),n=parseFloat(n.toFixed(Un)),n}function Dt({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:r,prevLayout:s,trigger:o}){if(me(e,0))return t;const i=[...t],[l,u]=r;B(l!=null,"Invalid first pivot index"),B(u!=null,"Invalid second pivot index");let f=0;if(o==="keyboard"){{const d=e<0?u:l,p=n[d];B(p,`Panel constraints not found for index ${d}`);const{collapsedSize:m=0,collapsible:v,minSize:g=0}=p;if(v){const w=t[d];if(B(w!=null,`Previous layout not found for panel index ${d}`),me(w,m)){const x=g-w;tt(x,Math.abs(e))>0&&(e=e<0?0-x:x)}}}{const d=e<0?l:u,p=n[d];B(p,`No panel constraints found for index ${d}`);const{collapsedSize:m=0,collapsible:v,minSize:g=0}=p;if(v){const w=t[d];if(B(w!=null,`Previous layout not found for panel index ${d}`),me(w,g)){const x=w-m;tt(x,Math.abs(e))>0&&(e=e<0?0-x:x)}}}}{const d=e<0?1:-1;let p=e<0?u:l,m=0;for(;;){const g=t[p];B(g!=null,`Previous layout not found for panel index ${p}`);const x=pt({panelConstraints:n,panelIndex:p,size:100})-g;if(m+=x,p+=d,p<0||p>=n.length)break}const v=Math.min(Math.abs(e),Math.abs(m));e=e<0?0-v:v}{let p=e<0?l:u;for(;p>=0&&p<n.length;){const m=Math.abs(e)-Math.abs(f),v=t[p];B(v!=null,`Previous layout not found for panel index ${p}`);const g=v-m,w=pt({panelConstraints:n,panelIndex:p,size:g});if(!me(v,w)&&(f+=v-w,i[p]=w,f.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?p--:p++}}if(Ua(s,i))return s;{const d=e<0?u:l,p=t[d];B(p!=null,`Previous layout not found for panel index ${d}`);const m=p+f,v=pt({panelConstraints:n,panelIndex:d,size:m});if(i[d]=v,!me(v,m)){let g=m-v,x=e<0?u:l;for(;x>=0&&x<n.length;){const b=i[x];B(b!=null,`Previous layout not found for panel index ${x}`);const N=b+g,S=pt({panelConstraints:n,panelIndex:x,size:N});if(me(b,S)||(g-=S-b,i[x]=S),me(g,0))break;e>0?x--:x++}}}const h=i.reduce((d,p)=>p+d,0);return me(h,100)?i:s}function Wa({layout:e,panelsArray:t,pivotIndices:n}){let r=0,s=100,o=0,i=0;const l=n[0];B(l!=null,"No pivot index found"),t.forEach((d,p)=>{const{constraints:m}=d,{maxSize:v=100,minSize:g=0}=m;p===l?(r=g,s=v):(o+=g,i+=v)});const u=Math.min(s,100-o),f=Math.max(r,100-i),h=e[l];return{valueMax:u,valueMin:f,valueNow:h}}function Tt(e,t=document){return Array.from(t.querySelectorAll(`[${te.resizeHandleId}][data-panel-group-id="${e}"]`))}function ns(e,t,n=document){const s=Tt(e,n).findIndex(o=>o.getAttribute(te.resizeHandleId)===t);return s??null}function rs(e,t,n){const r=ns(e,t,n);return r!=null?[r,r+1]:[-1,-1]}function Ka(e){return e instanceof HTMLElement?!0:typeof e=="object"&&e!==null&&"tagName"in e&&"getAttribute"in e}function ss(e,t=document){if(Ka(t)&&t.dataset.panelGroupId==e)return t;const n=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return n||null}function sn(e,t=document){const n=t.querySelector(`[${te.resizeHandleId}="${e}"]`);return n||null}function Xa(e,t,n,r=document){var s,o,i,l;const u=sn(t,r),f=Tt(e,r),h=u?f.indexOf(u):-1,d=(s=(o=n[h])===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:null,p=(i=(l=n[h+1])===null||l===void 0?void 0:l.id)!==null&&i!==void 0?i:null;return[d,p]}function Ya({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:r,panelDataArray:s,panelGroupElement:o,setLayout:i}){c.useRef({didWarnAboutMissingResizeHandle:!1}),et(()=>{if(!o)return;const l=Tt(n,o);for(let u=0;u<s.length-1;u++){const{valueMax:f,valueMin:h,valueNow:d}=Wa({layout:r,panelsArray:s,pivotIndices:[u,u+1]}),p=l[u];if(p!=null){const m=s[u];B(m,`No panel data found for index "${u}"`),p.setAttribute("aria-controls",m.id),p.setAttribute("aria-valuemax",""+Math.round(f)),p.setAttribute("aria-valuemin",""+Math.round(h)),p.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{l.forEach((u,f)=>{u.removeAttribute("aria-controls"),u.removeAttribute("aria-valuemax"),u.removeAttribute("aria-valuemin"),u.removeAttribute("aria-valuenow")})}},[n,r,s,o]),c.useEffect(()=>{if(!o)return;const l=t.current;B(l,"Eager values not found");const{panelDataArray:u}=l,f=ss(n,o);B(f!=null,`No group found for id "${n}"`);const h=Tt(n,o);B(h,`No resize handles found for group id "${n}"`);const d=h.map(p=>{const m=p.getAttribute(te.resizeHandleId);B(m,"Resize handle element has no handle id attribute");const[v,g]=Xa(n,m,u,o);if(v==null||g==null)return()=>{};const w=x=>{if(!x.defaultPrevented)switch(x.key){case"Enter":{x.preventDefault();const b=u.findIndex(N=>N.id===v);if(b>=0){const N=u[b];B(N,`No panel data found for index ${b}`);const S=r[b],{collapsedSize:k=0,collapsible:D,minSize:R=0}=N.constraints;if(S!=null&&D){const M=Dt({delta:me(S,k)?R-k:k-S,initialLayout:r,panelConstraints:u.map(H=>H.constraints),pivotIndices:rs(n,m,o),prevLayout:r,trigger:"keyboard"});r!==M&&i(M)}}break}}};return p.addEventListener("keydown",w),()=>{p.removeEventListener("keydown",w)}});return()=>{d.forEach(p=>p())}},[o,e,t,n,r,s,i])}function xr(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function os(e,t){const n=e==="horizontal",{x:r,y:s}=nn(t);return n?r:s}function Ja(e,t,n,r,s){const o=n==="horizontal",i=sn(t,s);B(i,`No resize handle element found for id "${t}"`);const l=i.getAttribute(te.groupId);B(l,"Resize handle element has no group id attribute");let{initialCursorPosition:u}=r;const f=os(n,e),h=ss(l,s);B(h,`No group element found for id "${l}"`);const d=h.getBoundingClientRect(),p=o?d.width:d.height;return(f-u)/p*100}function Qa(e,t,n,r,s,o){if(Wr(e)){const i=n==="horizontal";let l=0;e.shiftKey?l=100:s!=null?l=s:l=10;let u=0;switch(e.key){case"ArrowDown":u=i?0:l;break;case"ArrowLeft":u=i?-l:0;break;case"ArrowRight":u=i?l:0;break;case"ArrowUp":u=i?0:-l;break;case"End":u=100;break;case"Home":u=-100;break}return u}else return r==null?0:Ja(e,t,n,r,o)}function Za({panelDataArray:e}){const t=Array(e.length),n=e.map(o=>o.constraints);let r=0,s=100;for(let o=0;o<e.length;o++){const i=n[o];B(i,`Panel constraints not found for index ${o}`);const{defaultSize:l}=i;l!=null&&(r++,t[o]=l,s-=l)}for(let o=0;o<e.length;o++){const i=n[o];B(i,`Panel constraints not found for index ${o}`);const{defaultSize:l}=i;if(l!=null)continue;const u=e.length-r,f=s/u;r++,t[o]=f,s-=f}return t}function it(e,t,n){t.forEach((r,s)=>{const o=e[s];B(o,`Panel data not found for index ${s}`);const{callbacks:i,constraints:l,id:u}=o,{collapsedSize:f=0,collapsible:h}=l,d=n[u];if(d==null||r!==d){n[u]=r;const{onCollapse:p,onExpand:m,onResize:v}=i;v&&v(r,d),h&&(p||m)&&(m&&(d==null||Me(d,f))&&!Me(r,f)&&m(),p&&(d==null||!Me(d,f))&&Me(r,f)&&p())}})}function Gt(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function ei({defaultSize:e,dragState:t,layout:n,panelData:r,panelIndex:s,precision:o=3}){const i=n[s];let l;return i==null?l=e!=null?e.toPrecision(o):"1":r.length===1?l="1":l=i.toPrecision(o),{flexBasis:0,flexGrow:l,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function ti(e,t=10){let n=null;return(...s)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{e(...s)},t)}}function br(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,n)=>{localStorage.setItem(t,n)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function as(e){return`react-resizable-panels:${e}`}function is(e){return e.map(t=>{const{constraints:n,id:r,idIsFromProps:s,order:o}=t;return s?r:o?`${o}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((t,n)=>t.localeCompare(n)).join(",")}function ls(e,t){try{const n=as(e),r=t.getItem(n);if(r){const s=JSON.parse(r);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function ni(e,t,n){var r,s;const o=(r=ls(e,n))!==null&&r!==void 0?r:{},i=is(t);return(s=o[i])!==null&&s!==void 0?s:null}function ri(e,t,n,r,s){var o;const i=as(e),l=is(t),u=(o=ls(e,s))!==null&&o!==void 0?o:{};u[l]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{s.setItem(i,JSON.stringify(u))}catch(f){console.error(f)}}function wr({layout:e,panelConstraints:t}){const n=[...e],r=n.reduce((o,i)=>o+i,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(o=>`${o}%`).join(", ")}`);if(!me(r,100)&&n.length>0)for(let o=0;o<t.length;o++){const i=n[o];B(i!=null,`No layout data found for index ${o}`);const l=100/r*i;n[o]=l}let s=0;for(let o=0;o<t.length;o++){const i=n[o];B(i!=null,`No layout data found for index ${o}`);const l=pt({panelConstraints:t,panelIndex:o,size:i});i!=l&&(s+=i-l,n[o]=l)}if(!me(s,0))for(let o=0;o<t.length;o++){const i=n[o];B(i!=null,`No layout data found for index ${o}`);const l=i+s,u=pt({panelConstraints:t,panelIndex:o,size:l});if(i!==u&&(s-=u-i,n[o]=u,me(s,0)))break}return n}const si=100,It={getItem:e=>(br(It),It.getItem(e)),setItem:(e,t)=>{br(It),It.setItem(e,t)}},yr={};function cs({autoSaveId:e=null,children:t,className:n="",direction:r,forwardedRef:s,id:o=null,onLayout:i=null,keyboardResizeBy:l=null,storage:u=It,style:f,tagName:h="div",...d}){const p=Wn(o),m=c.useRef(null),[v,g]=c.useState(null),[w,x]=c.useState([]),b=Va(),N=c.useRef({}),S=c.useRef(new Map),k=c.useRef(0),D=c.useRef({autoSaveId:e,direction:r,dragState:v,id:p,keyboardResizeBy:l,onLayout:i,storage:u}),R=c.useRef({layout:w,panelDataArray:[],panelDataArrayChanged:!1});c.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),c.useImperativeHandle(s,()=>({getId:()=>D.current.id,getLayout:()=>{const{layout:C}=R.current;return C},setLayout:C=>{const{onLayout:A}=D.current,{layout:P,panelDataArray:_}=R.current,T=wr({layout:C,panelConstraints:_.map(O=>O.constraints)});xr(P,T)||(x(T),R.current.layout=T,A&&A(T),it(_,T,N.current))}}),[]),et(()=>{D.current.autoSaveId=e,D.current.direction=r,D.current.dragState=v,D.current.id=p,D.current.onLayout=i,D.current.storage=u}),Ya({committedValuesRef:D,eagerValuesRef:R,groupId:p,layout:w,panelDataArray:R.current.panelDataArray,setLayout:x,panelGroupElement:m.current}),c.useEffect(()=>{const{panelDataArray:C}=R.current;if(e){if(w.length===0||w.length!==C.length)return;let A=yr[e];A==null&&(A=ti(ri,si),yr[e]=A);const P=[...C],_=new Map(S.current);A(e,P,_,w,u)}},[e,w,u]),c.useEffect(()=>{});const M=c.useCallback(C=>{const{onLayout:A}=D.current,{layout:P,panelDataArray:_}=R.current;if(C.constraints.collapsible){const T=_.map(le=>le.constraints),{collapsedSize:O=0,panelSize:V,pivotIndices:U}=Je(_,C,P);if(B(V!=null,`Panel size not found for panel "${C.id}"`),!Me(V,O)){S.current.set(C.id,V);const ee=ct(_,C)===_.length-1?V-O:O-V,K=Dt({delta:ee,initialLayout:P,panelConstraints:T,pivotIndices:U,prevLayout:P,trigger:"imperative-api"});Gt(P,K)||(x(K),R.current.layout=K,A&&A(K),it(_,K,N.current))}}},[]),H=c.useCallback((C,A)=>{const{onLayout:P}=D.current,{layout:_,panelDataArray:T}=R.current;if(C.constraints.collapsible){const O=T.map(Q=>Q.constraints),{collapsedSize:V=0,panelSize:U=0,minSize:le=0,pivotIndices:ee}=Je(T,C,_),K=A??le;if(Me(U,V)){const Q=S.current.get(C.id),ce=Q!=null&&Q>=K?Q:K,nt=ct(T,C)===T.length-1?U-ce:ce-U,oe=Dt({delta:nt,initialLayout:_,panelConstraints:O,pivotIndices:ee,prevLayout:_,trigger:"imperative-api"});Gt(_,oe)||(x(oe),R.current.layout=oe,P&&P(oe),it(T,oe,N.current))}}},[]),q=c.useCallback(C=>{const{layout:A,panelDataArray:P}=R.current,{panelSize:_}=Je(P,C,A);return B(_!=null,`Panel size not found for panel "${C.id}"`),_},[]),$=c.useCallback((C,A)=>{const{panelDataArray:P}=R.current,_=ct(P,C);return ei({defaultSize:A,dragState:v,layout:w,panelData:P,panelIndex:_})},[v,w]),G=c.useCallback(C=>{const{layout:A,panelDataArray:P}=R.current,{collapsedSize:_=0,collapsible:T,panelSize:O}=Je(P,C,A);return B(O!=null,`Panel size not found for panel "${C.id}"`),T===!0&&Me(O,_)},[]),Z=c.useCallback(C=>{const{layout:A,panelDataArray:P}=R.current,{collapsedSize:_=0,collapsible:T,panelSize:O}=Je(P,C,A);return B(O!=null,`Panel size not found for panel "${C.id}"`),!T||tt(O,_)>0},[]),W=c.useCallback(C=>{const{panelDataArray:A}=R.current;A.push(C),A.sort((P,_)=>{const T=P.order,O=_.order;return T==null&&O==null?0:T==null?-1:O==null?1:T-O}),R.current.panelDataArrayChanged=!0,b()},[b]);et(()=>{if(R.current.panelDataArrayChanged){R.current.panelDataArrayChanged=!1;const{autoSaveId:C,onLayout:A,storage:P}=D.current,{layout:_,panelDataArray:T}=R.current;let O=null;if(C){const U=ni(C,T,P);U&&(S.current=new Map(Object.entries(U.expandToSizes)),O=U.layout)}O==null&&(O=Za({panelDataArray:T}));const V=wr({layout:O,panelConstraints:T.map(U=>U.constraints)});xr(_,V)||(x(V),R.current.layout=V,A&&A(V),it(T,V,N.current))}}),et(()=>{const C=R.current;return()=>{C.layout=[]}},[]);const Y=c.useCallback(C=>{let A=!1;const P=m.current;return P&&window.getComputedStyle(P,null).getPropertyValue("direction")==="rtl"&&(A=!0),function(T){T.preventDefault();const O=m.current;if(!O)return()=>null;const{direction:V,dragState:U,id:le,keyboardResizeBy:ee,onLayout:K}=D.current,{layout:Q,panelDataArray:ce}=R.current,{initialLayout:Ee}=U??{},nt=rs(le,C,O);let oe=Qa(T,C,V,U,ee,O);const rt=V==="horizontal";rt&&A&&(oe=-oe);const Ie=ce.map(qt=>qt.constraints),ke=Dt({delta:oe,initialLayout:Ee??Q,panelConstraints:Ie,pivotIndices:nt,prevLayout:Q,trigger:Wr(T)?"keyboard":"mouse-or-touch"}),Ye=!Gt(Q,ke);(Kr(T)||Xr(T))&&k.current!=oe&&(k.current=oe,!Ye&&oe!==0?rt?xn(C,oe<0?Jr:Qr):xn(C,oe<0?Zr:es):xn(C,0)),Ye&&(x(ke),R.current.layout=ke,K&&K(ke),it(ce,ke,N.current))}},[]),E=c.useCallback((C,A)=>{const{onLayout:P}=D.current,{layout:_,panelDataArray:T}=R.current,O=T.map(Q=>Q.constraints),{panelSize:V,pivotIndices:U}=Je(T,C,_);B(V!=null,`Panel size not found for panel "${C.id}"`);const ee=ct(T,C)===T.length-1?V-A:A-V,K=Dt({delta:ee,initialLayout:_,panelConstraints:O,pivotIndices:U,prevLayout:_,trigger:"imperative-api"});Gt(_,K)||(x(K),R.current.layout=K,P&&P(K),it(T,K,N.current))},[]),y=c.useCallback((C,A)=>{const{layout:P,panelDataArray:_}=R.current,{collapsedSize:T=0,collapsible:O}=A,{collapsedSize:V=0,collapsible:U,maxSize:le=100,minSize:ee=0}=C.constraints,{panelSize:K}=Je(_,C,P);K!=null&&(O&&U&&Me(K,T)?Me(T,V)||E(C,V):K<ee?E(C,ee):K>le&&E(C,le))},[E]),j=c.useCallback((C,A)=>{const{direction:P}=D.current,{layout:_}=R.current;if(!m.current)return;const T=sn(C,m.current);B(T,`Drag handle element not found for id "${C}"`);const O=os(P,A);g({dragHandleId:C,dragHandleRect:T.getBoundingClientRect(),initialCursorPosition:O,initialLayout:_})},[]),I=c.useCallback(()=>{g(null)},[]),z=c.useCallback(C=>{const{panelDataArray:A}=R.current,P=ct(A,C);P>=0&&(A.splice(P,1),delete N.current[C.id],R.current.panelDataArrayChanged=!0,b())},[b]),L=c.useMemo(()=>({collapsePanel:M,direction:r,dragState:v,expandPanel:H,getPanelSize:q,getPanelStyle:$,groupId:p,isPanelCollapsed:G,isPanelExpanded:Z,reevaluatePanelConstraints:y,registerPanel:W,registerResizeHandle:Y,resizePanel:E,startDragging:j,stopDragging:I,unregisterPanel:z,panelGroupElement:m.current}),[M,v,r,H,q,$,p,G,Z,y,W,Y,E,j,I,z]),F={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return c.createElement(tn.Provider,{value:L},c.createElement(h,{...d,children:t,className:n,id:o,ref:m,style:{...F,...f},[te.group]:"",[te.groupDirection]:r,[te.groupId]:p}))}const us=c.forwardRef((e,t)=>c.createElement(cs,{...e,forwardedRef:t}));cs.displayName="PanelGroup";us.displayName="forwardRef(PanelGroup)";function ct(e,t){return e.findIndex(n=>n===t||n.id===t.id)}function Je(e,t,n){const r=ct(e,t),o=r===e.length-1?[r-1,r]:[r,r+1],i=n[r];return{...t.constraints,panelSize:i,pivotIndices:o}}function oi({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:r}){c.useEffect(()=>{if(e||n==null||r==null)return;const s=sn(t,r);if(s==null)return;const o=i=>{if(!i.defaultPrevented)switch(i.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{i.preventDefault(),n(i);break}case"F6":{i.preventDefault();const l=s.getAttribute(te.groupId);B(l,`No group element found for id "${l}"`);const u=Tt(l,r),f=ns(l,t,r);B(f!==null,`No resize element found for id "${t}"`);const h=i.shiftKey?f>0?f-1:u.length-1:f+1<u.length?f+1:0;u[h].focus();break}}};return s.addEventListener("keydown",o),()=>{s.removeEventListener("keydown",o)}},[r,e,t,n])}function ds({children:e=null,className:t="",disabled:n=!1,hitAreaMargins:r,id:s,onBlur:o,onClick:i,onDragging:l,onFocus:u,onPointerDown:f,onPointerUp:h,style:d={},tabIndex:p=0,tagName:m="div",...v}){var g,w;const x=c.useRef(null),b=c.useRef({onClick:i,onDragging:l,onPointerDown:f,onPointerUp:h});c.useEffect(()=>{b.current.onClick=i,b.current.onDragging=l,b.current.onPointerDown=f,b.current.onPointerUp=h});const N=c.useContext(tn);if(N===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:S,groupId:k,registerResizeHandle:D,startDragging:R,stopDragging:M,panelGroupElement:H}=N,q=Wn(s),[$,G]=c.useState("inactive"),[Z,W]=c.useState(!1),[Y,E]=c.useState(null),y=c.useRef({state:$});et(()=>{y.current.state=$}),c.useEffect(()=>{if(n)E(null);else{const L=D(q);E(()=>L)}},[n,q,D]);const j=(g=r?.coarse)!==null&&g!==void 0?g:15,I=(w=r?.fine)!==null&&w!==void 0?w:5;c.useEffect(()=>{if(n||Y==null)return;const L=x.current;B(L,"Element ref not attached");let F=!1;return Ga(q,L,S,{coarse:j,fine:I},(A,P,_)=>{if(!P){G("inactive");return}switch(A){case"down":{G("drag"),F=!1,B(_,'Expected event to be defined for "down" action'),R(q,_);const{onDragging:T,onPointerDown:O}=b.current;T?.(!0),O?.();break}case"move":{const{state:T}=y.current;F=!0,T!=="drag"&&G("hover"),B(_,'Expected event to be defined for "move" action'),Y(_);break}case"up":{G("hover"),M();const{onClick:T,onDragging:O,onPointerUp:V}=b.current;O?.(!1),V?.(),F||T?.();break}}})},[j,S,n,I,D,q,Y,R,M]),oi({disabled:n,handleId:q,resizeHandler:Y,panelGroupElement:H});const z={touchAction:"none",userSelect:"none"};return c.createElement(m,{...v,children:e,className:t,id:s,onBlur:()=>{W(!1),o?.()},onFocus:()=>{W(!0),u?.()},ref:x,role:"separator",style:{...z,...d},tabIndex:p,[te.groupDirection]:S,[te.groupId]:k,[te.resizeHandle]:"",[te.resizeHandleActive]:$==="drag"?"pointer":Z?"keyboard":void 0,[te.resizeHandleEnabled]:!n,[te.resizeHandleId]:q,[te.resizeHandleState]:$})}ds.displayName="PanelResizeHandle";const fs=({className:e,...t})=>a.jsx(us,{className:X("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",e),...t}),In=Ur,ai=({withHandle:e,className:t,...n})=>a.jsx(ds,{className:X("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",t),...n,children:e&&a.jsx("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:a.jsx(Aa,{className:"h-2.5 w-2.5"})})}),Yn=({leftContent:e,rightContent:t,direction:n="horizontal",defaultSizes:r=[50,50],className:s})=>a.jsxs(fs,{direction:n,className:X("w-full border rounded-none",s),children:[a.jsx(In,{defaultSize:r[0],children:e}),a.jsx(ai,{withHandle:!0}),a.jsx(In,{defaultSize:r[1],children:t})]});var on="Checkbox",[ii,cu]=Ot(on),[li,Jn]=ii(on);function ci(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:s,disabled:o,form:i,name:l,onCheckedChange:u,required:f,value:h="on",internal_do_not_use_render:d}=e,[p,m]=qn({prop:n,defaultProp:s??!1,onChange:u,caller:on}),[v,g]=c.useState(null),[w,x]=c.useState(null),b=c.useRef(!1),N=v?!!i||!!v.closest("form"):!0,S={checked:p,disabled:o,setChecked:m,control:v,setControl:g,name:l,form:i,value:h,hasConsumerStoppedPropagationRef:b,required:f,defaultChecked:We(s)?!1:s,isFormControl:N,bubbleInput:w,setBubbleInput:x};return a.jsx(li,{scope:t,...S,children:ui(d)?d(S):r})}var hs="CheckboxTrigger",ps=c.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},s)=>{const{control:o,value:i,disabled:l,checked:u,required:f,setControl:h,setChecked:d,hasConsumerStoppedPropagationRef:p,isFormControl:m,bubbleInput:v}=Jn(hs,e),g=ge(s,h),w=c.useRef(u);return c.useEffect(()=>{const x=o?.form;if(x){const b=()=>d(w.current);return x.addEventListener("reset",b),()=>x.removeEventListener("reset",b)}},[o,d]),a.jsx(Ce.button,{type:"button",role:"checkbox","aria-checked":We(u)?"mixed":u,"aria-required":f,"data-state":bs(u),"data-disabled":l?"":void 0,disabled:l,value:i,...r,ref:g,onKeyDown:bt(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:bt(n,x=>{d(b=>We(b)?!0:!b),v&&m&&(p.current=x.isPropagationStopped(),p.current||x.stopPropagation())})})});ps.displayName=hs;var Qn=c.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:o,required:i,disabled:l,value:u,onCheckedChange:f,form:h,...d}=e;return a.jsx(ci,{__scopeCheckbox:n,checked:s,defaultChecked:o,disabled:l,required:i,onCheckedChange:f,name:r,form:h,value:u,internal_do_not_use_render:({isFormControl:p})=>a.jsxs(a.Fragment,{children:[a.jsx(ps,{...d,ref:t,__scopeCheckbox:n}),p&&a.jsx(xs,{__scopeCheckbox:n})]})})});Qn.displayName=on;var ms="CheckboxIndicator",gs=c.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,o=Jn(ms,n);return a.jsx(Or,{present:r||We(o.checked)||o.checked===!0,children:a.jsx(Ce.span,{"data-state":bs(o.checked),"data-disabled":o.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});gs.displayName=ms;var vs="CheckboxBubbleInput",xs=c.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:o,defaultChecked:i,required:l,disabled:u,name:f,value:h,form:d,bubbleInput:p,setBubbleInput:m}=Jn(vs,e),v=ge(n,m),g=Gn(o),w=Bn(r);c.useEffect(()=>{const b=p;if(!b)return;const N=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(N,"checked").set,D=!s.current;if(g!==o&&k){const R=new Event("click",{bubbles:D});b.indeterminate=We(o),k.call(b,We(o)?!1:o),b.dispatchEvent(R)}},[p,g,o,s]);const x=c.useRef(We(o)?!1:o);return a.jsx(Ce.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??x.current,required:l,disabled:u,name:f,value:h,form:d,...t,tabIndex:-1,ref:v,style:{...t.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});xs.displayName=vs;function ui(e){return typeof e=="function"}function We(e){return e==="indeterminate"}function bs(e){return We(e)?"indeterminate":e?"checked":"unchecked"}const ws=c.forwardRef(({className:e,...t},n)=>a.jsx(Qn,{ref:n,className:X("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:a.jsx(gs,{className:X("flex items-center justify-center text-current"),children:a.jsx(ma,{className:"h-4 w-4"})})}));ws.displayName=Qn.displayName;const di=({control:e,name:t,label:n,options:r,orientation:s="vertical",className:o="",maxSelections:i,onValueChange:l})=>{const{setValue:u}=ga(),f=Fr({control:e,name:t});return c.useEffect(()=>{if(i&&f&&f.length>i){const h=f.slice(0,i);u(t,h),l&&l(h)}},[f,i,t,u,l]),a.jsx(Ne,{control:e,name:t,render:({field:h})=>a.jsxs(Se,{className:`space-y-2 ${s==="horizontal"?"space-x-4":""} ${o}`,children:[n&&a.jsx("div",{className:"font-medium",children:n}),r.map(d=>{const p=d.id||`${t}_${d.value}`;return a.jsxs(Se,{className:"flex flex-row items-start space-x-3 space-y-0",children:[a.jsx(Re,{children:a.jsx(ws,{id:p,checked:h.value?.includes(d.value)||!1,onCheckedChange:m=>{const v=h.value||[];if(m&&i&&v.length>=i)return;const g=m?[...v,d.value]:v.filter(w=>w!==d.value);h.onChange(g),l&&l(g)}})}),a.jsxs("div",{className:"space-y-1 leading-none",children:[a.jsx("span",{children:d.label})," ",d.helperText&&a.jsx(Le,{children:d.helperText})]})]},d.value)})]})})};var ue=(e=>(e.TRUE_FALSE_NOT_GIVEN="true_false_not_given",e.YES_NO_NOT_GIVEN="yes_no_not_given",e.MULTIPLE_CHOICE="multiple_choice_multiple_answers",e.MATCHING_HEADINGS="matching_headings",e.MATCHING_INFORMATION="matching_information",e.MATCHING_FEATURES="matching_features",e.MATCHING_SENTENCE_ENDINGS="matching_sentence_endings",e.SENTENCE_COMPLETION="sentence_completion",e.SUMMARY_COMPLETION="summary_completion",e.DIAGRAM_LABEL="diagram_label",e.SHORT_ANSWER="short_answer",e.LIST_SELECTION="list_selection",e))(ue||{});const an=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function wt(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Zn(e){return"nodeType"in e}function de(e){var t,n;return e?wt(e)?e:Zn(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function er(e){const{Document:t}=de(e);return e instanceof t}function $t(e){return wt(e)?!1:e instanceof de(e).HTMLElement}function ys(e){return e instanceof de(e).SVGElement}function yt(e){return e?wt(e)?e.document:Zn(e)?er(e)?e:$t(e)||ys(e)?e.ownerDocument:document:document:document}const Xe=an?c.useLayoutEffect:c.useEffect;function tr(e){const t=c.useRef(e);return Xe(()=>{t.current=e}),c.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function fi(){const e=c.useRef(null),t=c.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=c.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Mt(e,t){t===void 0&&(t=[e]);const n=c.useRef(e);return Xe(()=>{n.current!==e&&(n.current=e)},t),n}function Ft(e,t){const n=c.useRef();return c.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Xt(e){const t=tr(e),n=c.useRef(null),r=c.useCallback(s=>{s!==n.current&&t?.(s,n.current),n.current=s},[]);return[n,r]}function kn(e){const t=c.useRef();return c.useEffect(()=>{t.current=e},[e]),t.current}let wn={};function ln(e,t){return c.useMemo(()=>{if(t)return t;const n=wn[e]==null?0:wn[e]+1;return wn[e]=n,e+"-"+n},[e,t])}function Ss(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((o,i)=>{const l=Object.entries(i);for(const[u,f]of l){const h=o[u];h!=null&&(o[u]=h+e*f)}return o},{...t})}}const vt=Ss(1),Yt=Ss(-1);function hi(e){return"clientX"in e&&"clientY"in e}function Cs(e){if(!e)return!1;const{KeyboardEvent:t}=de(e.target);return t&&e instanceof t}function pi(e){if(!e)return!1;const{TouchEvent:t}=de(e.target);return t&&e instanceof t}function An(e){if(pi(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return hi(e)?{x:e.clientX,y:e.clientY}:null}const Sr="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function mi(e){return e.matches(Sr)?e:e.querySelector(Sr)}const gi={display:"none"};function vi(e){let{id:t,value:n}=e;return ye.createElement("div",{id:t,style:gi},n)}function xi(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ye.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function bi(){const[e,t]=c.useState("");return{announce:c.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Es=c.createContext(null);function wi(e){const t=c.useContext(Es);c.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function yi(){const[e]=c.useState(()=>new Set),t=c.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[c.useCallback(r=>{let{type:s,event:o}=r;e.forEach(i=>{var l;return(l=i[s])==null?void 0:l.call(i,o)})},[e]),t]}const Si={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Ci={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Ei(e){let{announcements:t=Ci,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=Si}=e;const{announce:o,announcement:i}=bi(),l=ln("DndLiveRegion"),[u,f]=c.useState(!1);if(c.useEffect(()=>{f(!0)},[]),wi(c.useMemo(()=>({onDragStart(d){let{active:p}=d;o(t.onDragStart({active:p}))},onDragMove(d){let{active:p,over:m}=d;t.onDragMove&&o(t.onDragMove({active:p,over:m}))},onDragOver(d){let{active:p,over:m}=d;o(t.onDragOver({active:p,over:m}))},onDragEnd(d){let{active:p,over:m}=d;o(t.onDragEnd({active:p,over:m}))},onDragCancel(d){let{active:p,over:m}=d;o(t.onDragCancel({active:p,over:m}))}}),[o,t])),!u)return null;const h=ye.createElement(ye.Fragment,null,ye.createElement(vi,{id:r,value:s.draggable}),ye.createElement(xi,{id:l,announcement:i}));return n?jt.createPortal(h,n):h}var ne;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(ne||(ne={}));function Jt(){}const De=Object.freeze({x:0,y:0});function Ni(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Ri(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function ji(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),i=s-r,l=o-n;if(r<s&&n<o){const u=t.width*t.height,f=e.width*e.height,h=i*l,d=h/(u+f-h);return Number(d.toFixed(4))}return 0}const Di=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const o of r){const{id:i}=o,l=n.get(i);if(l){const u=ji(l,t);u>0&&s.push({id:i,data:{droppableContainer:o,value:u}})}}return s.sort(Ni)};function Ii(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Ns(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:De}function ki(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return s.reduce((i,l)=>({...i,top:i.top+e*l.y,bottom:i.bottom+e*l.y,left:i.left+e*l.x,right:i.right+e*l.x}),{...n})}}const Ai=ki(1);function _i(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function zi(e,t,n){const r=_i(t);if(!r)return e;const{scaleX:s,scaleY:o,x:i,y:l}=r,u=e.left-i-(1-s)*parseFloat(n),f=e.top-l-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),h=s?e.width/s:e.width,d=o?e.height/o:e.height;return{width:h,height:d,top:f,right:u+h,bottom:f+d,left:u}}const Pi={ignoreTransform:!1};function Ht(e,t){t===void 0&&(t=Pi);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:f,transformOrigin:h}=de(e).getComputedStyle(e);f&&(n=zi(n,f,h))}const{top:r,left:s,width:o,height:i,bottom:l,right:u}=n;return{top:r,left:s,width:o,height:i,bottom:l,right:u}}function Cr(e){return Ht(e,{ignoreTransform:!0})}function Ti(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Mi(e,t){return t===void 0&&(t=de(e).getComputedStyle(e)),t.position==="fixed"}function Li(e,t){t===void 0&&(t=de(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const o=t[s];return typeof o=="string"?n.test(o):!1})}function nr(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(er(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!$t(s)||ys(s)||n.includes(s))return n;const o=de(e).getComputedStyle(s);return s!==e&&Li(s,o)&&n.push(s),Mi(s,o)?n:r(s.parentNode)}return e?r(e):n}function Rs(e){const[t]=nr(e,1);return t??null}function yn(e){return!an||!e?null:wt(e)?e:Zn(e)?er(e)||e===yt(e).scrollingElement?window:$t(e)?e:null:null}function js(e){return wt(e)?e.scrollX:e.scrollLeft}function Ds(e){return wt(e)?e.scrollY:e.scrollTop}function _n(e){return{x:js(e),y:Ds(e)}}var re;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(re||(re={}));function Is(e){return!an||!e?!1:e===document.scrollingElement}function ks(e){const t={x:0,y:0},n=Is(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,i=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:s,isLeft:o,isBottom:i,isRight:l,maxScroll:r,minScroll:t}}const Oi={x:.2,y:.2};function $i(e,t,n,r,s){let{top:o,left:i,right:l,bottom:u}=n;r===void 0&&(r=10),s===void 0&&(s=Oi);const{isTop:f,isBottom:h,isLeft:d,isRight:p}=ks(e),m={x:0,y:0},v={x:0,y:0},g={height:t.height*s.y,width:t.width*s.x};return!f&&o<=t.top+g.height?(m.y=re.Backward,v.y=r*Math.abs((t.top+g.height-o)/g.height)):!h&&u>=t.bottom-g.height&&(m.y=re.Forward,v.y=r*Math.abs((t.bottom-g.height-u)/g.height)),!p&&l>=t.right-g.width?(m.x=re.Forward,v.x=r*Math.abs((t.right-g.width-l)/g.width)):!d&&i<=t.left+g.width&&(m.x=re.Backward,v.x=r*Math.abs((t.left+g.width-i)/g.width)),{direction:m,speed:v}}function Fi(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:i}=window;return{top:0,left:0,right:o,bottom:i,width:o,height:i}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function As(e){return e.reduce((t,n)=>vt(t,_n(n)),De)}function Hi(e){return e.reduce((t,n)=>t+js(n),0)}function qi(e){return e.reduce((t,n)=>t+Ds(n),0)}function Gi(e,t){if(t===void 0&&(t=Ht),!e)return;const{top:n,left:r,bottom:s,right:o}=t(e);Rs(e)&&(s<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Bi=[["x",["left","right"],Hi],["y",["top","bottom"],qi]];class rr{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=nr(n),s=As(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,i,l]of Bi)for(const u of i)Object.defineProperty(this,u,{get:()=>{const f=l(r),h=s[o]-f;return this.rect[u]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class kt{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Vi(e){const{EventTarget:t}=de(e);return e instanceof t?e:yt(e)}function Sn(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var we;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(we||(we={}));function Er(e){e.preventDefault()}function Ui(e){e.stopPropagation()}var J;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(J||(J={}));const _s={start:[J.Space,J.Enter],cancel:[J.Esc],end:[J.Space,J.Enter,J.Tab]},Wi=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case J.Right:return{...n,x:n.x+25};case J.Left:return{...n,x:n.x-25};case J.Down:return{...n,y:n.y+25};case J.Up:return{...n,y:n.y-25}}};class zs{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new kt(yt(n)),this.windowListeners=new kt(de(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(we.Resize,this.handleCancel),this.windowListeners.add(we.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(we.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Gi(r),n(De)}handleKeyDown(t){if(Cs(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:o=_s,coordinateGetter:i=Wi,scrollBehavior:l="smooth"}=s,{code:u}=t;if(o.end.includes(u)){this.handleEnd(t);return}if(o.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:f}=r.current,h=f?{x:f.left,y:f.top}:De;this.referenceCoordinates||(this.referenceCoordinates=h);const d=i(t,{active:n,context:r.current,currentCoordinates:h});if(d){const p=Yt(d,h),m={x:0,y:0},{scrollableAncestors:v}=r.current;for(const g of v){const w=t.code,{isTop:x,isRight:b,isLeft:N,isBottom:S,maxScroll:k,minScroll:D}=ks(g),R=Fi(g),M={x:Math.min(w===J.Right?R.right-R.width/2:R.right,Math.max(w===J.Right?R.left:R.left+R.width/2,d.x)),y:Math.min(w===J.Down?R.bottom-R.height/2:R.bottom,Math.max(w===J.Down?R.top:R.top+R.height/2,d.y))},H=w===J.Right&&!b||w===J.Left&&!N,q=w===J.Down&&!S||w===J.Up&&!x;if(H&&M.x!==d.x){const $=g.scrollLeft+p.x,G=w===J.Right&&$<=k.x||w===J.Left&&$>=D.x;if(G&&!p.y){g.scrollTo({left:$,behavior:l});return}G?m.x=g.scrollLeft-$:m.x=w===J.Right?g.scrollLeft-k.x:g.scrollLeft-D.x,m.x&&g.scrollBy({left:-m.x,behavior:l});break}else if(q&&M.y!==d.y){const $=g.scrollTop+p.y,G=w===J.Down&&$<=k.y||w===J.Up&&$>=D.y;if(G&&!p.x){g.scrollTo({top:$,behavior:l});return}G?m.y=g.scrollTop-$:m.y=w===J.Down?g.scrollTop-k.y:g.scrollTop-D.y,m.y&&g.scrollBy({top:-m.y,behavior:l});break}}this.handleMove(t,vt(Yt(d,this.referenceCoordinates),m))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}zs.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=_s,onActivation:s}=t,{active:o}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const l=o.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),s?.({event:e.nativeEvent}),!0)}return!1}}];function Nr(e){return!!(e&&"distance"in e)}function Rr(e){return!!(e&&"delay"in e)}class sr{constructor(t,n,r){var s;r===void 0&&(r=Vi(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:i}=o;this.props=t,this.events=n,this.document=yt(i),this.documentListeners=new kt(this.document),this.listeners=new kt(r),this.windowListeners=new kt(de(i)),this.initialCoordinates=(s=An(o))!=null?s:De,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(we.Resize,this.handleCancel),this.windowListeners.add(we.DragStart,Er),this.windowListeners.add(we.VisibilityChange,this.handleCancel),this.windowListeners.add(we.ContextMenu,Er),this.documentListeners.add(we.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Rr(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Nr(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(we.Click,Ui,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(we.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:o}=this,{onMove:i,options:{activationConstraint:l}}=o;if(!s)return;const u=(n=An(t))!=null?n:De,f=Yt(s,u);if(!r&&l){if(Nr(l)){if(l.tolerance!=null&&Sn(f,l.tolerance))return this.handleCancel();if(Sn(f,l.distance))return this.handleStart()}if(Rr(l)&&Sn(f,l.tolerance))return this.handleCancel();this.handlePending(l,f);return}t.cancelable&&t.preventDefault(),i(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===J.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Ki={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Ps extends sr{constructor(t){const{event:n}=t,r=yt(n.target);super(t,Ki,r)}}Ps.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const Xi={move:{name:"mousemove"},end:{name:"mouseup"}};var zn;(function(e){e[e.RightClick=2]="RightClick"})(zn||(zn={}));class Yi extends sr{constructor(t){super(t,Xi,yt(t.event.target))}}Yi.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===zn.RightClick?!1:(r?.({event:n}),!0)}}];const Cn={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Ji extends sr{constructor(t){super(t,Cn)}static setup(){return window.addEventListener(Cn.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Cn.move.name,t)};function t(){}}}Ji.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r?.({event:n}),!0)}}];var At;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(At||(At={}));var Qt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Qt||(Qt={}));function Qi(e){let{acceleration:t,activator:n=At.Pointer,canScroll:r,draggingRect:s,enabled:o,interval:i=5,order:l=Qt.TreeOrder,pointerCoordinates:u,scrollableAncestors:f,scrollableAncestorRects:h,delta:d,threshold:p}=e;const m=el({delta:d,disabled:!o}),[v,g]=fi(),w=c.useRef({x:0,y:0}),x=c.useRef({x:0,y:0}),b=c.useMemo(()=>{switch(n){case At.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case At.DraggableRect:return s}},[n,s,u]),N=c.useRef(null),S=c.useCallback(()=>{const D=N.current;if(!D)return;const R=w.current.x*x.current.x,M=w.current.y*x.current.y;D.scrollBy(R,M)},[]),k=c.useMemo(()=>l===Qt.TreeOrder?[...f].reverse():f,[l,f]);c.useEffect(()=>{if(!o||!f.length||!b){g();return}for(const D of k){if(r?.(D)===!1)continue;const R=f.indexOf(D),M=h[R];if(!M)continue;const{direction:H,speed:q}=$i(D,M,b,t,p);for(const $ of["x","y"])m[$][H[$]]||(q[$]=0,H[$]=0);if(q.x>0||q.y>0){g(),N.current=D,v(S,i),w.current=q,x.current=H;return}}w.current={x:0,y:0},x.current={x:0,y:0},g()},[t,S,r,g,o,i,JSON.stringify(b),JSON.stringify(m),v,f,k,h,JSON.stringify(p)])}const Zi={x:{[re.Backward]:!1,[re.Forward]:!1},y:{[re.Backward]:!1,[re.Forward]:!1}};function el(e){let{delta:t,disabled:n}=e;const r=kn(t);return Ft(s=>{if(n||!r||!s)return Zi;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[re.Backward]:s.x[re.Backward]||o.x===-1,[re.Forward]:s.x[re.Forward]||o.x===1},y:{[re.Backward]:s.y[re.Backward]||o.y===-1,[re.Forward]:s.y[re.Forward]||o.y===1}}},[n,t,r])}function tl(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return Ft(s=>{var o;return t==null?null:(o=r??s)!=null?o:null},[r,t])}function nl(e,t){return c.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,o=s.activators.map(i=>({eventName:i.eventName,handler:t(i.handler,r)}));return[...n,...o]},[]),[e,t])}var Lt;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Lt||(Lt={}));var Pn;(function(e){e.Optimized="optimized"})(Pn||(Pn={}));const jr=new Map;function rl(e,t){let{dragging:n,dependencies:r,config:s}=t;const[o,i]=c.useState(null),{frequency:l,measure:u,strategy:f}=s,h=c.useRef(e),d=w(),p=Mt(d),m=c.useCallback(function(x){x===void 0&&(x=[]),!p.current&&i(b=>b===null?x:b.concat(x.filter(N=>!b.includes(N))))},[p]),v=c.useRef(null),g=Ft(x=>{if(d&&!n)return jr;if(!x||x===jr||h.current!==e||o!=null){const b=new Map;for(let N of e){if(!N)continue;if(o&&o.length>0&&!o.includes(N.id)&&N.rect.current){b.set(N.id,N.rect.current);continue}const S=N.node.current,k=S?new rr(u(S),S):null;N.rect.current=k,k&&b.set(N.id,k)}return b}return x},[e,o,n,d,u]);return c.useEffect(()=>{h.current=e},[e]),c.useEffect(()=>{d||m()},[n,d]),c.useEffect(()=>{o&&o.length>0&&i(null)},[JSON.stringify(o)]),c.useEffect(()=>{d||typeof l!="number"||v.current!==null||(v.current=setTimeout(()=>{m(),v.current=null},l))},[l,d,m,...r]),{droppableRects:g,measureDroppableContainers:m,measuringScheduled:o!=null};function w(){switch(f){case Lt.Always:return!1;case Lt.BeforeDragging:return n;default:return!n}}}function Ts(e,t){return Ft(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function sl(e,t){return Ts(e,t)}function ol(e){let{callback:t,disabled:n}=e;const r=tr(t),s=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return c.useEffect(()=>()=>s?.disconnect(),[s]),s}function cn(e){let{callback:t,disabled:n}=e;const r=tr(t),s=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return c.useEffect(()=>()=>s?.disconnect(),[s]),s}function al(e){return new rr(Ht(e),e)}function Dr(e,t,n){t===void 0&&(t=al);const[r,s]=c.useState(null);function o(){s(u=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=u??n)!=null?f:null}const h=t(e);return JSON.stringify(u)===JSON.stringify(h)?u:h})}const i=ol({callback(u){if(e)for(const f of u){const{type:h,target:d}=f;if(h==="childList"&&d instanceof HTMLElement&&d.contains(e)){o();break}}}}),l=cn({callback:o});return Xe(()=>{o(),e?(l?.observe(e),i?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),i?.disconnect())},[e]),r}function il(e){const t=Ts(e);return Ns(e,t)}const Ir=[];function ll(e){const t=c.useRef(e),n=Ft(r=>e?r&&r!==Ir&&e&&t.current&&e.parentNode===t.current.parentNode?r:nr(e):Ir,[e]);return c.useEffect(()=>{t.current=e},[e]),n}function cl(e){const[t,n]=c.useState(null),r=c.useRef(e),s=c.useCallback(o=>{const i=yn(o.target);i&&n(l=>l?(l.set(i,_n(i)),new Map(l)):null)},[]);return c.useEffect(()=>{const o=r.current;if(e!==o){i(o);const l=e.map(u=>{const f=yn(u);return f?(f.addEventListener("scroll",s,{passive:!0}),[f,_n(f)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),r.current=e}return()=>{i(e),i(o)};function i(l){l.forEach(u=>{const f=yn(u);f?.removeEventListener("scroll",s)})}},[s,e]),c.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,i)=>vt(o,i),De):As(e):De,[e,t])}function kr(e,t){t===void 0&&(t=[]);const n=c.useRef(null);return c.useEffect(()=>{n.current=null},t),c.useEffect(()=>{const r=e!==De;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Yt(e,n.current):De}function ul(e){c.useEffect(()=>{if(!an)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function dl(e,t){return c.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:o}=r;return n[s]=i=>{o(i,t)},n},{}),[e,t])}function Ms(e){return c.useMemo(()=>e?Ti(e):null,[e])}const Ar=[];function fl(e,t){t===void 0&&(t=Ht);const[n]=e,r=Ms(n?de(n):null),[s,o]=c.useState(Ar);function i(){o(()=>e.length?e.map(u=>Is(u)?r:new rr(t(u),u)):Ar)}const l=cn({callback:i});return Xe(()=>{l?.disconnect(),i(),e.forEach(u=>l?.observe(u))},[e]),s}function hl(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return $t(t)?t:e}function pl(e){let{measure:t}=e;const[n,r]=c.useState(null),s=c.useCallback(f=>{for(const{target:h}of f)if($t(h)){r(d=>{const p=t(h);return d?{...d,width:p.width,height:p.height}:p});break}},[t]),o=cn({callback:s}),i=c.useCallback(f=>{const h=hl(f);o?.disconnect(),h&&o?.observe(h),r(h?t(h):null)},[t,o]),[l,u]=Xt(i);return c.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const ml=[{sensor:Ps,options:{}},{sensor:zs,options:{}}],gl={current:{}},Vt={draggable:{measure:Cr},droppable:{measure:Cr,strategy:Lt.WhileDragging,frequency:Pn.Optimized},dragOverlay:{measure:Ht}};class _t extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const vl={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new _t,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Jt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Vt,measureDroppableContainers:Jt,windowRect:null,measuringScheduled:!1},xl={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Jt,draggableNodes:new Map,over:null,measureDroppableContainers:Jt},un=c.createContext(xl),bl=c.createContext(vl);function wl(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new _t}}}function yl(e,t){switch(t.type){case ne.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case ne.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case ne.DragEnd:case ne.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ne.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new _t(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case ne.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const i=new _t(e.droppable.containers);return i.set(n,{...o,disabled:s}),{...e,droppable:{...e.droppable,containers:i}}}case ne.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const o=new _t(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function Sl(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=c.useContext(un),o=kn(r),i=kn(n?.id);return c.useEffect(()=>{if(!t&&!r&&o&&i!=null){if(!Cs(o)||document.activeElement===o.target)return;const l=s.get(i);if(!l)return;const{activatorNode:u,node:f}=l;if(!u.current&&!f.current)return;requestAnimationFrame(()=>{for(const h of[u.current,f.current]){if(!h)continue;const d=mi(h);if(d){d.focus();break}}})}},[r,t,s,i,o]),null}function Cl(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,o)=>o({transform:s,...r}),n):n}function El(e){return c.useMemo(()=>({draggable:{...Vt.draggable,...e?.draggable},droppable:{...Vt.droppable,...e?.droppable},dragOverlay:{...Vt.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function Nl(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const o=c.useRef(!1),{x:i,y:l}=typeof s=="boolean"?{x:s,y:s}:s;Xe(()=>{if(!i&&!l||!t){o.current=!1;return}if(o.current||!r)return;const f=t?.node.current;if(!f||f.isConnected===!1)return;const h=n(f),d=Ns(h,r);if(i||(d.x=0),l||(d.y=0),o.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const p=Rs(f);p&&p.scrollBy({top:d.y,left:d.x})}},[t,i,l,r,n])}const Ls=c.createContext({...De,scaleX:1,scaleY:1});var Ge;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ge||(Ge={}));const Rl=c.memo(function(t){var n,r,s,o;let{id:i,accessibility:l,autoScroll:u=!0,children:f,sensors:h=ml,collisionDetection:d=Di,measuring:p,modifiers:m,...v}=t;const g=c.useReducer(yl,void 0,wl),[w,x]=g,[b,N]=yi(),[S,k]=c.useState(Ge.Uninitialized),D=S===Ge.Initialized,{draggable:{active:R,nodes:M,translate:H},droppable:{containers:q}}=w,$=R!=null?M.get(R):null,G=c.useRef({initial:null,translated:null}),Z=c.useMemo(()=>{var ie;return R!=null?{id:R,data:(ie=$?.data)!=null?ie:gl,rect:G}:null},[R,$]),W=c.useRef(null),[Y,E]=c.useState(null),[y,j]=c.useState(null),I=Mt(v,Object.values(v)),z=ln("DndDescribedBy",i),L=c.useMemo(()=>q.getEnabled(),[q]),F=El(p),{droppableRects:C,measureDroppableContainers:A,measuringScheduled:P}=rl(L,{dragging:D,dependencies:[H.x,H.y],config:F.droppable}),_=tl(M,R),T=c.useMemo(()=>y?An(y):null,[y]),O=Xo(),V=sl(_,F.draggable.measure);Nl({activeNode:R!=null?M.get(R):null,config:O.layoutShiftCompensation,initialRect:V,measure:F.draggable.measure});const U=Dr(_,F.draggable.measure,V),le=Dr(_?_.parentElement:null),ee=c.useRef({activatorEvent:null,active:null,activeNode:_,collisionRect:null,collisions:null,droppableRects:C,draggableNodes:M,draggingNode:null,draggingNodeRect:null,droppableContainers:q,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),K=q.getNodeFor((n=ee.current.over)==null?void 0:n.id),Q=pl({measure:F.dragOverlay.measure}),ce=(r=Q.nodeRef.current)!=null?r:_,Ee=D?(s=Q.rect)!=null?s:U:null,nt=!!(Q.nodeRef.current&&Q.rect),oe=il(nt?null:U),rt=Ms(ce?de(ce):null),Ie=ll(D?K??_:null),ke=fl(Ie),Ye=Cl(m,{transform:{x:H.x-oe.x,y:H.y-oe.y,scaleX:1,scaleY:1},activatorEvent:y,active:Z,activeNodeRect:U,containerNodeRect:le,draggingNodeRect:Ee,over:ee.current.over,overlayNodeRect:Q.rect,scrollableAncestors:Ie,scrollableAncestorRects:ke,windowRect:rt}),qt=T?vt(T,H):null,ir=cl(Ie),qo=kr(ir),Go=kr(ir,[U]),st=vt(Ye,qo),ot=Ee?Ai(Ee,Ye):null,Ct=Z&&ot?d({active:Z,collisionRect:ot,droppableRects:C,droppableContainers:L,pointerCoordinates:qt}):null,lr=Ri(Ct,"id"),[$e,cr]=c.useState(null),Bo=nt?Ye:vt(Ye,Go),Vo=Ii(Bo,(o=$e?.rect)!=null?o:null,U),hn=c.useRef(null),ur=c.useCallback((ie,fe)=>{let{sensor:he,options:Fe}=fe;if(W.current==null)return;const ve=M.get(W.current);if(!ve)return;const pe=ie.nativeEvent,Ae=new he({active:W.current,activeNode:ve,event:pe,options:Fe,context:ee,onAbort(ae){if(!M.get(ae))return;const{onDragAbort:_e}=I.current,ze={id:ae};_e?.(ze),b({type:"onDragAbort",event:ze})},onPending(ae,He,_e,ze){if(!M.get(ae))return;const{onDragPending:Nt}=I.current,qe={id:ae,constraint:He,initialCoordinates:_e,offset:ze};Nt?.(qe),b({type:"onDragPending",event:qe})},onStart(ae){const He=W.current;if(He==null)return;const _e=M.get(He);if(!_e)return;const{onDragStart:ze}=I.current,Et={activatorEvent:pe,active:{id:He,data:_e.data,rect:G}};jt.unstable_batchedUpdates(()=>{ze?.(Et),k(Ge.Initializing),x({type:ne.DragStart,initialCoordinates:ae,active:He}),b({type:"onDragStart",event:Et}),E(hn.current),j(pe)})},onMove(ae){x({type:ne.DragMove,coordinates:ae})},onEnd:at(ne.DragEnd),onCancel:at(ne.DragCancel)});hn.current=Ae;function at(ae){return async function(){const{active:_e,collisions:ze,over:Et,scrollAdjustedTranslate:Nt}=ee.current;let qe=null;if(_e&&Nt){const{cancelDrop:Rt}=I.current;qe={activatorEvent:pe,active:_e,collisions:ze,delta:Nt,over:Et},ae===ne.DragEnd&&typeof Rt=="function"&&await Promise.resolve(Rt(qe))&&(ae=ne.DragCancel)}W.current=null,jt.unstable_batchedUpdates(()=>{x({type:ae}),k(Ge.Uninitialized),cr(null),E(null),j(null),hn.current=null;const Rt=ae===ne.DragEnd?"onDragEnd":"onDragCancel";if(qe){const pn=I.current[Rt];pn?.(qe),b({type:Rt,event:qe})}})}}},[M]),Uo=c.useCallback((ie,fe)=>(he,Fe)=>{const ve=he.nativeEvent,pe=M.get(Fe);if(W.current!==null||!pe||ve.dndKit||ve.defaultPrevented)return;const Ae={active:pe};ie(he,fe.options,Ae)===!0&&(ve.dndKit={capturedBy:fe.sensor},W.current=Fe,ur(he,fe))},[M,ur]),dr=nl(h,Uo);ul(h),Xe(()=>{U&&S===Ge.Initializing&&k(Ge.Initialized)},[U,S]),c.useEffect(()=>{const{onDragMove:ie}=I.current,{active:fe,activatorEvent:he,collisions:Fe,over:ve}=ee.current;if(!fe||!he)return;const pe={active:fe,activatorEvent:he,collisions:Fe,delta:{x:st.x,y:st.y},over:ve};jt.unstable_batchedUpdates(()=>{ie?.(pe),b({type:"onDragMove",event:pe})})},[st.x,st.y]),c.useEffect(()=>{const{active:ie,activatorEvent:fe,collisions:he,droppableContainers:Fe,scrollAdjustedTranslate:ve}=ee.current;if(!ie||W.current==null||!fe||!ve)return;const{onDragOver:pe}=I.current,Ae=Fe.get(lr),at=Ae&&Ae.rect.current?{id:Ae.id,rect:Ae.rect.current,data:Ae.data,disabled:Ae.disabled}:null,ae={active:ie,activatorEvent:fe,collisions:he,delta:{x:ve.x,y:ve.y},over:at};jt.unstable_batchedUpdates(()=>{cr(at),pe?.(ae),b({type:"onDragOver",event:ae})})},[lr]),Xe(()=>{ee.current={activatorEvent:y,active:Z,activeNode:_,collisionRect:ot,collisions:Ct,droppableRects:C,draggableNodes:M,draggingNode:ce,draggingNodeRect:Ee,droppableContainers:q,over:$e,scrollableAncestors:Ie,scrollAdjustedTranslate:st},G.current={initial:Ee,translated:ot}},[Z,_,Ct,ot,M,ce,Ee,C,q,$e,Ie,st]),Qi({...O,delta:H,draggingRect:ot,pointerCoordinates:qt,scrollableAncestors:Ie,scrollableAncestorRects:ke});const Wo=c.useMemo(()=>({active:Z,activeNode:_,activeNodeRect:U,activatorEvent:y,collisions:Ct,containerNodeRect:le,dragOverlay:Q,draggableNodes:M,droppableContainers:q,droppableRects:C,over:$e,measureDroppableContainers:A,scrollableAncestors:Ie,scrollableAncestorRects:ke,measuringConfiguration:F,measuringScheduled:P,windowRect:rt}),[Z,_,U,y,Ct,le,Q,M,q,C,$e,A,Ie,ke,F,P,rt]),Ko=c.useMemo(()=>({activatorEvent:y,activators:dr,active:Z,activeNodeRect:U,ariaDescribedById:{draggable:z},dispatch:x,draggableNodes:M,over:$e,measureDroppableContainers:A}),[y,dr,Z,U,x,z,M,$e,A]);return ye.createElement(Es.Provider,{value:N},ye.createElement(un.Provider,{value:Ko},ye.createElement(bl.Provider,{value:Wo},ye.createElement(Ls.Provider,{value:Vo},f)),ye.createElement(Sl,{disabled:l?.restoreFocus===!1})),ye.createElement(Ei,{...l,hiddenTextDescribedById:z}));function Xo(){const ie=Y?.autoScrollEnabled===!1,fe=typeof u=="object"?u.enabled===!1:u===!1,he=D&&!ie&&!fe;return typeof u=="object"?{...u,enabled:he}:{enabled:he}}}),jl=c.createContext(null),_r="button",Dl="Draggable";function Il(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const o=ln(Dl),{activators:i,activatorEvent:l,active:u,activeNodeRect:f,ariaDescribedById:h,draggableNodes:d,over:p}=c.useContext(un),{role:m=_r,roleDescription:v="draggable",tabIndex:g=0}=s??{},w=u?.id===t,x=c.useContext(w?Ls:jl),[b,N]=Xt(),[S,k]=Xt(),D=dl(i,t),R=Mt(n);Xe(()=>(d.set(t,{id:t,key:o,node:b,activatorNode:S,data:R}),()=>{const H=d.get(t);H&&H.key===o&&d.delete(t)}),[d,t]);const M=c.useMemo(()=>({role:m,tabIndex:g,"aria-disabled":r,"aria-pressed":w&&m===_r?!0:void 0,"aria-roledescription":v,"aria-describedby":h.draggable}),[r,m,g,w,v,h.draggable]);return{active:u,activatorEvent:l,activeNodeRect:f,attributes:M,isDragging:w,listeners:r?void 0:D,node:b,over:p,setNodeRef:N,setActivatorNodeRef:k,transform:x}}const kl="Droppable",Al={timeout:25};function _l(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const o=ln(kl),{active:i,dispatch:l,over:u,measureDroppableContainers:f}=c.useContext(un),h=c.useRef({disabled:n}),d=c.useRef(!1),p=c.useRef(null),m=c.useRef(null),{disabled:v,updateMeasurementsFor:g,timeout:w}={...Al,...s},x=Mt(g??r),b=c.useCallback(()=>{if(!d.current){d.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{f(Array.isArray(x.current)?x.current:[x.current]),m.current=null},w)},[w]),N=cn({callback:b,disabled:v||!i}),S=c.useCallback((M,H)=>{N&&(H&&(N.unobserve(H),d.current=!1),M&&N.observe(M))},[N]),[k,D]=Xt(S),R=Mt(t);return c.useEffect(()=>{!N||!k.current||(N.disconnect(),d.current=!1,N.observe(k.current))},[k,N]),c.useEffect(()=>(l({type:ne.RegisterDroppable,element:{id:r,key:o,disabled:n,node:k,rect:p,data:R}}),()=>l({type:ne.UnregisterDroppable,key:o,id:r})),[r]),c.useEffect(()=>{n!==h.current.disabled&&(l({type:ne.SetDroppableDisabled,id:r,key:o,disabled:n}),h.current.disabled=n)},[r,o,n,l]),{active:i,rect:p,isOver:u?.id===r,node:k,over:u,setNodeRef:D}}const zl=({label:e,value:t})=>{const{attributes:n,listeners:r,setNodeRef:s,transform:o}=Il({id:t}),i=o?{transform:`translate(${o.x}px, ${o.y}px)`}:void 0;return a.jsx(en,{ref:s,style:i,...r,...n,className:"p-2 cursor-grab select-none shadow inline-block w-fit",children:e})},Pl=({id:e,children:t})=>{const{isOver:n,setNodeRef:r}=_l({id:e});return a.jsx("div",{ref:r,className:X("min-h-[40px] min-w-[100px] w-fit border-b border-dashed px-2 py-1 flex items-center justify-center transition-colors",n?"bg-primary/10":"bg-transparent"),children:t})},Tl=({options:e,questions:t,form:n,isRepeatAnswer:r=!1})=>{const[s,o]=c.useState(null),[i,l]=c.useState([]),[u,f]=c.useState([]),h=c.useMemo(()=>e,[e]),d=c.useMemo(()=>t,[t]);c.useEffect(()=>{if(!h?.length){o("Notogri yoki bosh variantlar kiritilgan.");return}if(!d?.length){o("Notogri yoki bosh savollar kiritilgan.");return}l(h),f(d.map(v=>({...v,answer:v.answer||n.getValues(`answers.${parseInt(v.question_number)-1}.answer`)||void 0}))),o(null)},[]);const p=v=>{const{over:g,active:w}=v;if(!g)return;const x=h.find(S=>String(S.value)===String(w.id));if(!x)return;const b=parseInt(g.id)-1,N=u.find(S=>S.question_number===g.id)?.answer;if(N&&!r){const S=h.find(k=>String(k.value)===String(N));S&&!i.some(k=>String(k.value)===String(S.value))&&l(k=>[...k,S])}n.setValue(`answers.${b}.answer`,x.value),f(S=>S.map(k=>k.question_number===g.id?{...k,answer:x.value}:k)),r||l(S=>S.filter(D=>String(D.value)!==String(x.value)))},m=v=>{const g=parseInt(v)-1,w=u.find(x=>x.question_number===v);if(w?.answer&&(n.setValue(`answers.${g}.answer`,""),f(x=>x.map(b=>b.question_number===v?{...b,answer:void 0}:b)),!r)){const x=h.find(b=>String(b.value)===String(w.answer));x&&!i.some(b=>String(b.value)===String(x.value))&&l(b=>[...b,x])}};return s?a.jsx("div",{className:"p-4 text-red-600",children:s}):a.jsx(Rl,{onDragEnd:p,children:a.jsxs("div",{className:"space-y-6 mt-4 mb-6",children:[a.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(v=>a.jsx(zl,{label:v.label,value:v.value},v.value))}),a.jsx("div",{className:"space-y-4",children:u.map(v=>a.jsxs("div",{className:"flex flex-row items-center gap-2 flex-wrap",children:[a.jsx("span",{className:"font-bold",children:v.question_number}),a.jsx("span",{children:v.question_text||""}),a.jsx(Pl,{id:v.question_number,children:v.answer?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:h.find(g=>String(g.value)===String(v.answer))?.label||"?"}),a.jsx("button",{onClick:()=>m(v.question_number),className:"text-destructive hover:text-destructive/70",children:a.jsx(Mr,{size:15})})]}):a.jsx("span",{className:"text-muted-foreground",children:v.question_number})})]},v.question_number))})]})})};var or="Radio",[Ml,Os]=Ot(or),[Ll,Ol]=Ml(or),$s=c.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:o,disabled:i,value:l="on",onCheck:u,form:f,...h}=e,[d,p]=c.useState(null),m=ge(t,w=>p(w)),v=c.useRef(!1),g=d?f||!!d.closest("form"):!0;return a.jsxs(Ll,{scope:n,checked:s,disabled:i,children:[a.jsx(Ce.button,{type:"button",role:"radio","aria-checked":s,"data-state":Gs(s),"data-disabled":i?"":void 0,disabled:i,value:l,...h,ref:m,onClick:bt(e.onClick,w=>{s||u?.(),g&&(v.current=w.isPropagationStopped(),v.current||w.stopPropagation())})}),g&&a.jsx(qs,{control:d,bubbles:!v.current,name:r,value:l,checked:s,required:o,disabled:i,form:f,style:{transform:"translateX(-100%)"}})]})});$s.displayName=or;var Fs="RadioIndicator",Hs=c.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...s}=e,o=Ol(Fs,n);return a.jsx(Or,{present:r||o.checked,children:a.jsx(Ce.span,{"data-state":Gs(o.checked),"data-disabled":o.disabled?"":void 0,...s,ref:t})})});Hs.displayName=Fs;var $l="RadioBubbleInput",qs=c.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...s},o)=>{const i=c.useRef(null),l=ge(i,o),u=Gn(n),f=Bn(t);return c.useEffect(()=>{const h=i.current;if(!h)return;const d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(u!==n&&m){const v=new Event("click",{bubbles:r});m.call(h,n),h.dispatchEvent(v)}},[u,n,r]),a.jsx(Ce.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});qs.displayName=$l;function Gs(e){return e?"checked":"unchecked"}var Fl=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],dn="RadioGroup",[Hl,uu]=Ot(dn,[Hr,Os]),Bs=Hr(),Vs=Os(),[ql,Gl]=Hl(dn),Us=c.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:o,required:i=!1,disabled:l=!1,orientation:u,dir:f,loop:h=!0,onValueChange:d,...p}=e,m=Bs(n),v=qr(f),[g,w]=qn({prop:o,defaultProp:s??null,onChange:d,caller:dn});return a.jsx(ql,{scope:n,name:r,required:i,disabled:l,value:g,onValueChange:w,children:a.jsx(va,{asChild:!0,...m,orientation:u,dir:v,loop:h,children:a.jsx(Ce.div,{role:"radiogroup","aria-required":i,"aria-orientation":u,"data-disabled":l?"":void 0,dir:v,...p,ref:t})})})});Us.displayName=dn;var Ws="RadioGroupItem",Ks=c.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...s}=e,o=Gl(Ws,n),i=o.disabled||r,l=Bs(n),u=Vs(n),f=c.useRef(null),h=ge(t,f),d=o.value===s.value,p=c.useRef(!1);return c.useEffect(()=>{const m=g=>{Fl.includes(g.key)&&(p.current=!0)},v=()=>p.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",v)}},[]),a.jsx(xa,{asChild:!0,...l,focusable:!i,active:d,children:a.jsx($s,{disabled:i,required:o.required,checked:d,...u,...s,name:o.name,ref:h,onCheck:()=>o.onValueChange(s.value),onKeyDown:bt(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:bt(s.onFocus,()=>{p.current&&f.current?.click()})})})});Ks.displayName=Ws;var Bl="RadioGroupIndicator",Xs=c.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,s=Vs(n);return a.jsx(Hs,{...s,...r,ref:t})});Xs.displayName=Bl;var Ys=Us,Js=Ks,Vl=Xs;const Ut=c.forwardRef(({className:e,...t},n)=>a.jsx(Ys,{className:X("grid gap-2",e),...t,ref:n}));Ut.displayName=Ys.displayName;const Tn=c.forwardRef(({className:e,...t},n)=>a.jsx(Js,{ref:n,className:X("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:a.jsx(Vl,{className:"flex items-center justify-center",children:a.jsx(wa,{className:"h-3 w-3 fill-primary"})})}));Tn.displayName=Js.displayName;const Ul=({control:e,name:t,label:n,helperText:r,required:s,className:o,rules:i,floatingError:l,...u})=>{const f=n&&a.jsxs(Ke,{className:"my-3",children:[n," ",s&&a.jsx("span",{className:"text-red-600",children:"*"})]});return t&&e?a.jsx(Ne,{control:e,name:t,rules:i,render:({field:h})=>a.jsxs(Se,{children:[f,a.jsx(Re,{children:a.jsx("input",{autoComplete:"off",type:"text",className:X("placeholder:text-primary text-center h-7","bg-transparent border border-ring rounded-md px-2 py-1","focus:outline-none focus:ring-1 focus:ring-ring","inline-block mx-2 my-2"),...u,...h})}),r&&a.jsx(Le,{children:r}),a.jsx(ut,{className:X(l)})]})}):a.jsxs(a.Fragment,{children:[f,a.jsx(ya,{...u,className:Pr(["mt-2",o])}),a.jsx(Le,{children:r})]})},Qe=({control:e,name:t,label:n,rules:r,helperText:s,value:o,...i})=>t&&e?a.jsx(Ne,{control:e,name:t,rules:r,render:({field:l})=>{const u=()=>{l.onChange(o)};return a.jsxs(Se,{className:"flex flex-row items-center space-x-3",children:[a.jsx(Re,{children:a.jsx(Tn,{value:o,checked:l.value===o,onClick:u,onMouseDown:f=>{f.stopPropagation()},...i})}),a.jsxs("div",{className:"space-y-1 leading-none cursor-pointer",onClick:u,children:[n&&a.jsx(Ke,{className:"cursor-pointer select-text",style:{userSelect:"text",WebkitUserSelect:"text"},children:n}),s&&a.jsx(Le,{children:s})]})]})}}):a.jsxs("div",{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[a.jsx(Tn,{value:o,...i}),a.jsxs("div",{className:"space-y-1 leading-none",children:[n&&a.jsx(Ke,{children:n}),a.jsx(Le,{children:s})]})]}),Wl=({control:e,name:t,label:n,rules:r,helperText:s,options:o,dir:i,id:l,className:u,...f})=>t&&e?a.jsx(Ne,{control:e,name:t,rules:r,render:({field:h})=>a.jsxs(Se,{className:`flex flex-col space-y-2 ${u}`,id:l,children:[n&&a.jsx(Ke,{children:n}),a.jsx(Re,{children:a.jsxs(En,{onValueChange:h.onChange,value:h.value,dir:i,...f,children:[a.jsx(Nn,{children:a.jsx(Rn,{placeholder:"Select"})}),a.jsx(jn,{children:o?.map(d=>a.jsx(Ze,{value:d.value,children:d.label},d.value))})]})}),s&&a.jsx(Le,{children:s})]})}):a.jsxs("div",{className:`flex flex-col space-y-2 rounded-md border p-4 ${u}`,id:l,children:[a.jsx(Ke,{children:n}),a.jsxs(En,{dir:i,...f,children:[a.jsx(Nn,{children:a.jsx(Rn,{placeholder:"Select..."})}),a.jsx(jn,{children:o?.map(h=>a.jsx(Ze,{value:h.value,children:h.label},h.value))})]}),a.jsx(Le,{children:s})]}),Kl=({number:e,type:t,form:n,options:r,questions:s})=>{const o=Number(e)-1;return t===ue.SENTENCE_COMPLETION||t===ue.SHORT_ANSWER||t===ue.SUMMARY_COMPLETION||t===ue.DIAGRAM_LABEL?a.jsx(Ul,{id:e,control:n.control,name:`answers.${o}.answer`,type:"text"}):t===ue.TRUE_FALSE_NOT_GIVEN?a.jsx(Ne,{control:n.control,name:`answers.${o}.answer`,render:({field:i})=>a.jsxs(Se,{className:"my-5",children:[a.jsx(Re,{children:a.jsxs(Ut,{value:i.value||"",onValueChange:i.onChange,className:"gap-4",children:[a.jsx(Qe,{control:n.control,name:`answers.${o}.answer`,value:"TRUE",id:e,label:"TRUE"}),a.jsx(Qe,{control:n.control,name:`answers.${o}.answer`,value:"FALSE",id:e,label:"FALSE"}),a.jsx(Qe,{control:n.control,name:`answers.${o}.answer`,value:"NOT GIVEN",id:e,label:"NOT GIVEN"})]})}),a.jsx(ut,{})]})}):t===ue.YES_NO_NOT_GIVEN?a.jsx(Ne,{control:n.control,name:`answers.${o}.answer`,render:({field:i})=>a.jsxs(Se,{className:"my-5",children:[a.jsx(Re,{children:a.jsxs(Ut,{value:i.value||"",onValueChange:i.onChange,className:"gap-4",children:[a.jsx(Qe,{control:n.control,name:`answers.${o}.answer`,value:"YES",id:e,label:"YES"}),a.jsx(Qe,{control:n.control,name:`answers.${o}.answer`,value:"NO",id:e,label:"NO"}),a.jsx(Qe,{control:n.control,name:`answers.${o}.answer`,value:"NOT GIVEN",id:e,label:"NOT GIVEN"})]})}),a.jsx(ut,{})]})}):t===ue.MULTIPLE_CHOICE?a.jsx(Ne,{control:n.control,name:`answers.${o}.answer`,render:({field:i})=>a.jsxs(Se,{className:"my-5",children:[a.jsx(Re,{children:a.jsx(Ut,{value:i.value||"",onValueChange:i.onChange,className:"gap-4",children:r?.map(l=>a.jsx(Qe,{control:n.control,name:`answers.${o}.answer`,value:l.value,id:e,label:`${l.value}) ${l.label}`},l.value))})}),a.jsx(ut,{})]})}):t===ue.MATCHING_INFORMATION?a.jsxs("div",{className:"space-y-8",children:[a.jsxs(dt,{children:[a.jsx(ft,{children:a.jsxs(xe,{children:[a.jsx(Pe,{}),r?.map(i=>a.jsx(Pe,{children:i.value},i.value))]})}),a.jsx(ht,{children:s.map((i,l)=>a.jsxs(xe,{children:[a.jsxs(be,{children:[i?.question_number,". ",i?.question_text]}),r?.map(u=>a.jsx(be,{children:a.jsx(Ne,{control:n.control,name:`answers.${l}.answer`,render:({field:f})=>a.jsxs(Se,{className:"flex items-center space-x-2",children:[a.jsx(Re,{children:a.jsx("input",{type:"radio",onChange:()=>f.onChange(u.value),name:`${i.question_number-1}`,value:u.value,id:`${i.question_number}`,className:`h-4 w-4 rounded-full border border-primary appearance-none 
                                checked:bg-white 
                                relative 
                                checked:after:content-[''] 
                                checked:after:block 
                                checked:after:w-2.5 checked:after:h-2.5 
                                checked:after:rounded-full 
                                checked:after:bg-primary 
                                checked:after:mx-auto checked:after:my-auto 
                                checked:after:absolute checked:after:inset-0
                                disabled:cursor-not-allowed disabled:opacity-50`})}),a.jsx(Ke,{htmlFor:`${e}-${l}-${u.value}`}),a.jsx(ut,{})]})})},u.value))]},l))})]}),a.jsxs(dt,{children:[a.jsx(ft,{children:a.jsx(xe,{children:a.jsx(Pe,{colSpan:2,children:"First invented or used by"})})}),a.jsx(ht,{children:r?.map((i,l)=>a.jsxs(xe,{children:[a.jsx(be,{className:"w-[50px]",children:i.value}),a.jsx(be,{children:i.label})]},l))})]})]}):t===ue.MATCHING_HEADINGS?a.jsx(Wl,{control:n.control,name:`answers.${o}.answer`,id:e,className:"mx-2 my-2",options:Te.isEmpty(r)?[]:r?.map(i=>({label:i.value,value:i.value}))}):null},Mn=({htmlString:e,form:t,className:n="",enabledHighlight:r=!0,storageKey:s})=>{const o=c.useRef(null),[i,l]=c.useState(null),[u,f]=c.useState(null),[h,d]=c.useState(null),p=c.useRef(0),m=c.useRef(null),v=Fr({control:t.control,name:"answers"}),[g,w]=c.useState(e),x=c.useRef(!1),b=()=>Date.now().toString()+Math.random().toString(36).slice(2),N=E=>{if(E instanceof HTMLElement){const y=E.tagName.toLowerCase();if(["input","button","textarea","select"].includes(y))return!0;if(y==="label"||E.closest("label"))return!1;if(E.closest(".FormControl"))return!E.closest("label, .FormLabel, [role='label']");if(E.closest(".FormItem, .FormLabel"))return!1}if(E.nodeType===Node.TEXT_NODE&&E.parentElement){const y=E.parentElement;return y.tagName.toLowerCase()==="label"||y.closest("label, .FormLabel, [role='label']")?!1:y.closest(".FormControl")?!y.closest("label, .FormLabel"):(y.closest(".FormItem"),!1)}return!1},S=(E,y)=>{try{if(E.collapsed||N(E.startContainer)||N(E.endContainer))return;if(E.startContainer.nodeType===Node.TEXT_NODE&&E.startOffset>0){const z=E.startContainer.splitText(E.startOffset);E.setStart(z,0)}E.endContainer.nodeType===Node.TEXT_NODE&&E.endOffset<E.endContainer.textContent.length&&E.endContainer.splitText(E.endOffset);const j=E.extractContents(),I=document.createElement("span");I.className="highlight",I.dataset.highlightId=y,I.appendChild(j),E.insertNode(I),I.parentNode?.normalize(),s&&o.current&&setTimeout(()=>{if(o.current)try{localStorage.setItem(`highlights_${s}`,o.current.innerHTML)}catch(z){console.warn("Failed to save highlights:",z)}},0)}catch(j){console.warn("Error applying highlight:",j)}},k=E=>{if(!o.current)return[];const y=[],j=document.createTreeWalker(o.current,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,{acceptNode(z){return N(z)?NodeFilter.FILTER_REJECT:E.intersectsNode(z)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});let I=j.nextNode();for(;I;)y.push(I),I=j.nextNode();return y},D=()=>{if(!r||!i)return;const E=b(),y=i.cloneRange(),j=k(y);j.length===0?S(y,E):j.forEach(I=>{if(I.nodeType===Node.TEXT_NODE){const z=document.createRange();z.selectNodeContents(I),y.comparePoint(I,0)<0&&z.setStart(y.startContainer,y.startOffset),y.comparePoint(I,I.textContent.length)>0&&z.setEnd(y.endContainer,y.endOffset),z.collapsed||S(z,E)}}),l(null),f(null),d(null)},R=c.useCallback(()=>{r&&(m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{const E=window.getSelection();if(E&&E.rangeCount>0&&o.current?.contains(E.anchorNode)){const y=E.getRangeAt(0),j=E.toString().trim();if(N(y.startContainer)||N(y.endContainer)){l(null),d(null),f(null);return}if(!y.collapsed&&j.length>0){const I=y.getBoundingClientRect(),z=y.commonAncestorContainer instanceof HTMLElement?y.commonAncestorContainer:y.commonAncestorContainer.parentElement;z&&z.classList?.contains("highlight")?(d(z),l(null)):(d(null),l(y));const L=window.innerWidth,F=200,C=50;let A=I.left+window.scrollX+I.width/2;A+F/2>L+window.scrollX?A=L+window.scrollX-F/2-10:A-F/2<window.scrollX&&(A=window.scrollX+F/2+10);let P=I.top+window.scrollY-C-35;P<window.scrollY&&(P=I.bottom+window.scrollY+35),f({x:A,y:P,width:F})}else l(null),d(null),f(null)}else l(null),d(null),f(null)},150))},[r]),M=c.useCallback(E=>{const y=E.target;if(y){const I=y.tagName?.toLowerCase();if(["input","button","textarea","select"].includes(I))return;if(I==="label"||y.closest("label, .FormLabel")){const z=Date.now();if(z-p.current<300)return;p.current=z,R();return}if(y.closest(".FormControl")){if(y.closest("label, .FormLabel")){const z=Date.now();if(z-p.current<300)return;p.current=z,R();return}return}if(y.closest(".FormItem")){const z=Date.now();if(z-p.current<300)return;p.current=z,R();return}}const j=Date.now();j-p.current<300||(p.current=j,R())},[R]),H=c.useCallback(E=>{const y=E.target;if(y){const j=y.tagName?.toLowerCase();if(["input","button","textarea","select"].includes(j))return;if(j==="label"||y.closest("label, .FormLabel")){R();return}if(y.closest(".FormControl")){if(y.closest("label, .FormLabel")){R();return}return}if(y.closest(".FormItem")){R();return}}R()},[R]);c.useEffect(()=>{if(!r)return;document.addEventListener("mouseup",M),document.addEventListener("dblclick",H);const E=y=>{o.current?.contains(y.target)||(d(null),f(null))};return document.body.addEventListener("click",E),()=>{document.removeEventListener("mouseup",M),document.removeEventListener("dblclick",H),document.body.removeEventListener("click",E),m.current&&clearTimeout(m.current)}},[M,H,r]);const q=E=>{E.stopPropagation();const y=E.currentTarget;d(y),l(null);const j=y.getBoundingClientRect(),I=window.innerWidth,z=200,L=50;let F=j.left+window.scrollX+j.width/2;F+z/2>I+window.scrollX?F=I+window.scrollX-z/2-10:F-z/2<window.scrollX&&(F=window.scrollX+z/2+10);let C=j.top+window.scrollY-L-35;C<window.scrollY&&(C=j.bottom+window.scrollY+35),f({x:F,y:C,width:z})},$=()=>{if(r){try{if(h){const E=h,y=E.parentNode;if(y){for(;E.firstChild;)y.insertBefore(E.firstChild,E);y.removeChild(E),y.normalize()}}else if(i&&!h){const E=i.cloneRange();if(!o.current)return;const y=[],j=document.createTreeWalker(o.current,NodeFilter.SHOW_ELEMENT,{acceptNode(z){return z instanceof HTMLElement&&z.classList.contains("highlight")&&E.intersectsNode(z)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});let I=j.nextNode();for(;I;)y.push(I),I=j.nextNode();y.forEach(z=>{const L=z.parentNode;if(L){for(;z.firstChild;)L.insertBefore(z.firstChild,z);L.removeChild(z),L.normalize()}})}s&&o.current&&setTimeout(()=>{if(o.current)try{localStorage.setItem(`highlights_${s}`,o.current.innerHTML)}catch(E){console.warn("Failed to save highlights:",E)}},0)}catch(E){console.warn("Error clearing highlight:",E)}l(null),d(null),f(null)}},G=E=>{const y=window.getSelection();y&&y.rangeCount>0&&y.removeAllRanges()};c.useEffect(()=>{w(e),x.current=!1},[e]),c.useEffect(()=>{if(s&&o.current&&!x.current)try{const E=localStorage.getItem(`highlights_${s}`);E?setTimeout(()=>{if(o.current){const y=document.createElement("div");y.innerHTML=E;const j=y.querySelectorAll(".highlight");j.length>0&&j.forEach(I=>{const z=I.getAttribute("data-highlight-id"),L=I.textContent;if(L&&o.current){const F=document.createTreeWalker(o.current,NodeFilter.SHOW_TEXT,null);let C;for(;C=F.nextNode();){const P=(C.textContent||"").indexOf(L);if(P!==-1&&C.parentElement&&!C.parentElement.classList.contains("highlight"))try{const _=document.createRange();_.setStart(C,P),_.setEnd(C,P+L.length);const T=document.createElement("span");T.className="highlight",T.dataset.highlightId=z||Date.now().toString();const O=_.extractContents();T.appendChild(O),_.insertNode(T);break}catch{}}}})}x.current=!0},150):x.current=!0}catch(E){console.warn("Failed to restore highlights:",E),x.current=!0}},[s,g]);const Z=typeof g=="string"&&g.trim().length>0?g:e;let W=-1;const Y=na(Z,{replace:E=>{if(E instanceof zt.Element){if(E.name==="img"&&E.attribs){const{src:y,alt:j,style:I,className:z}=E.attribs;let L={};return I&&I.split(";").forEach(F=>{const[C,A]=F.split(":").map(P=>P.trim());if(C&&A){const P=C.replace(/-([a-z])/g,_=>_[1].toUpperCase());L[P]=A}}),a.jsx(ra,{src:y||"",alt:j||"",style:L,className:z||""},y||Math.random().toString())}if(E.name==="span"&&E.attribs?.class?.includes("highlight"))return c.createElement("span",{...E.attribs,onClick:q,style:{cursor:"pointer"},key:E.attribs["data-highlight-id"]||void 0},zt.domToReact(E.children));if(E.name==="question-input"){const{attribs:y}=E,j=y["data-question-number"]??"",I=y["data-question-type"]??"";let z=[],L=[];try{z=JSON.parse(y["data-question-options"]||"[]"),L=JSON.parse(y["data-question"]||"[]")}catch(C){return console.warn("Error parsing question-input attributes:",C),a.jsx("span",{className:"text-destructive",children:"Invalid question input"})}if(!j||!I)return console.warn("Missing question-number or question-type:",y),a.jsx("span",{className:"text-destructive",children:"Invalid question input"});const F=a.jsx(Kl,{number:j,type:I,form:t,options:z,questions:L});return I===ue.TRUE_FALSE_NOT_GIVEN||I===ue.YES_NO_NOT_GIVEN||I===ue.MULTIPLE_CHOICE?a.jsx("div",{id:`question-${j}`,style:{margin:"8px 0",userSelect:"text"},className:"select-text",children:F},j):a.jsx("span",{id:`question-${j}`,style:{display:"inline-block",minWidth:150},children:F},j)}if(E.name==="list-selection-tegs"){const{attribs:y}=E;let j=[],I=[];const z=y.question_type||"";try{j=JSON.parse(y.question_numbers||"[]"),I=JSON.parse(y["data-options"]||"[]")}catch(F){return console.warn("Error parsing list-selection-tegs attributes:",F),a.jsx("span",{className:"text-destructive",children:"Invalid list selection tags"})}if(!j.length||!I.length||z!==ue.LIST_SELECTION)return console.warn("Invalid list-selection-tegs attributes:",y),a.jsx("span",{className:"text-destructive",children:"Invalid list selection tags"});const L=I.map(F=>({value:F.value,label:F.label||F.value,id:`sharedAnswers_${j.join("_")}_${F.value}`}));return a.jsx("div",{className:"my-6",children:a.jsx(di,{control:t.control,name:`sharedAnswers_${j.join("_")}`,options:L,maxSelections:j.length,orientation:"vertical",className:"w-full",onValueChange:F=>{j.forEach((C,A)=>{const P=parseInt(C)-1;t.setValue(`answers.${P}.answer`,F[A]||"")})}})},j.join("_"))}if(E.name==="drag-drop-tegs"){const{attribs:y}=E,j=!!y.repeat_answer;let I=[],z=[];try{I=JSON.parse(y["data-options"]||"[]"),z=JSON.parse(y["data-questions"]||"[]")}catch(L){return console.warn("Error parsing drag-drop-tegs attributes:",L),a.jsx("span",{className:"text-destructive",children:"Invalid drag-drop tags"})}return a.jsx(Tl,{options:I,questions:z,form:t,isRepeatAnswer:j})}if(E.name==="table-tegs"){const{attribs:y}=E;let j=[],I=[];const z=y.table_name||"";try{j=JSON.parse(y["data-options"]||"[]"),I=JSON.parse(y["data-questions"]||"[]")}catch(L){return console.warn("Error parsing table-tegs attributes:",L),a.jsx("span",{className:"text-destructive",children:"Invalid table tags"})}return a.jsxs("div",{className:"space-y-8 my-8",children:[a.jsxs(dt,{className:"selectable-table",children:[a.jsx(ft,{children:a.jsxs(xe,{children:[a.jsx(Pe,{}),j?.map(L=>a.jsx(Pe,{children:L.value},L.value))]})}),a.jsx(ht,{children:I.map(L=>{const F=parseInt(String(L.question_number),10);if(Number.isNaN(F)||F<=0)return console.warn("Invalid question number in table-tegs:",L.question_number),null;const C=F-1,A=v?.[C]?.answer??"";return a.jsxs(xe,{id:`question-${L.question_number}`,children:[a.jsxs(be,{className:"question-text-cell",children:[L?.question_number,". ",L?.question_text]}),j?.map(P=>a.jsx(be,{children:a.jsx(Ne,{control:t.control,name:`answers.${C}.answer`,render:({field:_})=>{const T=O=>{O.stopPropagation(),_.onChange(P.value)};return a.jsx(Se,{className:"flex items-center space-x-2",children:a.jsx(Re,{children:a.jsx("input",{type:"radio",onClick:T,onChange:O=>{O.target.checked&&_.onChange(P.value)},checked:A===P.value,name:`table_tegs_question_${L.question_number}`,value:P.value,id:`${L.question_number}_${P.value}_table`,className:`h-4 w-4 rounded-full border border-primary appearance-none
                                            checked:bg-white
                                            relative
                                            checked:after:content-['']
                                            checked:after:block
                                            checked:after:w-2.5 checked:after:h-2.5
                                            checked:after:rounded-full
                                            checked:after:bg-primary
                                            checked:after:mx-auto checked:after:my-auto
                                            checked:after:absolute checked:after:inset-0`})})})}})},P.value))]},`table-tegs-${L.question_number}`)})})]}),a.jsxs(dt,{children:[a.jsx(ft,{children:a.jsx(xe,{children:a.jsx(Pe,{colSpan:2,children:z})})}),a.jsx(ht,{children:j?.map(L=>a.jsxs(xe,{children:[a.jsx(be,{className:"w-[50px]",children:L.value}),a.jsx(be,{children:L.label})]},L.value))})]})]})}if(E.name==="table-tegs-input"){const{attribs:y}=E;let j=[],I=[];const z=y.table_name||"";try{j=JSON.parse(y["data-options"]||"[]"),I=JSON.parse(y["data-questions"]||"[]")}catch(C){return console.warn("Error parsing table-tegs-input attributes:",C),a.jsx("span",{className:"text-destructive",children:"Invalid table input tags"})}const L=y.repeat_answer!=="False",F=new Map(I.map(C=>{const A=parseInt(String(C.question_number),10);if(Number.isNaN(A)||A<=0)return[String(C.question_number),void 0];const P=A-1;return[String(C.question_number),v?.[P]?.answer??""]}));return a.jsxs("div",{className:"space-y-8 my-8",children:[a.jsxs(dt,{className:"selectable-table",children:[a.jsx(ft,{children:a.jsxs(xe,{children:[a.jsx(Pe,{}),j?.map(C=>a.jsx(Pe,{children:C.value},C.value))]})}),a.jsx(ht,{children:I.map(C=>{const A=parseInt(String(C.question_number),10);if(Number.isNaN(A)||A<=0)return console.warn("Invalid question number in table-tegs-input:",C.question_number),null;const P=A-1,_=String(C.question_number),T=F.get(_)??"";return a.jsxs(xe,{id:`question-${C.question_number}`,children:[a.jsxs(be,{className:"question-text-cell",children:[C?.question_number,". ",C?.question_text]}),j?.map(O=>{const V=O.value,U=T===V,ee=!L&&Array.from(F.entries()).some(([K,Q])=>K!==_&&Q&&String(Q).trim()!==""&&Q===V)&&!U;return a.jsx(be,{children:a.jsx(Ne,{control:t.control,name:`answers.${P}.answer`,render:({field:K})=>{const Q=ce=>{ce.stopPropagation(),ee||K.onChange(V)};return a.jsxs(Se,{className:"flex items-center space-x-2",children:[a.jsx(Re,{children:a.jsx("input",{type:"radio",onClick:Q,onChange:ce=>{ce.target.checked&&!ee&&K.onChange(V)},checked:U,name:`table_tegs_input_question_${C.question_number}`,value:V,id:`${C.question_number}_${V}_input`,disabled:ee,className:`h-4 w-4 rounded-full border border-primary appearance-none
                          checked:bg-white
                          relative
                          checked:after:content-['']
                          checked:after:block
                          checked:after:w-2.5 checked:after:h-2.5
                          checked:after:rounded-full
                          checked:after:bg-primary
                          checked:after:mx-auto checked:after:my-auto
                          checked:after:absolute checked:after:inset-0
                          disabled:cursor-not-allowed disabled:opacity-50`})}),a.jsx(Ke,{})]})}})},O.value)})]},`table-tegs-input-${C.question_number}`)})})]}),j?.length>0&&z&&z!=="List"&&a.jsxs(dt,{className:"selectable-table",children:[a.jsx(ft,{children:a.jsx(xe,{children:a.jsx(Pe,{colSpan:2,children:z||"Options"})})}),a.jsx(ht,{children:j.map(C=>a.jsxs(xe,{children:[a.jsx(be,{className:"w-[50px]",children:C.value}),a.jsx(be,{children:C.label})]},C.value))})]})]})}if(E.name==="drag-drop-matching-sentence-endings")return W+=1,a.jsx(Yl,{blockKey:`drag-drop-${W}`,element:E,form:t,onPreventSelection:G},`drag-drop-${W}`)}}});return a.jsxs(a.Fragment,{children:[a.jsx("style",{children:`
        .highlight {
          background-color: #fde68a;
          transition: background-color 0.2s;
        }
        .highlight:hover {
          background-color: #fad980;
        }
        .drag-drop-container {
          min-height: 40px;
        }
        input, button, [draggable] {
          pointer-events: auto;
          user-select: none;
        }
        question-input, list-selection-tegs, drag-drop-tegs, table-tegs, table-tegs-input, drag-drop-matching-sentence-endings, drag-drop-sentence-input {
          user-select: text;
        }
        .selectable-table {
          user-select: text;
        }
        .selectable-table .question-text-cell {
          user-select: text;
          cursor: text;
        }
        .selectable-table td, .selectable-table th {
          user-select: text;
        }
        /* Ensure all text elements are selectable for highlighting */
        p, div, span, h1, h2, h3, h4, h5, h6, li, td, th {
          user-select: text;
          -webkit-user-select: text;
          -moz-user-select: text;
          -ms-user-select: text;
        }
        /* Ensure labels and option text are selectable */
        label, .FormLabel, [role="label"] {
          user-select: text !important;
          -webkit-user-select: text !important;
          -moz-user-select: text !important;
          -ms-user-select: text !important;
          cursor: text;
        }
        /* Ensure FormItem allows text selection (contains option labels) */
        .FormItem {
          user-select: text;
          -webkit-user-select: text;
        }
        /* But keep inputs non-selectable */
        .FormItem input[type="radio"],
        .FormItem input[type="checkbox"],
        .FormControl input {
          user-select: none !important;
          -webkit-user-select: none !important;
        }
        /* Ensure question containers are highlightable */
        [id^="question-"] {
          user-select: text !important;
          -webkit-user-select: text !important;
        }
      `}),a.jsx("div",{ref:o,className:`w-full text-sm text-[--foreground] ${n}
          [&_table]:w-full [&_table]:border-collapse
          [&_td]:border [&_td]:border-[--border] [&_td]:p-2
          [&_th]:border [&_th]:border-[--border] [&_th]:p-2
          [&_p]:mb-2 [&_p]:text-[--foreground]
          [&_h3]:text-lg [&_h3]:font-semibold [&_h3]:mb-2 [&_h3]:text-[--foreground]
          [&_strong]:font-bold [&_em]:italic select-text`,style:{userSelect:"text"},children:Y}),r&&u&&(i||h)&&a.jsxs("div",{className:"absolute z-50 flex gap-2 rounded-lg border bg-muted p-2 shadow-lg -translate-x-1/2",style:{left:u.x,top:u.y},children:[!h&&a.jsxs(Ue,{size:"sm",onClick:D,children:[a.jsx(sa,{className:"mr-1 h-4 w-4"})," Highlight"]}),a.jsxs(Ue,{size:"sm",variant:"destructive",onClick:$,disabled:!h&&!i,children:[a.jsx(oa,{className:"mr-1 h-4 w-4"})," Clear"]})]})]})},Xl=e=>{const t=[],n=r=>{r?.forEach(s=>{if(s instanceof zt.Element){if(s.name==="drag-drop-sentence-input"){const o=s.attribs["data-question-number"];o&&t.push(o)}s.children&&s.children.length&&n(s.children)}})};return n(e||[]),t},Yl=({element:e,form:t,blockKey:n,onPreventSelection:r})=>{const s=c.useMemo(()=>{try{return JSON.parse(e.attribs["data-options"]||"[]")}catch(b){return console.error("Invalid data-options JSON:",b),[]}},[e]);if(!s.length)return a.jsx("span",{className:"text-destructive block my-4",children:"No drag drop options"});const o=e.attribs["data-repeat"]==="True",i=c.useMemo(()=>Xl(e.children),[e.children]),[l,u]=c.useState({});c.useEffect(()=>{const b=t.getValues("answers")||[],N={};i.forEach(S=>{const k=parseInt(S,10)-1,D=b?.[k]?.answer;D&&(N[S]=D)}),u(S=>{const k=JSON.stringify(S),D=JSON.stringify(N);return k===D?S:N})},[t,i]);const f=c.useMemo(()=>o?new Set:new Set(Object.values(l).filter(b=>b?String(b).trim().length>0:!1)),[l,o]),h=c.useCallback((b,N)=>{u(k=>{const D={...k};return o||Object.entries(D).forEach(([R,M])=>{if(R!==b&&M===N){D[R]="";const H=parseInt(R,10)-1;t.setValue(`answers.${H}.answer`,"")}}),D[b]=N,D});const S=parseInt(b,10)-1;t.setValue(`answers.${S}.answer`,N)},[t,o]),d=c.useCallback(b=>{u(S=>{if(!S[b])return S;const k={...S};return k[b]="",k});const N=parseInt(b,10)-1;t.setValue(`answers.${N}.answer`,"")},[t]),p=c.useCallback((b,N)=>{b.dataTransfer.setData("text/plain",N),b.currentTarget.style.opacity="0.5",r?.(b)},[r]),m=c.useCallback(b=>{b.currentTarget.style.opacity="1"},[]),v=c.useCallback((b,N)=>{b.preventDefault();const S=b.dataTransfer.getData("text/plain");S&&(h(N,S),b.currentTarget.style.backgroundColor="")},[h]),g=c.useCallback(b=>{b.preventDefault(),b.currentTarget.style.backgroundColor="#e0f7fa"},[]),w=c.useCallback(b=>{b.currentTarget.style.backgroundColor=""},[]),x=c.useMemo(()=>zt.domToReact(e.children,{replace:b=>{if(b instanceof zt.Element&&b.name==="drag-drop-sentence-input"){const N=b.attribs,S=N["data-question-number"]??"",k=N["data-question-type"]??"";if(!S||k!=="matching_sentence_endings"&&k!=="matching_headings")return a.jsx("span",{className:"text-destructive",children:"Invalid drag-drop input"},`${n}-invalid`);const D=l[S],R=s.find(M=>M.value===D)?.label||D;return a.jsx("span",{onDrop:M=>v(M,S),onDragOver:g,onDragLeave:w,className:"inline-block min-w-[150px] border-2 border-gray-400 border-dashed p-1 my-1 mx-2 rounded-md text-center align-middle","data-question-number":S,children:D?a.jsxs("span",{className:"inline-flex items-center justify-between gap-2 w-full",children:[a.jsx("span",{className:"font-semibold",children:R}),a.jsx("button",{type:"button",onClick:()=>d(S),onMouseDown:r,className:"text-destructive hover:text-destructive/70",children:a.jsx(Mr,{size:16})})]}):a.jsx("span",{className:"text-muted-foreground",children:S})},`${n}-${S}`)}return b}}),[e.children,l,v,w,g,d,r,n,s]);return a.jsxs("span",{className:"block my-6",children:[x,a.jsx("span",{className:"block mt-6",children:a.jsx("div",{className:"flex flex-wrap gap-3",children:s.map(b=>{const N=!o&&f.has(b.value);return a.jsx("div",{draggable:!0,onDragStart:S=>p(S,b.value),onDragEnd:m,className:`p-2 rounded-lg min-w-[150px] text-center cursor-move transition-colors ${N?"bg-muted text-muted-foreground opacity-70":"bg-primary text-primary-foreground hover:bg-muted-foreground"}`,children:b.label},`${n}-${b.value}`)})})})]})},Jl=({part:e,form:t,testId:n})=>{const{user:r}=Zt(),s=r?.id||"guest",o=n&&e.id?`listening-${s}-${n}-${e.id}-script`:void 0,i=n&&e.id?`listening-${s}-${n}-${e.id}-questions`:void 0;return a.jsx("div",{className:"h-[calc(100vh-232px)]",children:e.is_script?a.jsx(Yn,{leftContent:a.jsx(Hn,{className:"h-full overflow-y-auto p-6 text-sm",htmlString:e.audioscript,storageKey:o}),rightContent:a.jsx("div",{className:"h-full overflow-y-auto overflow-x-hidden p-6 space-y-8 text-sm",children:e.questions?a.jsx(a.Fragment,{children:a.jsx(Mn,{htmlString:e.questions,form:t,storageKey:i})}):a.jsx("div",{children:"No questions available"})})}):a.jsx(fs,{direction:"horizontal",className:X("w-full border rounded-none"),children:a.jsx(In,{defaultSize:100,children:a.jsx("div",{className:"h-full overflow-y-auto overflow-x-hidden p-6 space-y-8 text-sm",children:e.questions?a.jsx(Mn,{htmlString:e.questions,form:t,storageKey:i}):a.jsx("div",{children:"No questions available"})})})})})},Ql=({part:e,form:t,testId:n})=>{const{user:r}=Zt(),s=r?.id||"guest",o=n&&e.id?`reading-${s}-${n}-${e.id}-content`:void 0,i=n&&e.id?`reading-${s}-${n}-${e.id}-questions`:void 0;return a.jsx("div",{className:"h-[calc(100vh-232px)]",children:a.jsx(Yn,{leftContent:a.jsx(Hn,{className:"h-full overflow-y-auto p-6 text-sm",htmlString:e.content||"<p>Sample content for testing</p>",enabledHighlight:!0,storageKey:o}),rightContent:a.jsx("div",{className:"h-full overflow-y-auto overflow-x-hidden p-6 space-y-8 text-sm",children:e.questions?a.jsx(Mn,{htmlString:e.questions,form:t,storageKey:i}):a.jsx("div",{children:"No questions available"})})})})},Ln=c.forwardRef(({className:e,...t},n)=>a.jsx("textarea",{className:X("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...t}));Ln.displayName="Textarea";const Zl=({control:e,name:t,label:n,helperText:r,required:s,className:o,rules:i,floatingError:l,...u})=>{const f=n&&a.jsxs(Ke,{className:"my-3",children:[n," ",s&&a.jsx("span",{className:"text-[--destructive]",children:"*"})]});return t&&e?a.jsx(Ne,{control:e,name:t,rules:i,render:({field:h})=>a.jsxs(Se,{children:[f,a.jsx(Re,{children:a.jsx(Ln,{autoComplete:"off",placeholder:"...",className:X(o),...u,...h})}),r&&a.jsx(Le,{children:r}),a.jsx(ut,{className:X(l)})]})}):a.jsxs(a.Fragment,{children:[f,a.jsx(Ln,{...u,className:Pr([o])}),r&&a.jsx(Le,{children:r})]})},ec=({part:e,form:t,index:n,testId:r})=>{const s=t.watch(`answers.${n}.answer`)||"",o=s.trim().split(/\s+/).filter(f=>f.length>0).length,[i,l]=c.useState("16px"),u=r&&e.id?`writing-${r}-${e.id}-question`:void 0;return a.jsx("div",{className:"h-[calc(100vh-232px)] bg-muted",children:a.jsx(Yn,{leftContent:a.jsx(Hn,{className:"h-full overflow-y-auto p-6 text-sm",htmlString:e.writing_questions[0].question,enabledHighlight:!0,storageKey:u}),rightContent:a.jsxs("div",{className:"h-full overflow-y-auto p-6 space-y-4 text-sm",children:[a.jsx(Zl,{floatingError:!0,id:"1",control:t.control,name:`answers.${n}.answer`,className:"min-h-[calc(100vh-335px)]",style:{fontSize:i}}),a.jsxs("div",{className:"flex items-center justify-between w-full",children:[a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Word count: ",s.trim()?o:0]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($r,{htmlFor:"font-size-trigger",className:"text-xs text-muted-foreground",children:"Font size:"}),a.jsxs(En,{onValueChange:f=>l(f),defaultValue:"16px",children:[a.jsx(Nn,{id:"font-size-trigger",className:"w-[75px]",children:a.jsx(Rn,{placeholder:"Select font size"})}),a.jsxs(jn,{children:[a.jsx(Ze,{value:"12px",children:"12px"}),a.jsx(Ze,{value:"14px",children:"14px"}),a.jsx(Ze,{value:"16px",children:"16px"}),a.jsx(Ze,{value:"18px",children:"18px"}),a.jsx(Ze,{value:"20px",children:"20px"})]})]})]})]})]})})})},tc=e=>"questions"in e,nc=e=>"questions"in e&&"question_numbers"in e&&Array.isArray(e.question_numbers),du=({data:e,activeTab:t,testType:n,form:r,testId:s})=>{const o=(i,l)=>{switch(n){case se.READING:return tc(i)?a.jsx(a.Fragment,{children:a.jsx(Ql,{part:i,form:r,testId:s})}):a.jsx(fr,{title:"Error",message:"Invalid reading data"});case se.LISTENING:return nc(i)?a.jsx(Jl,{part:i,form:r,testId:s}):a.jsx(fr,{title:"Error",message:"Invalid listening data"});case se.WRITING:return a.jsx(ec,{part:i,index:l,form:r,testId:s});default:return a.jsx("div",{children:"Unsupported test type"})}};return a.jsx("div",{children:e.map((i,l)=>a.jsx(Qo,{value:`tab-${i.id}`,className:X("h-full bg-muted",t!==`tab-${i.id}`&&"hidden"),children:o(i,l)},i.id))})},fu=({activePart:e,testType:t})=>{if(!e)return null;const n=()=>{switch(t){case se.READING:return Te.get(e,"passage_number","");case se.LISTENING:return Te.get(e,"listening_section","");case se.WRITING:return Te.get(e,"writing_task","");default:return"Follow the instructions for this part."}};return a.jsx(en,{className:"w-full shadow-sm rounded-none",children:a.jsxs(Vn,{className:"p-3 text-sm h-[70px]",children:[a.jsxs("div",{className:"font-semibold",children:["Part ",n()]}),a.jsx("div",{children:e.description})]})})};function mt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e?.(s),n===!1||!s.defaultPrevented)return t?.(s)}}var Qs=["PageUp","PageDown"],Zs=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],eo={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},St="Slider",[On,rc,sc]=ba(St),[to,hu]=Ot(St,[sc]),[oc,fn]=to(St),no=c.forwardRef((e,t)=>{const{name:n,min:r=0,max:s=100,step:o=1,orientation:i="horizontal",disabled:l=!1,minStepsBetweenThumbs:u=0,defaultValue:f=[r],value:h,onValueChange:d=()=>{},onValueCommit:p=()=>{},inverted:m=!1,form:v,...g}=e,w=c.useRef(new Set),x=c.useRef(0),N=i==="horizontal"?ac:ic,[S=[],k]=qn({prop:h,defaultProp:f,onChange:$=>{[...w.current][x.current]?.focus(),d($)}}),D=c.useRef(S);function R($){const G=fc(S,$);q($,G)}function M($){q($,x.current)}function H(){const $=D.current[x.current];S[x.current]!==$&&p(S)}function q($,G,{commit:Z}={commit:!1}){const W=gc(o),Y=vc(Math.round(($-r)/o)*o+r,W),E=Lr(Y,[r,s]);k((y=[])=>{const j=uc(y,E,G);if(mc(j,u*o)){x.current=j.indexOf(E);const I=String(j)!==String(y);return I&&Z&&p(j),I?j:y}else return y})}return a.jsx(oc,{scope:e.__scopeSlider,name:n,disabled:l,min:r,max:s,valueIndexToChangeRef:x,thumbs:w.current,values:S,orientation:i,form:v,children:a.jsx(On.Provider,{scope:e.__scopeSlider,children:a.jsx(On.Slot,{scope:e.__scopeSlider,children:a.jsx(N,{"aria-disabled":l,"data-disabled":l?"":void 0,...g,ref:t,onPointerDown:mt(g.onPointerDown,()=>{l||(D.current=S)}),min:r,max:s,inverted:m,onSlideStart:l?void 0:R,onSlideMove:l?void 0:M,onSlideEnd:l?void 0:H,onHomeKeyDown:()=>!l&&q(r,0,{commit:!0}),onEndKeyDown:()=>!l&&q(s,S.length-1,{commit:!0}),onStepKeyDown:({event:$,direction:G})=>{if(!l){const Y=Qs.includes($.key)||$.shiftKey&&Zs.includes($.key)?10:1,E=x.current,y=S[E],j=o*Y*G;q(y+j,E,{commit:!0})}}})})})})});no.displayName=St;var[ro,so]=to(St,{startEdge:"left",endEdge:"right",size:"width",direction:1}),ac=c.forwardRef((e,t)=>{const{min:n,max:r,dir:s,inverted:o,onSlideStart:i,onSlideMove:l,onSlideEnd:u,onStepKeyDown:f,...h}=e,[d,p]=c.useState(null),m=ge(t,N=>p(N)),v=c.useRef(void 0),g=qr(s),w=g==="ltr",x=w&&!o||!w&&o;function b(N){const S=v.current||d.getBoundingClientRect(),k=[0,S.width],R=ar(k,x?[n,r]:[r,n]);return v.current=S,R(N-S.left)}return a.jsx(ro,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:a.jsx(oo,{dir:g,"data-orientation":"horizontal",...h,ref:m,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:N=>{const S=b(N.clientX);i?.(S)},onSlideMove:N=>{const S=b(N.clientX);l?.(S)},onSlideEnd:()=>{v.current=void 0,u?.()},onStepKeyDown:N=>{const k=eo[x?"from-left":"from-right"].includes(N.key);f?.({event:N,direction:k?-1:1})}})})}),ic=c.forwardRef((e,t)=>{const{min:n,max:r,inverted:s,onSlideStart:o,onSlideMove:i,onSlideEnd:l,onStepKeyDown:u,...f}=e,h=c.useRef(null),d=ge(t,h),p=c.useRef(void 0),m=!s;function v(g){const w=p.current||h.current.getBoundingClientRect(),x=[0,w.height],N=ar(x,m?[r,n]:[n,r]);return p.current=w,N(g-w.top)}return a.jsx(ro,{scope:e.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:a.jsx(oo,{"data-orientation":"vertical",...f,ref:d,style:{...f.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const w=v(g.clientY);o?.(w)},onSlideMove:g=>{const w=v(g.clientY);i?.(w)},onSlideEnd:()=>{p.current=void 0,l?.()},onStepKeyDown:g=>{const x=eo[m?"from-bottom":"from-top"].includes(g.key);u?.({event:g,direction:x?-1:1})}})})}),oo=c.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:o,onHomeKeyDown:i,onEndKeyDown:l,onStepKeyDown:u,...f}=e,h=fn(St,n);return a.jsx(Ce.span,{...f,ref:t,onKeyDown:mt(e.onKeyDown,d=>{d.key==="Home"?(i(d),d.preventDefault()):d.key==="End"?(l(d),d.preventDefault()):Qs.concat(Zs).includes(d.key)&&(u(d),d.preventDefault())}),onPointerDown:mt(e.onPointerDown,d=>{const p=d.target;p.setPointerCapture(d.pointerId),d.preventDefault(),h.thumbs.has(p)?p.focus():r(d)}),onPointerMove:mt(e.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&s(d)}),onPointerUp:mt(e.onPointerUp,d=>{const p=d.target;p.hasPointerCapture(d.pointerId)&&(p.releasePointerCapture(d.pointerId),o(d))})})}),ao="SliderTrack",io=c.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=fn(ao,n);return a.jsx(Ce.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:t})});io.displayName=ao;var $n="SliderRange",lo=c.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=fn($n,n),o=so($n,n),i=c.useRef(null),l=ge(t,i),u=s.values.length,f=s.values.map(p=>fo(p,s.min,s.max)),h=u>1?Math.min(...f):0,d=100-Math.max(...f);return a.jsx(Ce.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:l,style:{...e.style,[o.startEdge]:h+"%",[o.endEdge]:d+"%"}})});lo.displayName=$n;var Fn="SliderThumb",co=c.forwardRef((e,t)=>{const n=rc(e.__scopeSlider),[r,s]=c.useState(null),o=ge(t,l=>s(l)),i=c.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return a.jsx(lc,{...e,ref:o,index:i})}),lc=c.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:s,...o}=e,i=fn(Fn,n),l=so(Fn,n),[u,f]=c.useState(null),h=ge(t,b=>f(b)),d=u?i.form||!!u.closest("form"):!0,p=Bn(u),m=i.values[r],v=m===void 0?0:fo(m,i.min,i.max),g=dc(r,i.values.length),w=p?.[l.size],x=w?hc(w,v,l.direction):0;return c.useEffect(()=>{if(u)return i.thumbs.add(u),()=>{i.thumbs.delete(u)}},[u,i.thumbs]),a.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${v}% + ${x}px)`},children:[a.jsx(On.ItemSlot,{scope:e.__scopeSlider,children:a.jsx(Ce.span,{role:"slider","aria-label":e["aria-label"]||g,"aria-valuemin":i.min,"aria-valuenow":m,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...o,ref:h,style:m===void 0?{display:"none"}:e.style,onFocus:mt(e.onFocus,()=>{i.valueIndexToChangeRef.current=r})})}),d&&a.jsx(uo,{name:s??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:m},r)]})});co.displayName=Fn;var cc="RadioBubbleInput",uo=c.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const s=c.useRef(null),o=ge(s,r),i=Gn(t);return c.useEffect(()=>{const l=s.current;if(!l)return;const u=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(u,"value").set;if(i!==t&&h){const d=new Event("input",{bubbles:!0});h.call(l,t),l.dispatchEvent(d)}},[i,t]),a.jsx(Ce.input,{style:{display:"none"},...n,ref:o,defaultValue:t})});uo.displayName=cc;function uc(e=[],t,n){const r=[...e];return r[n]=t,r.sort((s,o)=>s-o)}function fo(e,t,n){const o=100/(n-t)*(e-t);return Lr(o,[0,100])}function dc(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function fc(e,t){if(e.length===1)return 0;const n=e.map(s=>Math.abs(s-t)),r=Math.min(...n);return n.indexOf(r)}function hc(e,t,n){const r=e/2,o=ar([0,50],[0,r]);return(r-o(t)*n)*n}function pc(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function mc(e,t){if(t>0){const n=pc(e);return Math.min(...n)>=t}return!0}function ar(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function gc(e){return(String(e).split(".")[1]||"").length}function vc(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var ho=no,xc=io,bc=lo,wc=co;const po=c.forwardRef(({className:e,...t},n)=>a.jsxs(ho,{ref:n,className:X("relative flex w-full touch-none select-none items-center",e),...t,children:[a.jsx(xc,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:a.jsx(bc,{className:"absolute h-full bg-primary"})}),a.jsx(wc,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));po.displayName=ho.displayName;const pu=({timeLeft:e,formatTime:t,testType:n=se.READING,audioRef:r,handleVolumeChange:s,handlePauseToggle:o,isPaused:i=!1,studentHasStarted:l=!1,userHasStarted:u=!1,type:f})=>{const h=zr(),d=()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},p=()=>{m?.role===lt.TEACHER?h(f==="Thematic"?"/teacher/tests/thematic":"/teacher/tests/mock"):h(f==="Thematic"?"/student/tests/thematic":"/student/tests/mock"),d()},{user:m}=Zt(),[v,g]=c.useState(.5),[w,x]=c.useState(0),[b,N]=c.useState(0),S=r?.current;c.useEffect(()=>{if(n!==se.LISTENING||!S){x(0),N(0);return}const M=()=>{x(S.currentTime||0)},H=()=>{const q=Number.isFinite(S.duration)?S.duration:0;N(q)};return M(),H(),S.addEventListener("timeupdate",M),S.addEventListener("loadedmetadata",H),S.addEventListener("durationchange",H),S.addEventListener("ended",M),()=>{S.removeEventListener("timeupdate",M),S.removeEventListener("loadedmetadata",H),S.removeEventListener("durationchange",H),S.removeEventListener("ended",M)}},[n,S]);const k=M=>{const H=Math.floor(M/60),q=Math.floor(M%60);return`${H.toString().padStart(2,"0")}:${q.toString().padStart(2,"0")}`},D=b>0?Math.max(b-w,0):w,R=M=>{const H=M[0];g(H),s&&s(H)};return a.jsx(en,{className:"w-full shadow-md rounded-none",children:a.jsxs(Vn,{className:"p-3 grid grid-cols-3 items-center h-[50px]",children:[a.jsxs("div",{className:"text-sm flex items-center gap-2",children:[a.jsx(aa,{}),a.jsx("b",{children:"Candidate:"})," ",m?.full_name||m?.username]}),a.jsx("div",{className:"text-sm font-semibold font-mono flex items-center gap-2 justify-center",children:n===se.LISTENING&&r?a.jsxs(a.Fragment,{children:[a.jsx(hr,{className:"w-5 h-5"}),k(D)]}):a.jsx("span",{className:"text-muted-foreground",children:"-"})}),a.jsxs("div",{className:"flex items-center gap-8 justify-end",children:[a.jsxs("div",{className:"text-sm font-semibold font-mono flex items-center gap-2 whitespace-nowrap",children:[a.jsx(hr,{className:"w-5 h-5"}),a.jsx("span",{className:"whitespace-nowrap",children:"Time Left:"}),a.jsx("span",{className:X("text-red-400",e<600&&"text-red-700"),children:t(e)})]}),n===se.LISTENING&&r&&s&&a.jsxs("div",{className:"flex items-center gap-4",children:[f==="Thematic"&&o&&a.jsx(Ue,{onClick:o,variant:"outline",size:"sm",type:"button",className:"flex items-center gap-1 h-8 w-8 p-0",disabled:m?.role===lt.STUDENT&&l&&!i,title:m?.role===lt.STUDENT&&l&&!i?"Students cannot pause after starting audio":u?i?"Resume audio":"Pause audio":"Start audio",children:!u||i?a.jsx(ia,{className:"w-4 h-4"}):a.jsx(la,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex items-center gap-2",children:[v===0?a.jsx(ca,{className:"w-5 h-5"}):a.jsx(ua,{className:"w-5 h-5"}),a.jsx(po,{id:"volume",min:0,max:1,step:.01,defaultValue:[.5],onValueChange:R,className:"w-24"})]})]}),(m?.role===lt.TEACHER||m?.role===lt.STUDENT&&f==="Thematic")&&a.jsxs(Ue,{onClick:p,variant:"default",type:"button",className:"flex items-center gap-2 h-7 w-24",children:[a.jsx(da,{className:"w-4 h-4"}),"Back"]})]})]})})};var mo="AlertDialog",[yc,mu]=Ot(mo,[Gr]),Oe=Gr(),go=e=>{const{__scopeAlertDialog:t,...n}=e,r=Oe(t);return a.jsx(Sa,{...r,...n,modal:!0})};go.displayName=mo;var Sc="AlertDialogTrigger",vo=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Oe(n);return a.jsx(Ca,{...s,...r,ref:t})});vo.displayName=Sc;var Cc="AlertDialogPortal",xo=e=>{const{__scopeAlertDialog:t,...n}=e,r=Oe(t);return a.jsx(Ea,{...r,...n})};xo.displayName=Cc;var Ec="AlertDialogOverlay",bo=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Oe(n);return a.jsx(Ia,{...s,...r,ref:t})});bo.displayName=Ec;var xt="AlertDialogContent",[Nc,Rc]=yc(xt),jc=pa("AlertDialogContent"),wo=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...s}=e,o=Oe(n),i=c.useRef(null),l=ge(t,i),u=c.useRef(null);return a.jsx(Na,{contentName:xt,titleName:yo,docsSlug:"alert-dialog",children:a.jsx(Nc,{scope:n,cancelRef:u,children:a.jsxs(Ra,{role:"alertdialog",...o,...s,ref:l,onOpenAutoFocus:bt(s.onOpenAutoFocus,f=>{f.preventDefault(),u.current?.focus({preventScroll:!0})}),onPointerDownOutside:f=>f.preventDefault(),onInteractOutside:f=>f.preventDefault(),children:[a.jsx(jc,{children:r}),a.jsx(Ic,{contentRef:i})]})})})});wo.displayName=xt;var yo="AlertDialogTitle",So=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Oe(n);return a.jsx(ja,{...s,...r,ref:t})});So.displayName=yo;var Co="AlertDialogDescription",Eo=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Oe(n);return a.jsx(Da,{...s,...r,ref:t})});Eo.displayName=Co;var Dc="AlertDialogAction",No=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Oe(n);return a.jsx(Br,{...s,...r,ref:t})});No.displayName=Dc;var Ro="AlertDialogCancel",jo=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:s}=Rc(Ro,n),o=Oe(n),i=ge(t,s);return a.jsx(Br,{...o,...r,ref:i})});jo.displayName=Ro;var Ic=({contentRef:e})=>{const t=`\`${xt}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${xt}\` by passing a \`${Co}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${xt}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return c.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},kc=go,Ac=vo,_c=xo,Do=bo,Io=wo,ko=No,Ao=jo,_o=So,zo=Eo;const zc=kc,Pc=Ac,Tc=_c,Po=c.forwardRef(({className:e,...t},n)=>a.jsx(Do,{className:X("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));Po.displayName=Do.displayName;const To=c.forwardRef(({className:e,...t},n)=>a.jsxs(Tc,{children:[a.jsx(Po,{}),a.jsx(Io,{ref:n,className:X("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));To.displayName=Io.displayName;const Mo=({className:e,...t})=>a.jsx("div",{className:X("flex flex-col space-y-2 text-center sm:text-left",e),...t});Mo.displayName="AlertDialogHeader";const Lo=({className:e,...t})=>a.jsx("div",{className:X("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Lo.displayName="AlertDialogFooter";const Oo=c.forwardRef(({className:e,...t},n)=>a.jsx(_o,{ref:n,className:X("text-lg font-semibold",e),...t}));Oo.displayName=_o.displayName;const $o=c.forwardRef(({className:e,...t},n)=>a.jsx(zo,{ref:n,className:X("text-sm text-muted-foreground",e),...t}));$o.displayName=zo.displayName;const Fo=c.forwardRef(({className:e,...t},n)=>a.jsx(ko,{ref:n,className:X(Tr(),e),...t}));Fo.displayName=ko.displayName;const Ho=c.forwardRef(({className:e,...t},n)=>a.jsx(Ao,{ref:n,className:X(Tr({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Ho.displayName=Ao.displayName;const Mc=({trigger:e,title:t,description:n,onConfirm:r,confirmText:s="Confirm",cancelText:o="Cancel",isLoading:i})=>a.jsxs(zc,{children:[a.jsx(Pc,{asChild:!0,children:e}),a.jsxs(To,{children:[a.jsxs(Mo,{children:[a.jsx(Oo,{children:t}),a.jsx($o,{children:n})]}),a.jsxs(Lo,{children:[a.jsx(Ho,{disabled:i,children:o}),a.jsx(Fo,{asChild:!0,children:a.jsx(Ue,{onClick:r,disabled:i,loading:i,children:s})})]})]})]}),gu=({data:e,form:t,activeTab:n,testType:r,setActiveTab:s,currentTabIndex:o,handlePrevious:i,handleNext:l,onSubmit:u,isTestFinished:f,isLoading:h,disableSubmit:d=!1,disableSubmitReason:p})=>{const m=g=>{switch(r){case se.READING:return Te.get(g,"passage_number","");case se.LISTENING:return Te.get(g,"listening_section","");case se.WRITING:return Te.get(g,"writing_task","");default:return""}},v=(g,w)=>{s(`tab-${w}`),setTimeout(()=>{const x=document.getElementById(`question-${g}`);x&&x.scrollIntoView({behavior:"smooth",block:"center"})},100)};return a.jsx(en,{className:"w-full shadow-md p-2 sticky bottom-0 z-50 rounded-none",children:a.jsxs(Vn,{className:"p-0 flex items-center justify-between gap-2 h-[80px]",children:[a.jsx(Zo,{className:X(r===se.WRITING?"!flex !flex-row w-full gap-2 min-h-min":"grid grid-cols-2 gap-2 min-h-min"),children:e.map(g=>{const w=Te.get(g,"question_numbers",[]);return a.jsxs("div",{className:X(r===se.WRITING?"flex gap-1":"flex gap-2"),children:[a.jsxs(ea,{value:`tab-${g.id}`,className:X(r===se.WRITING?"flex items-center gap-1 px-2 py-1 text-sm":"flex items-center gap-2"),children:["Part ",m(g)]}),!Te.isEmpty(w)&&a.jsx("div",{className:"flex flex-wrap gap-1",children:w?.sort((x,b)=>x.question_number-b.question_number).map(x=>{const b=t.watch(`answers.${x?.question_number-1}.answer`),N=!!b&&b.trim()!=="";return a.jsx($r,{onClick:S=>{S.preventDefault(),S.stopPropagation(),v(x?.question_number,g.id)},className:X("cursor-pointer rounded text-sm flex items-center justify-center",r===se.WRITING?"h-6 w-6":"h-7 w-7",N?"bg-primary text-background hover:bg-primary/90":"border border-primary text-primary hover:bg-primary/10"),children:x?.question_number},x.id)})})]},g.id)})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ue,{type:"button",onClick:i,disabled:o===0||f,variant:"outline",size:"sm",className:"p-0 w-8 h-8",children:a.jsx(fa,{className:"w-4 h-4"})}),a.jsx(Ue,{type:"button",onClick:l,disabled:o===e.length-1||f,variant:"outline",size:"sm",className:"p-0 w-8 h-8",children:a.jsx(ha,{className:"w-4 h-4"})}),a.jsx(Mc,{trigger:a.jsx(Ue,{type:"button",disabled:f||d,className:"w-full md:w-auto",children:"Submit"}),title:"Submit Test ?",description:"Are you sure you want to submit the test? This action cannot be undone.",onConfirm:u,confirmText:"Yes, Submit",cancelText:"No, Cancel",isLoading:h}),d&&p&&a.jsx("p",{className:"text-xs text-muted-foreground max-w-[200px]",children:p})]})]})})},vu=e=>{const{user:t}=Zt(),n=Jo(),r=zr(),s=t?.role===lt.STUDENT,o=c.useCallback(()=>{const u=document.documentElement;u.requestFullscreen&&u.requestFullscreen().catch(f=>{console.error("Fullscreen rejimini yoqishda xato:",f)})},[]),i=c.useCallback(()=>{document.exitFullscreen&&document.fullscreenElement&&document.exitFullscreen().catch(u=>{console.error("Fullscreen rejimidan chiqishda xato:",u)})},[]),l=c.useCallback(()=>{s&&e&&(window.confirm("Test hali tugamadi! Chiqishni xohlaysizmi?")?i():r(n.pathname,{replace:!0}))},[s,e,n.pathname,r,i]);c.useEffect(()=>{if(!s)return;if(!e){i();return}o();const u=d=>{e&&(d.preventDefault(),d.returnValue="Test hali tugamadi! Chiqishni tasdiqlasangiz, natijalar saqlanmaydi!")},f=d=>{e&&(d.ctrlKey&&d.key==="r"||d.key==="F5")&&(d.preventDefault(),alert("Test tugamaguncha sahifani yangilash taqiqlangan!")),e&&d.key==="F11"&&(d.preventDefault(),alert("Test tugamaguncha fullscreen rejimidan chiqish taqiqlangan!"))},h=()=>{e&&!document.fullscreenElement&&(o(),alert("Test tugamaguncha fullscreen rejimida qolishingiz kerak!"))};return window.addEventListener("beforeunload",u),window.addEventListener("keydown",f),window.addEventListener("popstate",l),document.addEventListener("fullscreenchange",h),()=>{window.removeEventListener("beforeunload",u),window.removeEventListener("keydown",f),window.removeEventListener("popstate",l),document.removeEventListener("fullscreenchange",h)}},[s,e,l,o,i])};export{du as C,fu as P,pu as T,se as a,gu as b,vu as u};
