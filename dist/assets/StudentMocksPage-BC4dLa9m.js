import{e as p,j as e,c as b,u as w,r as d}from"./index-C2r73vKz.js";import{B as g}from"./badge-BlZvGfOU.js";import{C,a as P,b as _,c as S}from"./card-DvxYgmap.js";import{D as k}from"./data-table-ByiohjHV.js";import{I as E}from"./input-Czb5Gnhp.js";import{u as x,E as I}from"./ErrorMessage-Dcw0_FHl.js";import{L}from"./LoadingSpinner-BvOzLLN4.js";import{u as B}from"./useDebounce-c0882JpI.js";import{l as r}from"./lodash-BB9mR6Ly.js";import{c as K,d as M}from"./student-Dm_TjK7e.js";import{c as V,b as q,_ as F,h as D}from"./index-ev-ahMo0.js";import{B as T}from"./BackButton-KVDtITvN.js";import"./index-BdrbzQWw.js";import"./utils-CPYLdFy8.js";import"./table-CtRoBAPB.js";import"./button-DC1BgMVd.js";import"./index-CQPJ8OFz.js";import"./createLucideIcon-B8JSSUkB.js";import"./chevron-right-Cw5t5NbO.js";function $(){const{student_id:l}=p();return[{accessorKey:"title",header:"Material title",cell:({row:t})=>{const s=t.getValue("title");return e.jsx("div",{children:s})}},{accessorKey:"test_info",header:"Test title",cell:({row:t})=>{const s=t.getValue("test_info");return e.jsx("div",{children:r.get(s,"test_title")})}},{accessorKey:"materials",header:"Materials",cell:({row:t})=>{const s=t.getValue("materials");return e.jsx("div",{children:e.jsx("div",{className:"space-y-2 my-2",children:s?.map(a=>e.jsx("div",{className:"mb-2",children:e.jsxs(g,{variant:"outline",className:"inline-flex gap-2 p-1",children:[a.type==="reading"?e.jsx(V,{className:"h-6 w-6"}):a.type==="listening"?e.jsx(q,{className:"h-6 w-6"}):a.type==="writing"?e.jsx(F,{className:"h-6 w-6"}):e.jsx(D,{className:"h-6 w-6"}),r.get(a,"title","N/A")]})},a.id))})})}},{accessorKey:"id",header:"Results",cell:({row:t})=>{const s=t.getValue("id");return e.jsx(e.Fragment,{children:e.jsx(b,{to:`/teacher/students/${l}/mock/${s}`,className:"text-blue-500",children:"View"})})}}]}function ne(){const{student_id:l}=p(),t=w(),{data:s,isLoading:a,isError:h}=x({queryKey:["students",l],queryFn:()=>K(l)}),[n,m]=d.useState(1),[u,f]=d.useState(""),i=B(u),{data:c,isLoading:j}=x({queryKey:["student-mocks",n,i],queryFn:()=>M(l,n,i)}),N=$(),v=r.get(c,"results",[]),o={totalCount:r.get(c,"count",0),totalPages:r.get(c,"total_pages",1),currentPage:n};return d.useEffect(()=>{m(1)},[i]),a?e.jsx(L,{}):h?e.jsx(I,{title:"Failed to Load page",message:"An error occurred while loading the page. Please try again later."}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-xl font-semibold",children:r.get(s,"full_name")}),e.jsx("div",{className:"flex gap-2",children:e.jsx(T,{to:"/teacher/students",label:"Back to students"})})]}),e.jsxs(C,{className:"w-full",children:[e.jsx(P,{className:"flex flex-row items-center gap-4",children:e.jsx(_,{children:s?.full_name})}),e.jsxs(S,{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Username:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s?.username})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Group:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsx(g,{onClick:()=>t(`/teacher/groups/${s?.group?.id}`),className:"cursor-pointer",variant:"default",children:s?.group?.name})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Phone number:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s?.phone})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-xl font-semibold",children:"Student mocks"}),e.jsx("div",{className:"flex gap-2",children:e.jsx(E,{placeholder:"Search ...",value:u,onChange:y=>f(y.target.value),className:"max-w-sm w-64"})})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(k,{data:v,columns:N,pagination:!0,totalCount:o.totalCount,totalPages:o.totalPages,currentPage:o.currentPage,onPageChange:m,isLoading:j})})]})]})}export{ne as default};
