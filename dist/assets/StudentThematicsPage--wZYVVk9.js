import{e as g,j as e,c as y,u as b,r as d}from"./index-D47OC3gi.js";import{B as _}from"./badge-u3bv_E7s.js";import{C,a as P,b as S,c as E}from"./card-Ce5_OClf.js";import{D as k}from"./data-table-DYe5WdLS.js";import{I as w}from"./input-BmEKVo4i.js";import{B as I}from"./BackButton-BhllCPJU.js";import{u as x,E as L}from"./ErrorMessage-BOXZBuON.js";import{L as B}from"./LoadingSpinner-BDmv0Xtl.js";import{u as K}from"./useDebounce-veFU8bdV.js";import{l as a}from"./lodash-D2H_-A1O.js";import{c as T,e as V}from"./student-BTftowka.js";import"./index-BdrbzQWw.js";import"./utils-CPYLdFy8.js";import"./table-BINazae7.js";import"./button-CIMYou_Y.js";import"./index-Bu1BO-s4.js";import"./index-2Max2227.js";import"./createLucideIcon-Lo4gAoW8.js";import"./chevron-right-BkeWpnvY.js";function q(){const{student_id:r}=g();return[{accessorKey:"title",header:"Material title",cell:({row:s})=>{const t=s.getValue("title");return e.jsx("div",{children:t})}},{accessorKey:"test_info",header:"Section title",cell:({row:s})=>{const t=s.getValue("test_info");return e.jsx("div",{children:a.get(t,"test_title")})}},{accessorKey:"skill_info",header:"Test title",cell:({row:s})=>{const t=s.getValue("skill_info");return e.jsx("div",{children:a.get(t,"skill_title")})}},{accessorKey:"id",header:"Results",cell:({row:s})=>{const t=s.getValue("id"),n=s.original.type;return e.jsx(e.Fragment,{children:e.jsx(y,{to:`/teacher/students/${r}/thematic/${n}/${t}`,className:"text-blue-500",children:"View"})})}}]}function se(){const{student_id:r}=g(),s=b(),{data:t,isLoading:n,isError:p}=x({queryKey:["students",r],queryFn:()=>T(r)}),[i,m]=d.useState(1),[u,h]=d.useState(""),l=K(u),{data:o,isLoading:f}=x({queryKey:["student-thematics",i,l],queryFn:()=>V(r,i,l)}),j=q(),v=a.get(o,"results",[]),c={totalCount:a.get(o,"count",0),totalPages:a.get(o,"total_pages",1),currentPage:i};return d.useEffect(()=>{m(1)},[l]),n?e.jsx(B,{}):p?e.jsx(L,{title:"Failed to Load page",message:"An error occurred while loading the page. Please try again later."}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-xl font-semibold",children:a.get(t,"full_name")}),e.jsx("div",{className:"flex gap-2",children:e.jsx(I,{to:"/teacher/students",label:"Back to students"})})]}),e.jsxs(C,{className:"w-full",children:[e.jsx(P,{className:"flex flex-row items-center gap-4",children:e.jsx(S,{children:t?.full_name})}),e.jsxs(E,{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Username:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t?.username})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Group:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsx(_,{onClick:()=>s(`/teacher/groups/${t?.group?.id}`),className:"cursor-pointer",variant:"default",children:t?.group?.name})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Phone number:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t?.phone})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-xl font-semibold",children:"Student thematics"}),e.jsx("div",{className:"flex gap-2",children:e.jsx(w,{placeholder:"Search ...",value:u,onChange:N=>h(N.target.value),className:"max-w-sm w-64"})})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(k,{data:v,columns:j,pagination:!0,totalCount:c.totalCount,totalPages:c.totalPages,currentPage:c.currentPage,onPageChange:m,isLoading:f})})]})]})}export{se as default};
