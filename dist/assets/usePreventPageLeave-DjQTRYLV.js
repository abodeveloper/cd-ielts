import{r as c,g as To,j as s,h as ye,i as Rt,k as Po,p as Lo,m as Mo,a as Zt,u as _r,R as Qe,b as Oo}from"./index-vdq1YJoj.js";import{c as $o,a as qo,b as Fo}from"./tabs-BRbs5NX-.js";import{c as K,t as Ir}from"./utils-CPYLdFy8.js";import{E as or}from"./ErrorMessage-WqZP1k9B.js";import{c as Ho}from"./createLucideIcon-zXsBUWpB.js";import{I as Ar,H as Mn}from"./useTestLogic-BIqHbK6v.js";import{p as wt,l as de}from"./index-DRtAx8tl.js";import{B as Le,b as zr}from"./button-B5m0ujb9.js";import{P as Tr,M as Go,i as Bo,j as Wo,m as ar,G as Vo,o as Uo,q as Ko,s as Xo,t as Yo,Q as Jo,u as Qo,r as Zo}from"./index-BOq7KNQT.js";import{u as nt,c as ea}from"./index-BZsln8zB.js";import{c as en}from"./index-s-BCY4Fk.js";import{u as Pr,c as yt}from"./index-Cun9yr8F.js";import{u as Lr}from"./index-CJd3nGps.js";import{u as Mr}from"./index-CTXo7SZQ.js";import{P as Or}from"./index-D0UhNZDh.js";import{P as rt}from"./index-D7mRXelQ.js";import{C as ta}from"./index-BnMHjOW3.js";import{F as Se,a as Ce,b as Ne,c as Me,d as ft,e as Ue,L as $r}from"./form-DMc282LN.js";import{b as na,c as qr}from"./index.esm-X2bBcU4v.js";import{C as Ot,c as On}from"./card-B1AKS8X2.js";import{c as Fr,R as ra,I as sa}from"./index-BNA1QcpH.js";import{u as oa}from"./index-C8QVEBD5.js";import{C as aa,D as ia,a as la,b as ca,d as ua,e as da,g as ir,h as lr,i as cr,j as ur,k as ct}from"./dropdown-menu-Cas3EbiW.js";import{T as ht,a as pt,b as be,c as ze,d as gt,e as ve}from"./table-CJYhAIda.js";import{I as fa}from"./input-HdFZ5EZh.js";import{S as En,a as Sn,b as Nn,c as jn,d as Ze}from"./select--v6hDNsT.js";import{l as Te}from"./lodash-Lz6F8hHh.js";import{S as ha}from"./slider-BhW5W3tP.js";import{c as Hr,R as pa,b as ga,P as ma,W as xa,C as ba,T as va,D as wa,a as Gr,O as ya}from"./index-MdPF44q6.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Ea=Ho("grip-vertical",Ca);var ne=(e=>(e.READING="READING",e.LISTENING="LISTENING",e.WRITING="WRITING",e.SPEAKING="SPEAKING",e))(ne||{});const tn=c.createContext(null);tn.displayName="PanelGroupContext";const te={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},$n=10,et=c.useLayoutEffect,dr=To.useId,Sa=typeof dr=="function"?dr:()=>null;let Na=0;function qn(e=null){const t=Sa(),n=c.useRef(e||t||null);return n.current===null&&(n.current=""+Na++),e??n.current}function Br({children:e,className:t="",collapsedSize:n,collapsible:r,defaultSize:a,forwardedRef:o,id:i,maxSize:l,minSize:u,onCollapse:d,onExpand:p,onResize:f,order:h,style:m,tagName:x="div",...b}){const w=c.useContext(tn);if(w===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:v,expandPanel:g,getPanelSize:E,getPanelStyle:k,groupId:R,isPanelCollapsed:_,reevaluatePanelConstraints:N,registerPanel:M,resizePanel:j,unregisterPanel:q}=w,F=qn(i),B=c.useRef({callbacks:{onCollapse:d,onExpand:p,onResize:f},constraints:{collapsedSize:n,collapsible:r,defaultSize:a,maxSize:l,minSize:u},id:F,idIsFromProps:i!==void 0,order:h});c.useRef({didLogMissingDefaultSizeWarning:!1}),et(()=>{const{callbacks:G,constraints:Y}=B.current,S={...Y};B.current.id=F,B.current.idIsFromProps=i!==void 0,B.current.order=h,G.onCollapse=d,G.onExpand=p,G.onResize=f,Y.collapsedSize=n,Y.collapsible=r,Y.defaultSize=a,Y.maxSize=l,Y.minSize=u,(S.collapsedSize!==Y.collapsedSize||S.collapsible!==Y.collapsible||S.maxSize!==Y.maxSize||S.minSize!==Y.minSize)&&N(B.current,S)}),et(()=>{const G=B.current;return M(G),()=>{q(G)}},[h,F,M,q]),c.useImperativeHandle(o,()=>({collapse:()=>{v(B.current)},expand:G=>{g(B.current,G)},getId(){return F},getSize(){return E(B.current)},isCollapsed(){return _(B.current)},isExpanded(){return!_(B.current)},resize:G=>{j(B.current,G)}}),[v,g,E,_,F,j]);const W=k(B.current,a);return c.createElement(x,{...b,children:e,className:t,id:F,style:{...W,...m},[te.groupId]:R,[te.panel]:"",[te.panelCollapsible]:r||void 0,[te.panelId]:F,[te.panelSize]:parseFloat(""+W.flexGrow).toFixed(1)})}const Wr=c.forwardRef((e,t)=>c.createElement(Br,{...e,forwardedRef:t}));Br.displayName="Panel";Wr.displayName="forwardRef(Panel)";let kn=null,Bt=-1,Be=null;function ja(e,t){if(t){const n=(t&Yr)!==0,r=(t&Jr)!==0,a=(t&Qr)!==0,o=(t&Zr)!==0;if(n)return a?"se-resize":o?"ne-resize":"e-resize";if(r)return a?"sw-resize":o?"nw-resize":"w-resize";if(a)return"s-resize";if(o)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function ka(){Be!==null&&(document.head.removeChild(Be),kn=null,Be=null,Bt=-1)}function pn(e,t){var n,r;const a=ja(e,t);if(kn!==a){if(kn=a,Be===null&&(Be=document.createElement("style"),document.head.appendChild(Be)),Bt>=0){var o;(o=Be.sheet)===null||o===void 0||o.removeRule(Bt)}Bt=(n=(r=Be.sheet)===null||r===void 0?void 0:r.insertRule(`*{cursor: ${a} !important;}`))!==null&&n!==void 0?n:-1}}function Vr(e){return e.type==="keydown"}function Ur(e){return e.type.startsWith("pointer")}function Kr(e){return e.type.startsWith("mouse")}function nn(e){if(Ur(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(Kr(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function Ra(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function Da(e,t,n){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function _a(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:pr(e),b:pr(t)};let r;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),r=e;V(r,"Stacking order can only be calculated for elements with a common ancestor");const a={a:hr(fr(n.a)),b:hr(fr(n.b))};if(a.a===a.b){const o=r.childNodes,i={a:n.a.at(-1),b:n.b.at(-1)};let l=o.length;for(;l--;){const u=o[l];if(u===i.a)return 1;if(u===i.b)return-1}}return Math.sign(a.a-a.b)}const Ia=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Aa(e){var t;const n=getComputedStyle((t=Xr(e))!==null&&t!==void 0?t:e).display;return n==="flex"||n==="inline-flex"}function za(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||Aa(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||Ia.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function fr(e){let t=e.length;for(;t--;){const n=e[t];if(V(n,"Missing node"),za(n))return n}return null}function hr(e){return e&&Number(getComputedStyle(e).zIndex)||0}function pr(e){const t=[];for(;e;)t.push(e),e=Xr(e);return t}function Xr(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const Yr=1,Jr=2,Qr=4,Zr=8,Ta=Ra()==="coarse";let je=[],xt=!1,We=new Map,rn=new Map;const Tt=new Set;function Pa(e,t,n,r,a){var o;const{ownerDocument:i}=t,l={direction:n,element:t,hitAreaMargins:r,setResizeHandlerState:a},u=(o=We.get(i))!==null&&o!==void 0?o:0;return We.set(i,u+1),Tt.add(l),Ut(),function(){var p;rn.delete(e),Tt.delete(l);const f=(p=We.get(i))!==null&&p!==void 0?p:1;if(We.set(i,f-1),Ut(),f===1&&We.delete(i),je.includes(l)){const h=je.indexOf(l);h>=0&&je.splice(h,1),Hn(),a("up",!0,null)}}}function La(e){const{target:t}=e,{x:n,y:r}=nn(e);xt=!0,Fn({target:t,x:n,y:r}),Ut(),je.length>0&&(Kt("down",e),e.preventDefault(),es(t)||e.stopImmediatePropagation())}function gn(e){const{x:t,y:n}=nn(e);if(xt&&e.buttons===0&&(xt=!1,Kt("up",e)),!xt){const{target:r}=e;Fn({target:r,x:t,y:n})}Kt("move",e),Hn(),je.length>0&&e.preventDefault()}function mn(e){const{target:t}=e,{x:n,y:r}=nn(e);rn.clear(),xt=!1,je.length>0&&(e.preventDefault(),es(t)||e.stopImmediatePropagation()),Kt("up",e),Fn({target:t,x:n,y:r}),Hn(),Ut()}function es(e){let t=e;for(;t;){if(t.hasAttribute(te.resizeHandle))return!0;t=t.parentElement}return!1}function Fn({target:e,x:t,y:n}){je.splice(0);let r=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(r=e),Tt.forEach(a=>{const{element:o,hitAreaMargins:i}=a,l=o.getBoundingClientRect(),{bottom:u,left:d,right:p,top:f}=l,h=Ta?i.coarse:i.fine;if(t>=d-h&&t<=p+h&&n>=f-h&&n<=u+h){if(r!==null&&document.contains(r)&&o!==r&&!o.contains(r)&&!r.contains(o)&&_a(r,o)>0){let x=r,b=!1;for(;x&&!x.contains(o);){if(Da(x.getBoundingClientRect(),l)){b=!0;break}x=x.parentElement}if(b)return}je.push(a)}})}function xn(e,t){rn.set(e,t)}function Hn(){let e=!1,t=!1;je.forEach(r=>{const{direction:a}=r;a==="horizontal"?e=!0:t=!0});let n=0;rn.forEach(r=>{n|=r}),e&&t?pn("intersection",n):e?pn("horizontal",n):t?pn("vertical",n):ka()}let bn;function Ut(){var e;(e=bn)===null||e===void 0||e.abort(),bn=new AbortController;const t={capture:!0,signal:bn.signal};Tt.size&&(xt?(je.length>0&&We.forEach((n,r)=>{const{body:a}=r;n>0&&(a.addEventListener("contextmenu",mn,t),a.addEventListener("pointerleave",gn,t),a.addEventListener("pointermove",gn,t))}),We.forEach((n,r)=>{const{body:a}=r;a.addEventListener("pointerup",mn,t),a.addEventListener("pointercancel",mn,t)})):We.forEach((n,r)=>{const{body:a}=r;n>0&&(a.addEventListener("pointerdown",La,t),a.addEventListener("pointermove",gn,t))}))}function Kt(e,t){Tt.forEach(n=>{const{setResizeHandlerState:r}=n,a=je.includes(n);r(e,a,t)})}function Ma(){const[e,t]=c.useState(0);return c.useCallback(()=>t(n=>n+1),[])}function V(e,t){if(!e)throw console.error(t),Error(t)}function tt(e,t,n=$n){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function Pe(e,t,n=$n){return tt(e,t,n)===0}function me(e,t,n){return tt(e,t,n)===0}function Oa(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){const a=e[r],o=t[r];if(!me(a,o,n))return!1}return!0}function mt({panelConstraints:e,panelIndex:t,size:n}){const r=e[t];V(r!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:a=0,collapsible:o,maxSize:i=100,minSize:l=0}=r;if(tt(n,l)<0)if(o){const u=(a+l)/2;tt(n,u)<0?n=a:n=l}else n=l;return n=Math.min(i,n),n=parseFloat(n.toFixed($n)),n}function Dt({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:r,prevLayout:a,trigger:o}){if(me(e,0))return t;const i=[...t],[l,u]=r;V(l!=null,"Invalid first pivot index"),V(u!=null,"Invalid second pivot index");let d=0;if(o==="keyboard"){{const f=e<0?u:l,h=n[f];V(h,`Panel constraints not found for index ${f}`);const{collapsedSize:m=0,collapsible:x,minSize:b=0}=h;if(x){const w=t[f];if(V(w!=null,`Previous layout not found for panel index ${f}`),me(w,m)){const v=b-w;tt(v,Math.abs(e))>0&&(e=e<0?0-v:v)}}}{const f=e<0?l:u,h=n[f];V(h,`No panel constraints found for index ${f}`);const{collapsedSize:m=0,collapsible:x,minSize:b=0}=h;if(x){const w=t[f];if(V(w!=null,`Previous layout not found for panel index ${f}`),me(w,b)){const v=w-m;tt(v,Math.abs(e))>0&&(e=e<0?0-v:v)}}}}{const f=e<0?1:-1;let h=e<0?u:l,m=0;for(;;){const b=t[h];V(b!=null,`Previous layout not found for panel index ${h}`);const v=mt({panelConstraints:n,panelIndex:h,size:100})-b;if(m+=v,h+=f,h<0||h>=n.length)break}const x=Math.min(Math.abs(e),Math.abs(m));e=e<0?0-x:x}{let h=e<0?l:u;for(;h>=0&&h<n.length;){const m=Math.abs(e)-Math.abs(d),x=t[h];V(x!=null,`Previous layout not found for panel index ${h}`);const b=x-m,w=mt({panelConstraints:n,panelIndex:h,size:b});if(!me(x,w)&&(d+=x-w,i[h]=w,d.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?h--:h++}}if(Oa(a,i))return a;{const f=e<0?u:l,h=t[f];V(h!=null,`Previous layout not found for panel index ${f}`);const m=h+d,x=mt({panelConstraints:n,panelIndex:f,size:m});if(i[f]=x,!me(x,m)){let b=m-x,v=e<0?u:l;for(;v>=0&&v<n.length;){const g=i[v];V(g!=null,`Previous layout not found for panel index ${v}`);const E=g+b,k=mt({panelConstraints:n,panelIndex:v,size:E});if(me(g,k)||(b-=k-g,i[v]=k),me(b,0))break;e>0?v--:v++}}}const p=i.reduce((f,h)=>h+f,0);return me(p,100)?i:a}function $a({layout:e,panelsArray:t,pivotIndices:n}){let r=0,a=100,o=0,i=0;const l=n[0];V(l!=null,"No pivot index found"),t.forEach((f,h)=>{const{constraints:m}=f,{maxSize:x=100,minSize:b=0}=m;h===l?(r=b,a=x):(o+=b,i+=x)});const u=Math.min(a,100-o),d=Math.max(r,100-i),p=e[l];return{valueMax:u,valueMin:d,valueNow:p}}function Pt(e,t=document){return Array.from(t.querySelectorAll(`[${te.resizeHandleId}][data-panel-group-id="${e}"]`))}function ts(e,t,n=document){const a=Pt(e,n).findIndex(o=>o.getAttribute(te.resizeHandleId)===t);return a??null}function ns(e,t,n){const r=ts(e,t,n);return r!=null?[r,r+1]:[-1,-1]}function qa(e){return e instanceof HTMLElement?!0:typeof e=="object"&&e!==null&&"tagName"in e&&"getAttribute"in e}function rs(e,t=document){if(qa(t)&&t.dataset.panelGroupId==e)return t;const n=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return n||null}function sn(e,t=document){const n=t.querySelector(`[${te.resizeHandleId}="${e}"]`);return n||null}function Fa(e,t,n,r=document){var a,o,i,l;const u=sn(t,r),d=Pt(e,r),p=u?d.indexOf(u):-1,f=(a=(o=n[p])===null||o===void 0?void 0:o.id)!==null&&a!==void 0?a:null,h=(i=(l=n[p+1])===null||l===void 0?void 0:l.id)!==null&&i!==void 0?i:null;return[f,h]}function Ha({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:r,panelDataArray:a,panelGroupElement:o,setLayout:i}){c.useRef({didWarnAboutMissingResizeHandle:!1}),et(()=>{if(!o)return;const l=Pt(n,o);for(let u=0;u<a.length-1;u++){const{valueMax:d,valueMin:p,valueNow:f}=$a({layout:r,panelsArray:a,pivotIndices:[u,u+1]}),h=l[u];if(h!=null){const m=a[u];V(m,`No panel data found for index "${u}"`),h.setAttribute("aria-controls",m.id),h.setAttribute("aria-valuemax",""+Math.round(d)),h.setAttribute("aria-valuemin",""+Math.round(p)),h.setAttribute("aria-valuenow",f!=null?""+Math.round(f):"")}}return()=>{l.forEach((u,d)=>{u.removeAttribute("aria-controls"),u.removeAttribute("aria-valuemax"),u.removeAttribute("aria-valuemin"),u.removeAttribute("aria-valuenow")})}},[n,r,a,o]),c.useEffect(()=>{if(!o)return;const l=t.current;V(l,"Eager values not found");const{panelDataArray:u}=l,d=rs(n,o);V(d!=null,`No group found for id "${n}"`);const p=Pt(n,o);V(p,`No resize handles found for group id "${n}"`);const f=p.map(h=>{const m=h.getAttribute(te.resizeHandleId);V(m,"Resize handle element has no handle id attribute");const[x,b]=Fa(n,m,u,o);if(x==null||b==null)return()=>{};const w=v=>{if(!v.defaultPrevented)switch(v.key){case"Enter":{v.preventDefault();const g=u.findIndex(E=>E.id===x);if(g>=0){const E=u[g];V(E,`No panel data found for index ${g}`);const k=r[g],{collapsedSize:R=0,collapsible:_,minSize:N=0}=E.constraints;if(k!=null&&_){const M=Dt({delta:me(k,R)?N-R:R-k,initialLayout:r,panelConstraints:u.map(j=>j.constraints),pivotIndices:ns(n,m,o),prevLayout:r,trigger:"keyboard"});r!==M&&i(M)}}break}}};return h.addEventListener("keydown",w),()=>{h.removeEventListener("keydown",w)}});return()=>{f.forEach(h=>h())}},[o,e,t,n,r,a,i])}function gr(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ss(e,t){const n=e==="horizontal",{x:r,y:a}=nn(t);return n?r:a}function Ga(e,t,n,r,a){const o=n==="horizontal",i=sn(t,a);V(i,`No resize handle element found for id "${t}"`);const l=i.getAttribute(te.groupId);V(l,"Resize handle element has no group id attribute");let{initialCursorPosition:u}=r;const d=ss(n,e),p=rs(l,a);V(p,`No group element found for id "${l}"`);const f=p.getBoundingClientRect(),h=o?f.width:f.height;return(d-u)/h*100}function Ba(e,t,n,r,a,o){if(Vr(e)){const i=n==="horizontal";let l=0;e.shiftKey?l=100:a!=null?l=a:l=10;let u=0;switch(e.key){case"ArrowDown":u=i?0:l;break;case"ArrowLeft":u=i?-l:0;break;case"ArrowRight":u=i?l:0;break;case"ArrowUp":u=i?0:-l;break;case"End":u=100;break;case"Home":u=-100;break}return u}else return r==null?0:Ga(e,t,n,r,o)}function Wa({panelDataArray:e}){const t=Array(e.length),n=e.map(o=>o.constraints);let r=0,a=100;for(let o=0;o<e.length;o++){const i=n[o];V(i,`Panel constraints not found for index ${o}`);const{defaultSize:l}=i;l!=null&&(r++,t[o]=l,a-=l)}for(let o=0;o<e.length;o++){const i=n[o];V(i,`Panel constraints not found for index ${o}`);const{defaultSize:l}=i;if(l!=null)continue;const u=e.length-r,d=a/u;r++,t[o]=d,a-=d}return t}function ut(e,t,n){t.forEach((r,a)=>{const o=e[a];V(o,`Panel data not found for index ${a}`);const{callbacks:i,constraints:l,id:u}=o,{collapsedSize:d=0,collapsible:p}=l,f=n[u];if(f==null||r!==f){n[u]=r;const{onCollapse:h,onExpand:m,onResize:x}=i;x&&x(r,f),p&&(h||m)&&(m&&(f==null||Pe(f,d))&&!Pe(r,d)&&m(),h&&(f==null||!Pe(f,d))&&Pe(r,d)&&h())}})}function Gt(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Va({defaultSize:e,dragState:t,layout:n,panelData:r,panelIndex:a,precision:o=3}){const i=n[a];let l;return i==null?l=e!=null?e.toPrecision(o):"1":r.length===1?l="1":l=i.toPrecision(o),{flexBasis:0,flexGrow:l,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function Ua(e,t=10){let n=null;return(...a)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{e(...a)},t)}}function mr(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,n)=>{localStorage.setItem(t,n)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function os(e){return`react-resizable-panels:${e}`}function as(e){return e.map(t=>{const{constraints:n,id:r,idIsFromProps:a,order:o}=t;return a?r:o?`${o}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((t,n)=>t.localeCompare(n)).join(",")}function is(e,t){try{const n=os(e),r=t.getItem(n);if(r){const a=JSON.parse(r);if(typeof a=="object"&&a!=null)return a}}catch{}return null}function Ka(e,t,n){var r,a;const o=(r=is(e,n))!==null&&r!==void 0?r:{},i=as(t);return(a=o[i])!==null&&a!==void 0?a:null}function Xa(e,t,n,r,a){var o;const i=os(e),l=as(t),u=(o=is(e,a))!==null&&o!==void 0?o:{};u[l]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{a.setItem(i,JSON.stringify(u))}catch(d){console.error(d)}}function xr({layout:e,panelConstraints:t}){const n=[...e],r=n.reduce((o,i)=>o+i,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(o=>`${o}%`).join(", ")}`);if(!me(r,100)&&n.length>0)for(let o=0;o<t.length;o++){const i=n[o];V(i!=null,`No layout data found for index ${o}`);const l=100/r*i;n[o]=l}let a=0;for(let o=0;o<t.length;o++){const i=n[o];V(i!=null,`No layout data found for index ${o}`);const l=mt({panelConstraints:t,panelIndex:o,size:i});i!=l&&(a+=i-l,n[o]=l)}if(!me(a,0))for(let o=0;o<t.length;o++){const i=n[o];V(i!=null,`No layout data found for index ${o}`);const l=i+a,u=mt({panelConstraints:t,panelIndex:o,size:l});if(i!==u&&(a-=u-i,n[o]=u,me(a,0)))break}return n}const Ya=100,_t={getItem:e=>(mr(_t),_t.getItem(e)),setItem:(e,t)=>{mr(_t),_t.setItem(e,t)}},br={};function ls({autoSaveId:e=null,children:t,className:n="",direction:r,forwardedRef:a,id:o=null,onLayout:i=null,keyboardResizeBy:l=null,storage:u=_t,style:d,tagName:p="div",...f}){const h=qn(o),m=c.useRef(null),[x,b]=c.useState(null),[w,v]=c.useState([]),g=Ma(),E=c.useRef({}),k=c.useRef(new Map),R=c.useRef(0),_=c.useRef({autoSaveId:e,direction:r,dragState:x,id:h,keyboardResizeBy:l,onLayout:i,storage:u}),N=c.useRef({layout:w,panelDataArray:[],panelDataArrayChanged:!1});c.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),c.useImperativeHandle(a,()=>({getId:()=>_.current.id,getLayout:()=>{const{layout:y}=N.current;return y},setLayout:y=>{const{onLayout:A}=_.current,{layout:P,panelDataArray:z}=N.current,L=xr({layout:y,panelConstraints:z.map($=>$.constraints)});gr(P,L)||(v(L),N.current.layout=L,A&&A(L),ut(z,L,E.current))}}),[]),et(()=>{_.current.autoSaveId=e,_.current.direction=r,_.current.dragState=x,_.current.id=h,_.current.onLayout=i,_.current.storage=u}),Ha({committedValuesRef:_,eagerValuesRef:N,groupId:h,layout:w,panelDataArray:N.current.panelDataArray,setLayout:v,panelGroupElement:m.current}),c.useEffect(()=>{const{panelDataArray:y}=N.current;if(e){if(w.length===0||w.length!==y.length)return;let A=br[e];A==null&&(A=Ua(Xa,Ya),br[e]=A);const P=[...y],z=new Map(k.current);A(e,P,z,w,u)}},[e,w,u]),c.useEffect(()=>{});const M=c.useCallback(y=>{const{onLayout:A}=_.current,{layout:P,panelDataArray:z}=N.current;if(y.constraints.collapsible){const L=z.map(le=>le.constraints),{collapsedSize:$=0,panelSize:U,pivotIndices:X}=Ye(z,y,P);if(V(U!=null,`Panel size not found for panel "${y.id}"`),!Pe(U,$)){k.current.set(y.id,U);const ee=dt(z,y)===z.length-1?U-$:$-U,J=Dt({delta:ee,initialLayout:P,panelConstraints:L,pivotIndices:X,prevLayout:P,trigger:"imperative-api"});Gt(P,J)||(v(J),N.current.layout=J,A&&A(J),ut(z,J,E.current))}}},[]),j=c.useCallback((y,A)=>{const{onLayout:P}=_.current,{layout:z,panelDataArray:L}=N.current;if(y.constraints.collapsible){const $=L.map(Z=>Z.constraints),{collapsedSize:U=0,panelSize:X=0,minSize:le=0,pivotIndices:ee}=Ye(L,y,z),J=A??le;if(Pe(X,U)){const Z=k.current.get(y.id),ce=Z!=null&&Z>=J?Z:J,st=dt(L,y)===L.length-1?X-ce:ce-X,oe=Dt({delta:st,initialLayout:z,panelConstraints:$,pivotIndices:ee,prevLayout:z,trigger:"imperative-api"});Gt(z,oe)||(v(oe),N.current.layout=oe,P&&P(oe),ut(L,oe,E.current))}}},[]),q=c.useCallback(y=>{const{layout:A,panelDataArray:P}=N.current,{panelSize:z}=Ye(P,y,A);return V(z!=null,`Panel size not found for panel "${y.id}"`),z},[]),F=c.useCallback((y,A)=>{const{panelDataArray:P}=N.current,z=dt(P,y);return Va({defaultSize:A,dragState:x,layout:w,panelData:P,panelIndex:z})},[x,w]),B=c.useCallback(y=>{const{layout:A,panelDataArray:P}=N.current,{collapsedSize:z=0,collapsible:L,panelSize:$}=Ye(P,y,A);return V($!=null,`Panel size not found for panel "${y.id}"`),L===!0&&Pe($,z)},[]),W=c.useCallback(y=>{const{layout:A,panelDataArray:P}=N.current,{collapsedSize:z=0,collapsible:L,panelSize:$}=Ye(P,y,A);return V($!=null,`Panel size not found for panel "${y.id}"`),!L||tt($,z)>0},[]),G=c.useCallback(y=>{const{panelDataArray:A}=N.current;A.push(y),A.sort((P,z)=>{const L=P.order,$=z.order;return L==null&&$==null?0:L==null?-1:$==null?1:L-$}),N.current.panelDataArrayChanged=!0,g()},[g]);et(()=>{if(N.current.panelDataArrayChanged){N.current.panelDataArrayChanged=!1;const{autoSaveId:y,onLayout:A,storage:P}=_.current,{layout:z,panelDataArray:L}=N.current;let $=null;if(y){const X=Ka(y,L,P);X&&(k.current=new Map(Object.entries(X.expandToSizes)),$=X.layout)}$==null&&($=Wa({panelDataArray:L}));const U=xr({layout:$,panelConstraints:L.map(X=>X.constraints)});gr(z,U)||(v(U),N.current.layout=U,A&&A(U),ut(L,U,E.current))}}),et(()=>{const y=N.current;return()=>{y.layout=[]}},[]);const Y=c.useCallback(y=>{let A=!1;const P=m.current;return P&&window.getComputedStyle(P,null).getPropertyValue("direction")==="rtl"&&(A=!0),function(L){L.preventDefault();const $=m.current;if(!$)return()=>null;const{direction:U,dragState:X,id:le,keyboardResizeBy:ee,onLayout:J}=_.current,{layout:Z,panelDataArray:ce}=N.current,{initialLayout:Ee}=X??{},st=ns(le,y,$);let oe=Ba(L,y,U,X,ee,$);const ot=U==="horizontal";ot&&A&&(oe=-oe);const Re=ce.map(Ht=>Ht.constraints),De=Dt({delta:oe,initialLayout:Ee??Z,panelConstraints:Re,pivotIndices:st,prevLayout:Z,trigger:Vr(L)?"keyboard":"mouse-or-touch"}),Xe=!Gt(Z,De);(Ur(L)||Kr(L))&&R.current!=oe&&(R.current=oe,!Xe&&oe!==0?ot?xn(y,oe<0?Yr:Jr):xn(y,oe<0?Qr:Zr):xn(y,0)),Xe&&(v(De),N.current.layout=De,J&&J(De),ut(ce,De,E.current))}},[]),S=c.useCallback((y,A)=>{const{onLayout:P}=_.current,{layout:z,panelDataArray:L}=N.current,$=L.map(Z=>Z.constraints),{panelSize:U,pivotIndices:X}=Ye(L,y,z);V(U!=null,`Panel size not found for panel "${y.id}"`);const ee=dt(L,y)===L.length-1?U-A:A-U,J=Dt({delta:ee,initialLayout:z,panelConstraints:$,pivotIndices:X,prevLayout:z,trigger:"imperative-api"});Gt(z,J)||(v(J),N.current.layout=J,P&&P(J),ut(L,J,E.current))},[]),C=c.useCallback((y,A)=>{const{layout:P,panelDataArray:z}=N.current,{collapsedSize:L=0,collapsible:$}=A,{collapsedSize:U=0,collapsible:X,maxSize:le=100,minSize:ee=0}=y.constraints,{panelSize:J}=Ye(z,y,P);J!=null&&($&&X&&Pe(J,L)?Pe(L,U)||S(y,U):J<ee?S(y,ee):J>le&&S(y,le))},[S]),I=c.useCallback((y,A)=>{const{direction:P}=_.current,{layout:z}=N.current;if(!m.current)return;const L=sn(y,m.current);V(L,`Drag handle element not found for id "${y}"`);const $=ss(P,A);b({dragHandleId:y,dragHandleRect:L.getBoundingClientRect(),initialCursorPosition:$,initialLayout:z})},[]),D=c.useCallback(()=>{b(null)},[]),T=c.useCallback(y=>{const{panelDataArray:A}=N.current,P=dt(A,y);P>=0&&(A.splice(P,1),delete E.current[y.id],N.current.panelDataArrayChanged=!0,g())},[g]),O=c.useMemo(()=>({collapsePanel:M,direction:r,dragState:x,expandPanel:j,getPanelSize:q,getPanelStyle:F,groupId:h,isPanelCollapsed:B,isPanelExpanded:W,reevaluatePanelConstraints:C,registerPanel:G,registerResizeHandle:Y,resizePanel:S,startDragging:I,stopDragging:D,unregisterPanel:T,panelGroupElement:m.current}),[M,x,r,j,q,F,h,B,W,C,G,Y,S,I,D,T]),H={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return c.createElement(tn.Provider,{value:O},c.createElement(p,{...f,children:t,className:n,id:o,ref:m,style:{...H,...d},[te.group]:"",[te.groupDirection]:r,[te.groupId]:h}))}const cs=c.forwardRef((e,t)=>c.createElement(ls,{...e,forwardedRef:t}));ls.displayName="PanelGroup";cs.displayName="forwardRef(PanelGroup)";function dt(e,t){return e.findIndex(n=>n===t||n.id===t.id)}function Ye(e,t,n){const r=dt(e,t),o=r===e.length-1?[r-1,r]:[r,r+1],i=n[r];return{...t.constraints,panelSize:i,pivotIndices:o}}function Ja({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:r}){c.useEffect(()=>{if(e||n==null||r==null)return;const a=sn(t,r);if(a==null)return;const o=i=>{if(!i.defaultPrevented)switch(i.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{i.preventDefault(),n(i);break}case"F6":{i.preventDefault();const l=a.getAttribute(te.groupId);V(l,`No group element found for id "${l}"`);const u=Pt(l,r),d=ts(l,t,r);V(d!==null,`No resize element found for id "${t}"`);const p=i.shiftKey?d>0?d-1:u.length-1:d+1<u.length?d+1:0;u[p].focus();break}}};return a.addEventListener("keydown",o),()=>{a.removeEventListener("keydown",o)}},[r,e,t,n])}function us({children:e=null,className:t="",disabled:n=!1,hitAreaMargins:r,id:a,onBlur:o,onClick:i,onDragging:l,onFocus:u,onPointerDown:d,onPointerUp:p,style:f={},tabIndex:h=0,tagName:m="div",...x}){var b,w;const v=c.useRef(null),g=c.useRef({onClick:i,onDragging:l,onPointerDown:d,onPointerUp:p});c.useEffect(()=>{g.current.onClick=i,g.current.onDragging=l,g.current.onPointerDown=d,g.current.onPointerUp=p});const E=c.useContext(tn);if(E===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:k,groupId:R,registerResizeHandle:_,startDragging:N,stopDragging:M,panelGroupElement:j}=E,q=qn(a),[F,B]=c.useState("inactive"),[W,G]=c.useState(!1),[Y,S]=c.useState(null),C=c.useRef({state:F});et(()=>{C.current.state=F}),c.useEffect(()=>{if(n)S(null);else{const O=_(q);S(()=>O)}},[n,q,_]);const I=(b=r?.coarse)!==null&&b!==void 0?b:15,D=(w=r?.fine)!==null&&w!==void 0?w:5;c.useEffect(()=>{if(n||Y==null)return;const O=v.current;V(O,"Element ref not attached");let H=!1;return Pa(q,O,k,{coarse:I,fine:D},(A,P,z)=>{if(!P){B("inactive");return}switch(A){case"down":{B("drag"),H=!1,V(z,'Expected event to be defined for "down" action'),N(q,z);const{onDragging:L,onPointerDown:$}=g.current;L?.(!0),$?.();break}case"move":{const{state:L}=C.current;H=!0,L!=="drag"&&B("hover"),V(z,'Expected event to be defined for "move" action'),Y(z);break}case"up":{B("hover"),M();const{onClick:L,onDragging:$,onPointerUp:U}=g.current;$?.(!1),U?.(),H||L?.();break}}})},[I,k,n,D,_,q,Y,N,M]),Ja({disabled:n,handleId:q,resizeHandler:Y,panelGroupElement:j});const T={touchAction:"none",userSelect:"none"};return c.createElement(m,{...x,children:e,className:t,id:a,onBlur:()=>{G(!1),o?.()},onFocus:()=>{G(!0),u?.()},ref:v,role:"separator",style:{...T,...f},tabIndex:h,[te.groupDirection]:k,[te.groupId]:R,[te.resizeHandle]:"",[te.resizeHandleActive]:F==="drag"?"pointer":W?"keyboard":void 0,[te.resizeHandleEnabled]:!n,[te.resizeHandleId]:q,[te.resizeHandleState]:F})}us.displayName="PanelResizeHandle";const ds=({className:e,...t})=>s.jsx(cs,{className:K("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",e),...t}),Rn=Wr,Qa=({withHandle:e,className:t,...n})=>s.jsx(us,{className:K("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",t),...n,children:e&&s.jsx("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:s.jsx(Ea,{className:"h-2.5 w-2.5"})})}),Gn=({leftContent:e,rightContent:t,direction:n="horizontal",defaultSizes:r=[50,50],className:a})=>s.jsxs(ds,{direction:n,className:K("w-full border rounded-none",a),children:[s.jsx(Rn,{defaultSize:r[0],children:e}),s.jsx(Qa,{withHandle:!0}),s.jsx(Rn,{defaultSize:r[1],children:t})]});var on="Checkbox",[Za,Hc]=en(on),[ei,Bn]=Za(on);function ti(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:a,disabled:o,form:i,name:l,onCheckedChange:u,required:d,value:p="on",internal_do_not_use_render:f}=e,[h,m]=Pr({prop:n,defaultProp:a??!1,onChange:u,caller:on}),[x,b]=c.useState(null),[w,v]=c.useState(null),g=c.useRef(!1),E=x?!!i||!!x.closest("form"):!0,k={checked:h,disabled:o,setChecked:m,control:x,setControl:b,name:l,form:i,value:p,hasConsumerStoppedPropagationRef:g,required:d,defaultChecked:Ve(a)?!1:a,isFormControl:E,bubbleInput:w,setBubbleInput:v};return s.jsx(ei,{scope:t,...k,children:ni(f)?f(k):r})}var fs="CheckboxTrigger",hs=c.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},a)=>{const{control:o,value:i,disabled:l,checked:u,required:d,setControl:p,setChecked:f,hasConsumerStoppedPropagationRef:h,isFormControl:m,bubbleInput:x}=Bn(fs,e),b=nt(a,p),w=c.useRef(u);return c.useEffect(()=>{const v=o?.form;if(v){const g=()=>f(w.current);return v.addEventListener("reset",g),()=>v.removeEventListener("reset",g)}},[o,f]),s.jsx(rt.button,{type:"button",role:"checkbox","aria-checked":Ve(u)?"mixed":u,"aria-required":d,"data-state":bs(u),"data-disabled":l?"":void 0,disabled:l,value:i,...r,ref:b,onKeyDown:yt(t,v=>{v.key==="Enter"&&v.preventDefault()}),onClick:yt(n,v=>{f(g=>Ve(g)?!0:!g),x&&m&&(h.current=v.isPropagationStopped(),h.current||v.stopPropagation())})})});hs.displayName=fs;var Wn=c.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:o,required:i,disabled:l,value:u,onCheckedChange:d,form:p,...f}=e;return s.jsx(ti,{__scopeCheckbox:n,checked:a,defaultChecked:o,disabled:l,required:i,onCheckedChange:d,name:r,form:p,value:u,internal_do_not_use_render:({isFormControl:h})=>s.jsxs(s.Fragment,{children:[s.jsx(hs,{...f,ref:t,__scopeCheckbox:n}),h&&s.jsx(xs,{__scopeCheckbox:n})]})})});Wn.displayName=on;var ps="CheckboxIndicator",gs=c.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,o=Bn(ps,n);return s.jsx(Or,{present:r||Ve(o.checked)||o.checked===!0,children:s.jsx(rt.span,{"data-state":bs(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});gs.displayName=ps;var ms="CheckboxBubbleInput",xs=c.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:a,checked:o,defaultChecked:i,required:l,disabled:u,name:d,value:p,form:f,bubbleInput:h,setBubbleInput:m}=Bn(ms,e),x=nt(n,m),b=Lr(o),w=Mr(r);c.useEffect(()=>{const g=h;if(!g)return;const E=window.HTMLInputElement.prototype,R=Object.getOwnPropertyDescriptor(E,"checked").set,_=!a.current;if(b!==o&&R){const N=new Event("click",{bubbles:_});g.indeterminate=Ve(o),R.call(g,Ve(o)?!1:o),g.dispatchEvent(N)}},[h,b,o,a]);const v=c.useRef(Ve(o)?!1:o);return s.jsx(rt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??v.current,required:l,disabled:u,name:d,value:p,form:f,...t,tabIndex:-1,ref:x,style:{...t.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});xs.displayName=ms;function ni(e){return typeof e=="function"}function Ve(e){return e==="indeterminate"}function bs(e){return Ve(e)?"indeterminate":e?"checked":"unchecked"}const vs=c.forwardRef(({className:e,...t},n)=>s.jsx(Wn,{ref:n,className:K("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(gs,{className:K("flex items-center justify-center text-current"),children:s.jsx(ta,{className:"h-4 w-4"})})}));vs.displayName=Wn.displayName;const ri=({control:e,name:t,label:n,options:r,orientation:a="vertical",className:o="",maxSelections:i,onValueChange:l})=>{const{setValue:u}=na(),d=qr({control:e,name:t});return c.useEffect(()=>{if(i&&d&&d.length>i){const p=d.slice(0,i);u(t,p),l&&l(p)}},[d,i,t,u,l]),s.jsx(Se,{control:e,name:t,render:({field:p})=>s.jsxs(Ce,{className:`space-y-2 ${a==="horizontal"?"space-x-4":""} ${o}`,children:[n&&s.jsx("div",{className:"font-medium",children:n}),r.map(f=>{const h=f.id||`${t}_${f.value}`;return s.jsxs(Ce,{className:"flex flex-row items-start space-x-3 space-y-0",children:[s.jsx(Ne,{children:s.jsx(vs,{id:h,checked:p.value?.includes(f.value)||!1,onCheckedChange:m=>{const x=p.value||[];if(m&&i&&x.length>=i)return;const b=m?[...x,f.value]:x.filter(w=>w!==f.value);p.onChange(b),l&&l(b)}})}),s.jsxs("div",{className:"space-y-1 leading-none",children:[s.jsx("span",{children:f.label})," ",f.helperText&&s.jsx(Me,{children:f.helperText})]})]},f.value)})]})})};var ue=(e=>(e.TRUE_FALSE_NOT_GIVEN="true_false_not_given",e.YES_NO_NOT_GIVEN="yes_no_not_given",e.MULTIPLE_CHOICE="multiple_choice_multiple_answers",e.MATCHING_HEADINGS="matching_headings",e.MATCHING_INFORMATION="matching_information",e.MATCHING_FEATURES="matching_features",e.MATCHING_SENTENCE_ENDINGS="matching_sentence_endings",e.SENTENCE_COMPLETION="sentence_completion",e.SUMMARY_COMPLETION="summary_completion",e.DIAGRAM_LABEL="diagram_label",e.SHORT_ANSWER="short_answer",e.LIST_SELECTION="list_selection",e))(ue||{});const an=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ct(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Vn(e){return"nodeType"in e}function fe(e){var t,n;return e?Ct(e)?e:Vn(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Un(e){const{Document:t}=fe(e);return e instanceof t}function $t(e){return Ct(e)?!1:e instanceof fe(e).HTMLElement}function ws(e){return e instanceof fe(e).SVGElement}function Et(e){return e?Ct(e)?e.document:Vn(e)?Un(e)?e:$t(e)||ws(e)?e.ownerDocument:document:document:document}const Ke=an?c.useLayoutEffect:c.useEffect;function Kn(e){const t=c.useRef(e);return Ke(()=>{t.current=e}),c.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.current==null?void 0:t.current(...r)},[])}function si(){const e=c.useRef(null),t=c.useCallback((r,a)=>{e.current=setInterval(r,a)},[]),n=c.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Lt(e,t){t===void 0&&(t=[e]);const n=c.useRef(e);return Ke(()=>{n.current!==e&&(n.current=e)},t),n}function qt(e,t){const n=c.useRef();return c.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Xt(e){const t=Kn(e),n=c.useRef(null),r=c.useCallback(a=>{a!==n.current&&t?.(a,n.current),n.current=a},[]);return[n,r]}function Dn(e){const t=c.useRef();return c.useEffect(()=>{t.current=e},[e]),t.current}let vn={};function ln(e,t){return c.useMemo(()=>{if(t)return t;const n=vn[e]==null?0:vn[e]+1;return vn[e]=n,e+"-"+n},[e,t])}function ys(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((o,i)=>{const l=Object.entries(i);for(const[u,d]of l){const p=o[u];p!=null&&(o[u]=p+e*d)}return o},{...t})}}const bt=ys(1),Yt=ys(-1);function oi(e){return"clientX"in e&&"clientY"in e}function Cs(e){if(!e)return!1;const{KeyboardEvent:t}=fe(e.target);return t&&e instanceof t}function ai(e){if(!e)return!1;const{TouchEvent:t}=fe(e.target);return t&&e instanceof t}function _n(e){if(ai(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return oi(e)?{x:e.clientX,y:e.clientY}:null}const vr="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function ii(e){return e.matches(vr)?e:e.querySelector(vr)}const li={display:"none"};function ci(e){let{id:t,value:n}=e;return ye.createElement("div",{id:t,style:li},n)}function ui(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ye.createElement("div",{id:t,style:a,role:"status","aria-live":r,"aria-atomic":!0},n)}function di(){const[e,t]=c.useState("");return{announce:c.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Es=c.createContext(null);function fi(e){const t=c.useContext(Es);c.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function hi(){const[e]=c.useState(()=>new Set),t=c.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[c.useCallback(r=>{let{type:a,event:o}=r;e.forEach(i=>{var l;return(l=i[a])==null?void 0:l.call(i,o)})},[e]),t]}const pi={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},gi={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function mi(e){let{announcements:t=gi,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=pi}=e;const{announce:o,announcement:i}=di(),l=ln("DndLiveRegion"),[u,d]=c.useState(!1);if(c.useEffect(()=>{d(!0)},[]),fi(c.useMemo(()=>({onDragStart(f){let{active:h}=f;o(t.onDragStart({active:h}))},onDragMove(f){let{active:h,over:m}=f;t.onDragMove&&o(t.onDragMove({active:h,over:m}))},onDragOver(f){let{active:h,over:m}=f;o(t.onDragOver({active:h,over:m}))},onDragEnd(f){let{active:h,over:m}=f;o(t.onDragEnd({active:h,over:m}))},onDragCancel(f){let{active:h,over:m}=f;o(t.onDragCancel({active:h,over:m}))}}),[o,t])),!u)return null;const p=ye.createElement(ye.Fragment,null,ye.createElement(ci,{id:r,value:a.draggable}),ye.createElement(ui,{id:l,announcement:i}));return n?Rt.createPortal(p,n):p}var re;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(re||(re={}));function Jt(){}const ke=Object.freeze({x:0,y:0});function xi(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function bi(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function vi(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),i=a-r,l=o-n;if(r<a&&n<o){const u=t.width*t.height,d=e.width*e.height,p=i*l,f=p/(u+d-p);return Number(f.toFixed(4))}return 0}const wi=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=[];for(const o of r){const{id:i}=o,l=n.get(i);if(l){const u=vi(l,t);u>0&&a.push({id:i,data:{droppableContainer:o,value:u}})}}return a.sort(xi)};function yi(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Ss(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ke}function Ci(e){return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return a.reduce((i,l)=>({...i,top:i.top+e*l.y,bottom:i.bottom+e*l.y,left:i.left+e*l.x,right:i.right+e*l.x}),{...n})}}const Ei=Ci(1);function Si(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Ni(e,t,n){const r=Si(t);if(!r)return e;const{scaleX:a,scaleY:o,x:i,y:l}=r,u=e.left-i-(1-a)*parseFloat(n),d=e.top-l-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),p=a?e.width/a:e.width,f=o?e.height/o:e.height;return{width:p,height:f,top:d,right:u+p,bottom:d+f,left:u}}const ji={ignoreTransform:!1};function Ft(e,t){t===void 0&&(t=ji);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:p}=fe(e).getComputedStyle(e);d&&(n=Ni(n,d,p))}const{top:r,left:a,width:o,height:i,bottom:l,right:u}=n;return{top:r,left:a,width:o,height:i,bottom:l,right:u}}function wr(e){return Ft(e,{ignoreTransform:!0})}function ki(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Ri(e,t){return t===void 0&&(t=fe(e).getComputedStyle(e)),t.position==="fixed"}function Di(e,t){t===void 0&&(t=fe(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const o=t[a];return typeof o=="string"?n.test(o):!1})}function Xn(e,t){const n=[];function r(a){if(t!=null&&n.length>=t||!a)return n;if(Un(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!$t(a)||ws(a)||n.includes(a))return n;const o=fe(e).getComputedStyle(a);return a!==e&&Di(a,o)&&n.push(a),Ri(a,o)?n:r(a.parentNode)}return e?r(e):n}function Ns(e){const[t]=Xn(e,1);return t??null}function wn(e){return!an||!e?null:Ct(e)?e:Vn(e)?Un(e)||e===Et(e).scrollingElement?window:$t(e)?e:null:null}function js(e){return Ct(e)?e.scrollX:e.scrollLeft}function ks(e){return Ct(e)?e.scrollY:e.scrollTop}function In(e){return{x:js(e),y:ks(e)}}var se;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(se||(se={}));function Rs(e){return!an||!e?!1:e===document.scrollingElement}function Ds(e){const t={x:0,y:0},n=Rs(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,i=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:a,isLeft:o,isBottom:i,isRight:l,maxScroll:r,minScroll:t}}const _i={x:.2,y:.2};function Ii(e,t,n,r,a){let{top:o,left:i,right:l,bottom:u}=n;r===void 0&&(r=10),a===void 0&&(a=_i);const{isTop:d,isBottom:p,isLeft:f,isRight:h}=Ds(e),m={x:0,y:0},x={x:0,y:0},b={height:t.height*a.y,width:t.width*a.x};return!d&&o<=t.top+b.height?(m.y=se.Backward,x.y=r*Math.abs((t.top+b.height-o)/b.height)):!p&&u>=t.bottom-b.height&&(m.y=se.Forward,x.y=r*Math.abs((t.bottom-b.height-u)/b.height)),!h&&l>=t.right-b.width?(m.x=se.Forward,x.x=r*Math.abs((t.right-b.width-l)/b.width)):!f&&i<=t.left+b.width&&(m.x=se.Backward,x.x=r*Math.abs((t.left+b.width-i)/b.width)),{direction:m,speed:x}}function Ai(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:i}=window;return{top:0,left:0,right:o,bottom:i,width:o,height:i}}const{top:t,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function _s(e){return e.reduce((t,n)=>bt(t,In(n)),ke)}function zi(e){return e.reduce((t,n)=>t+js(n),0)}function Ti(e){return e.reduce((t,n)=>t+ks(n),0)}function Pi(e,t){if(t===void 0&&(t=Ft),!e)return;const{top:n,left:r,bottom:a,right:o}=t(e);Ns(e)&&(a<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Li=[["x",["left","right"],zi],["y",["top","bottom"],Ti]];class Yn{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Xn(n),a=_s(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,i,l]of Li)for(const u of i)Object.defineProperty(this,u,{get:()=>{const d=l(r),p=a[o]-d;return this.rect[u]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class It{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var a;(a=this.target)==null||a.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Mi(e){const{EventTarget:t}=fe(e);return e instanceof t?e:Et(e)}function yn(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var we;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(we||(we={}));function yr(e){e.preventDefault()}function Oi(e){e.stopPropagation()}var Q;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Q||(Q={}));const Is={start:[Q.Space,Q.Enter],cancel:[Q.Esc],end:[Q.Space,Q.Enter,Q.Tab]},$i=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Q.Right:return{...n,x:n.x+25};case Q.Left:return{...n,x:n.x-25};case Q.Down:return{...n,y:n.y+25};case Q.Up:return{...n,y:n.y-25}}};class As{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new It(Et(n)),this.windowListeners=new It(fe(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(we.Resize,this.handleCancel),this.windowListeners.add(we.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(we.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Pi(r),n(ke)}handleKeyDown(t){if(Cs(t)){const{active:n,context:r,options:a}=this.props,{keyboardCodes:o=Is,coordinateGetter:i=$i,scrollBehavior:l="smooth"}=a,{code:u}=t;if(o.end.includes(u)){this.handleEnd(t);return}if(o.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:d}=r.current,p=d?{x:d.left,y:d.top}:ke;this.referenceCoordinates||(this.referenceCoordinates=p);const f=i(t,{active:n,context:r.current,currentCoordinates:p});if(f){const h=Yt(f,p),m={x:0,y:0},{scrollableAncestors:x}=r.current;for(const b of x){const w=t.code,{isTop:v,isRight:g,isLeft:E,isBottom:k,maxScroll:R,minScroll:_}=Ds(b),N=Ai(b),M={x:Math.min(w===Q.Right?N.right-N.width/2:N.right,Math.max(w===Q.Right?N.left:N.left+N.width/2,f.x)),y:Math.min(w===Q.Down?N.bottom-N.height/2:N.bottom,Math.max(w===Q.Down?N.top:N.top+N.height/2,f.y))},j=w===Q.Right&&!g||w===Q.Left&&!E,q=w===Q.Down&&!k||w===Q.Up&&!v;if(j&&M.x!==f.x){const F=b.scrollLeft+h.x,B=w===Q.Right&&F<=R.x||w===Q.Left&&F>=_.x;if(B&&!h.y){b.scrollTo({left:F,behavior:l});return}B?m.x=b.scrollLeft-F:m.x=w===Q.Right?b.scrollLeft-R.x:b.scrollLeft-_.x,m.x&&b.scrollBy({left:-m.x,behavior:l});break}else if(q&&M.y!==f.y){const F=b.scrollTop+h.y,B=w===Q.Down&&F<=R.y||w===Q.Up&&F>=_.y;if(B&&!h.x){b.scrollTo({top:F,behavior:l});return}B?m.y=b.scrollTop-F:m.y=w===Q.Down?b.scrollTop-R.y:b.scrollTop-_.y,m.y&&b.scrollBy({top:-m.y,behavior:l});break}}this.handleMove(t,bt(Yt(f,this.referenceCoordinates),m))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}As.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Is,onActivation:a}=t,{active:o}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const l=o.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),a?.({event:e.nativeEvent}),!0)}return!1}}];function Cr(e){return!!(e&&"distance"in e)}function Er(e){return!!(e&&"delay"in e)}class Jn{constructor(t,n,r){var a;r===void 0&&(r=Mi(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:i}=o;this.props=t,this.events=n,this.document=Et(i),this.documentListeners=new It(this.document),this.listeners=new It(r),this.windowListeners=new It(fe(i)),this.initialCoordinates=(a=_n(o))!=null?a:ke,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(we.Resize,this.handleCancel),this.windowListeners.add(we.DragStart,yr),this.windowListeners.add(we.VisibilityChange,this.handleCancel),this.windowListeners.add(we.ContextMenu,yr),this.documentListeners.add(we.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Er(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Cr(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:a}=this.props;a(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(we.Click,Oi,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(we.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:a,props:o}=this,{onMove:i,options:{activationConstraint:l}}=o;if(!a)return;const u=(n=_n(t))!=null?n:ke,d=Yt(a,u);if(!r&&l){if(Cr(l)){if(l.tolerance!=null&&yn(d,l.tolerance))return this.handleCancel();if(yn(d,l.distance))return this.handleStart()}if(Er(l)&&yn(d,l.tolerance))return this.handleCancel();this.handlePending(l,d);return}t.cancelable&&t.preventDefault(),i(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Q.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const qi={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class zs extends Jn{constructor(t){const{event:n}=t,r=Et(n.target);super(t,qi,r)}}zs.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const Fi={move:{name:"mousemove"},end:{name:"mouseup"}};var An;(function(e){e[e.RightClick=2]="RightClick"})(An||(An={}));class Hi extends Jn{constructor(t){super(t,Fi,Et(t.event.target))}}Hi.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===An.RightClick?!1:(r?.({event:n}),!0)}}];const Cn={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Gi extends Jn{constructor(t){super(t,Cn)}static setup(){return window.addEventListener(Cn.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Cn.move.name,t)};function t(){}}}Gi.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:a}=n;return a.length>1?!1:(r?.({event:n}),!0)}}];var At;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(At||(At={}));var Qt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Qt||(Qt={}));function Bi(e){let{acceleration:t,activator:n=At.Pointer,canScroll:r,draggingRect:a,enabled:o,interval:i=5,order:l=Qt.TreeOrder,pointerCoordinates:u,scrollableAncestors:d,scrollableAncestorRects:p,delta:f,threshold:h}=e;const m=Vi({delta:f,disabled:!o}),[x,b]=si(),w=c.useRef({x:0,y:0}),v=c.useRef({x:0,y:0}),g=c.useMemo(()=>{switch(n){case At.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case At.DraggableRect:return a}},[n,a,u]),E=c.useRef(null),k=c.useCallback(()=>{const _=E.current;if(!_)return;const N=w.current.x*v.current.x,M=w.current.y*v.current.y;_.scrollBy(N,M)},[]),R=c.useMemo(()=>l===Qt.TreeOrder?[...d].reverse():d,[l,d]);c.useEffect(()=>{if(!o||!d.length||!g){b();return}for(const _ of R){if(r?.(_)===!1)continue;const N=d.indexOf(_),M=p[N];if(!M)continue;const{direction:j,speed:q}=Ii(_,M,g,t,h);for(const F of["x","y"])m[F][j[F]]||(q[F]=0,j[F]=0);if(q.x>0||q.y>0){b(),E.current=_,x(k,i),w.current=q,v.current=j;return}}w.current={x:0,y:0},v.current={x:0,y:0},b()},[t,k,r,b,o,i,JSON.stringify(g),JSON.stringify(m),x,d,R,p,JSON.stringify(h)])}const Wi={x:{[se.Backward]:!1,[se.Forward]:!1},y:{[se.Backward]:!1,[se.Forward]:!1}};function Vi(e){let{delta:t,disabled:n}=e;const r=Dn(t);return qt(a=>{if(n||!r||!a)return Wi;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[se.Backward]:a.x[se.Backward]||o.x===-1,[se.Forward]:a.x[se.Forward]||o.x===1},y:{[se.Backward]:a.y[se.Backward]||o.y===-1,[se.Forward]:a.y[se.Forward]||o.y===1}}},[n,t,r])}function Ui(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return qt(a=>{var o;return t==null?null:(o=r??a)!=null?o:null},[r,t])}function Ki(e,t){return c.useMemo(()=>e.reduce((n,r)=>{const{sensor:a}=r,o=a.activators.map(i=>({eventName:i.eventName,handler:t(i.handler,r)}));return[...n,...o]},[]),[e,t])}var Mt;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Mt||(Mt={}));var zn;(function(e){e.Optimized="optimized"})(zn||(zn={}));const Sr=new Map;function Xi(e,t){let{dragging:n,dependencies:r,config:a}=t;const[o,i]=c.useState(null),{frequency:l,measure:u,strategy:d}=a,p=c.useRef(e),f=w(),h=Lt(f),m=c.useCallback(function(v){v===void 0&&(v=[]),!h.current&&i(g=>g===null?v:g.concat(v.filter(E=>!g.includes(E))))},[h]),x=c.useRef(null),b=qt(v=>{if(f&&!n)return Sr;if(!v||v===Sr||p.current!==e||o!=null){const g=new Map;for(let E of e){if(!E)continue;if(o&&o.length>0&&!o.includes(E.id)&&E.rect.current){g.set(E.id,E.rect.current);continue}const k=E.node.current,R=k?new Yn(u(k),k):null;E.rect.current=R,R&&g.set(E.id,R)}return g}return v},[e,o,n,f,u]);return c.useEffect(()=>{p.current=e},[e]),c.useEffect(()=>{f||m()},[n,f]),c.useEffect(()=>{o&&o.length>0&&i(null)},[JSON.stringify(o)]),c.useEffect(()=>{f||typeof l!="number"||x.current!==null||(x.current=setTimeout(()=>{m(),x.current=null},l))},[l,f,m,...r]),{droppableRects:b,measureDroppableContainers:m,measuringScheduled:o!=null};function w(){switch(d){case Mt.Always:return!1;case Mt.BeforeDragging:return n;default:return!n}}}function Ts(e,t){return qt(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Yi(e,t){return Ts(e,t)}function Ji(e){let{callback:t,disabled:n}=e;const r=Kn(t),a=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return c.useEffect(()=>()=>a?.disconnect(),[a]),a}function cn(e){let{callback:t,disabled:n}=e;const r=Kn(t),a=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return c.useEffect(()=>()=>a?.disconnect(),[a]),a}function Qi(e){return new Yn(Ft(e),e)}function Nr(e,t,n){t===void 0&&(t=Qi);const[r,a]=c.useState(null);function o(){a(u=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=u??n)!=null?d:null}const p=t(e);return JSON.stringify(u)===JSON.stringify(p)?u:p})}const i=Ji({callback(u){if(e)for(const d of u){const{type:p,target:f}=d;if(p==="childList"&&f instanceof HTMLElement&&f.contains(e)){o();break}}}}),l=cn({callback:o});return Ke(()=>{o(),e?(l?.observe(e),i?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),i?.disconnect())},[e]),r}function Zi(e){const t=Ts(e);return Ss(e,t)}const jr=[];function el(e){const t=c.useRef(e),n=qt(r=>e?r&&r!==jr&&e&&t.current&&e.parentNode===t.current.parentNode?r:Xn(e):jr,[e]);return c.useEffect(()=>{t.current=e},[e]),n}function tl(e){const[t,n]=c.useState(null),r=c.useRef(e),a=c.useCallback(o=>{const i=wn(o.target);i&&n(l=>l?(l.set(i,In(i)),new Map(l)):null)},[]);return c.useEffect(()=>{const o=r.current;if(e!==o){i(o);const l=e.map(u=>{const d=wn(u);return d?(d.addEventListener("scroll",a,{passive:!0}),[d,In(d)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),r.current=e}return()=>{i(e),i(o)};function i(l){l.forEach(u=>{const d=wn(u);d?.removeEventListener("scroll",a)})}},[a,e]),c.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,i)=>bt(o,i),ke):_s(e):ke,[e,t])}function kr(e,t){t===void 0&&(t=[]);const n=c.useRef(null);return c.useEffect(()=>{n.current=null},t),c.useEffect(()=>{const r=e!==ke;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Yt(e,n.current):ke}function nl(e){c.useEffect(()=>{if(!an)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function rl(e,t){return c.useMemo(()=>e.reduce((n,r)=>{let{eventName:a,handler:o}=r;return n[a]=i=>{o(i,t)},n},{}),[e,t])}function Ps(e){return c.useMemo(()=>e?ki(e):null,[e])}const Rr=[];function sl(e,t){t===void 0&&(t=Ft);const[n]=e,r=Ps(n?fe(n):null),[a,o]=c.useState(Rr);function i(){o(()=>e.length?e.map(u=>Rs(u)?r:new Yn(t(u),u)):Rr)}const l=cn({callback:i});return Ke(()=>{l?.disconnect(),i(),e.forEach(u=>l?.observe(u))},[e]),a}function ol(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return $t(t)?t:e}function al(e){let{measure:t}=e;const[n,r]=c.useState(null),a=c.useCallback(d=>{for(const{target:p}of d)if($t(p)){r(f=>{const h=t(p);return f?{...f,width:h.width,height:h.height}:h});break}},[t]),o=cn({callback:a}),i=c.useCallback(d=>{const p=ol(d);o?.disconnect(),p&&o?.observe(p),r(p?t(p):null)},[t,o]),[l,u]=Xt(i);return c.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const il=[{sensor:zs,options:{}},{sensor:As,options:{}}],ll={current:{}},Wt={draggable:{measure:wr},droppable:{measure:wr,strategy:Mt.WhileDragging,frequency:zn.Optimized},dragOverlay:{measure:Ft}};class zt extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const cl={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new zt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Jt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Wt,measureDroppableContainers:Jt,windowRect:null,measuringScheduled:!1},ul={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Jt,draggableNodes:new Map,over:null,measureDroppableContainers:Jt},un=c.createContext(ul),dl=c.createContext(cl);function fl(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new zt}}}function hl(e,t){switch(t.type){case re.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case re.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case re.DragEnd:case re.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case re.RegisterDroppable:{const{element:n}=t,{id:r}=n,a=new zt(e.droppable.containers);return a.set(r,n),{...e,droppable:{...e.droppable,containers:a}}}case re.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const i=new zt(e.droppable.containers);return i.set(n,{...o,disabled:a}),{...e,droppable:{...e.droppable,containers:i}}}case re.UnregisterDroppable:{const{id:n,key:r}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const o=new zt(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function pl(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:a}=c.useContext(un),o=Dn(r),i=Dn(n?.id);return c.useEffect(()=>{if(!t&&!r&&o&&i!=null){if(!Cs(o)||document.activeElement===o.target)return;const l=a.get(i);if(!l)return;const{activatorNode:u,node:d}=l;if(!u.current&&!d.current)return;requestAnimationFrame(()=>{for(const p of[u.current,d.current]){if(!p)continue;const f=ii(p);if(f){f.focus();break}}})}},[r,t,a,i,o]),null}function gl(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((a,o)=>o({transform:a,...r}),n):n}function ml(e){return c.useMemo(()=>({draggable:{...Wt.draggable,...e?.draggable},droppable:{...Wt.droppable,...e?.droppable},dragOverlay:{...Wt.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function xl(e){let{activeNode:t,measure:n,initialRect:r,config:a=!0}=e;const o=c.useRef(!1),{x:i,y:l}=typeof a=="boolean"?{x:a,y:a}:a;Ke(()=>{if(!i&&!l||!t){o.current=!1;return}if(o.current||!r)return;const d=t?.node.current;if(!d||d.isConnected===!1)return;const p=n(d),f=Ss(p,r);if(i||(f.x=0),l||(f.y=0),o.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const h=Ns(d);h&&h.scrollBy({top:f.y,left:f.x})}},[t,i,l,r,n])}const Ls=c.createContext({...ke,scaleX:1,scaleY:1});var Ge;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ge||(Ge={}));const bl=c.memo(function(t){var n,r,a,o;let{id:i,accessibility:l,autoScroll:u=!0,children:d,sensors:p=il,collisionDetection:f=wi,measuring:h,modifiers:m,...x}=t;const b=c.useReducer(hl,void 0,fl),[w,v]=b,[g,E]=hi(),[k,R]=c.useState(Ge.Uninitialized),_=k===Ge.Initialized,{draggable:{active:N,nodes:M,translate:j},droppable:{containers:q}}=w,F=N!=null?M.get(N):null,B=c.useRef({initial:null,translated:null}),W=c.useMemo(()=>{var ie;return N!=null?{id:N,data:(ie=F?.data)!=null?ie:ll,rect:B}:null},[N,F]),G=c.useRef(null),[Y,S]=c.useState(null),[C,I]=c.useState(null),D=Lt(x,Object.values(x)),T=ln("DndDescribedBy",i),O=c.useMemo(()=>q.getEnabled(),[q]),H=ml(h),{droppableRects:y,measureDroppableContainers:A,measuringScheduled:P}=Xi(O,{dragging:_,dependencies:[j.x,j.y],config:H.droppable}),z=Ui(M,N),L=c.useMemo(()=>C?_n(C):null,[C]),$=zo(),U=Yi(z,H.draggable.measure);xl({activeNode:N!=null?M.get(N):null,config:$.layoutShiftCompensation,initialRect:U,measure:H.draggable.measure});const X=Nr(z,H.draggable.measure,U),le=Nr(z?z.parentElement:null),ee=c.useRef({activatorEvent:null,active:null,activeNode:z,collisionRect:null,collisions:null,droppableRects:y,draggableNodes:M,draggingNode:null,draggingNodeRect:null,droppableContainers:q,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),J=q.getNodeFor((n=ee.current.over)==null?void 0:n.id),Z=al({measure:H.dragOverlay.measure}),ce=(r=Z.nodeRef.current)!=null?r:z,Ee=_?(a=Z.rect)!=null?a:X:null,st=!!(Z.nodeRef.current&&Z.rect),oe=Zi(st?null:X),ot=Ps(ce?fe(ce):null),Re=el(_?J??z:null),De=sl(Re),Xe=gl(m,{transform:{x:j.x-oe.x,y:j.y-oe.y,scaleX:1,scaleY:1},activatorEvent:C,active:W,activeNodeRect:X,containerNodeRect:le,draggingNodeRect:Ee,over:ee.current.over,overlayNodeRect:Z.rect,scrollableAncestors:Re,scrollableAncestorRects:De,windowRect:ot}),Ht=L?bt(L,j):null,er=tl(Re),jo=kr(er),ko=kr(er,[X]),at=bt(Xe,jo),it=Ee?Ei(Ee,Xe):null,St=W&&it?f({active:W,collisionRect:it,droppableRects:y,droppableContainers:O,pointerCoordinates:Ht}):null,tr=bi(St,"id"),[$e,nr]=c.useState(null),Ro=st?Xe:bt(Xe,ko),Do=yi(Ro,(o=$e?.rect)!=null?o:null,X),fn=c.useRef(null),rr=c.useCallback((ie,he)=>{let{sensor:pe,options:qe}=he;if(G.current==null)return;const xe=M.get(G.current);if(!xe)return;const ge=ie.nativeEvent,_e=new pe({active:G.current,activeNode:xe,event:ge,options:qe,context:ee,onAbort(ae){if(!M.get(ae))return;const{onDragAbort:Ie}=D.current,Ae={id:ae};Ie?.(Ae),g({type:"onDragAbort",event:Ae})},onPending(ae,Fe,Ie,Ae){if(!M.get(ae))return;const{onDragPending:jt}=D.current,He={id:ae,constraint:Fe,initialCoordinates:Ie,offset:Ae};jt?.(He),g({type:"onDragPending",event:He})},onStart(ae){const Fe=G.current;if(Fe==null)return;const Ie=M.get(Fe);if(!Ie)return;const{onDragStart:Ae}=D.current,Nt={activatorEvent:ge,active:{id:Fe,data:Ie.data,rect:B}};Rt.unstable_batchedUpdates(()=>{Ae?.(Nt),R(Ge.Initializing),v({type:re.DragStart,initialCoordinates:ae,active:Fe}),g({type:"onDragStart",event:Nt}),S(fn.current),I(ge)})},onMove(ae){v({type:re.DragMove,coordinates:ae})},onEnd:lt(re.DragEnd),onCancel:lt(re.DragCancel)});fn.current=_e;function lt(ae){return async function(){const{active:Ie,collisions:Ae,over:Nt,scrollAdjustedTranslate:jt}=ee.current;let He=null;if(Ie&&jt){const{cancelDrop:kt}=D.current;He={activatorEvent:ge,active:Ie,collisions:Ae,delta:jt,over:Nt},ae===re.DragEnd&&typeof kt=="function"&&await Promise.resolve(kt(He))&&(ae=re.DragCancel)}G.current=null,Rt.unstable_batchedUpdates(()=>{v({type:ae}),R(Ge.Uninitialized),nr(null),S(null),I(null),fn.current=null;const kt=ae===re.DragEnd?"onDragEnd":"onDragCancel";if(He){const hn=D.current[kt];hn?.(He),g({type:kt,event:He})}})}}},[M]),_o=c.useCallback((ie,he)=>(pe,qe)=>{const xe=pe.nativeEvent,ge=M.get(qe);if(G.current!==null||!ge||xe.dndKit||xe.defaultPrevented)return;const _e={active:ge};ie(pe,he.options,_e)===!0&&(xe.dndKit={capturedBy:he.sensor},G.current=qe,rr(pe,he))},[M,rr]),sr=Ki(p,_o);nl(p),Ke(()=>{X&&k===Ge.Initializing&&R(Ge.Initialized)},[X,k]),c.useEffect(()=>{const{onDragMove:ie}=D.current,{active:he,activatorEvent:pe,collisions:qe,over:xe}=ee.current;if(!he||!pe)return;const ge={active:he,activatorEvent:pe,collisions:qe,delta:{x:at.x,y:at.y},over:xe};Rt.unstable_batchedUpdates(()=>{ie?.(ge),g({type:"onDragMove",event:ge})})},[at.x,at.y]),c.useEffect(()=>{const{active:ie,activatorEvent:he,collisions:pe,droppableContainers:qe,scrollAdjustedTranslate:xe}=ee.current;if(!ie||G.current==null||!he||!xe)return;const{onDragOver:ge}=D.current,_e=qe.get(tr),lt=_e&&_e.rect.current?{id:_e.id,rect:_e.rect.current,data:_e.data,disabled:_e.disabled}:null,ae={active:ie,activatorEvent:he,collisions:pe,delta:{x:xe.x,y:xe.y},over:lt};Rt.unstable_batchedUpdates(()=>{nr(lt),ge?.(ae),g({type:"onDragOver",event:ae})})},[tr]),Ke(()=>{ee.current={activatorEvent:C,active:W,activeNode:z,collisionRect:it,collisions:St,droppableRects:y,draggableNodes:M,draggingNode:ce,draggingNodeRect:Ee,droppableContainers:q,over:$e,scrollableAncestors:Re,scrollAdjustedTranslate:at},B.current={initial:Ee,translated:it}},[W,z,St,it,M,ce,Ee,y,q,$e,Re,at]),Bi({...$,delta:j,draggingRect:it,pointerCoordinates:Ht,scrollableAncestors:Re,scrollableAncestorRects:De});const Io=c.useMemo(()=>({active:W,activeNode:z,activeNodeRect:X,activatorEvent:C,collisions:St,containerNodeRect:le,dragOverlay:Z,draggableNodes:M,droppableContainers:q,droppableRects:y,over:$e,measureDroppableContainers:A,scrollableAncestors:Re,scrollableAncestorRects:De,measuringConfiguration:H,measuringScheduled:P,windowRect:ot}),[W,z,X,C,St,le,Z,M,q,y,$e,A,Re,De,H,P,ot]),Ao=c.useMemo(()=>({activatorEvent:C,activators:sr,active:W,activeNodeRect:X,ariaDescribedById:{draggable:T},dispatch:v,draggableNodes:M,over:$e,measureDroppableContainers:A}),[C,sr,W,X,v,T,M,$e,A]);return ye.createElement(Es.Provider,{value:E},ye.createElement(un.Provider,{value:Ao},ye.createElement(dl.Provider,{value:Io},ye.createElement(Ls.Provider,{value:Do},d)),ye.createElement(pl,{disabled:l?.restoreFocus===!1})),ye.createElement(mi,{...l,hiddenTextDescribedById:T}));function zo(){const ie=Y?.autoScrollEnabled===!1,he=typeof u=="object"?u.enabled===!1:u===!1,pe=_&&!ie&&!he;return typeof u=="object"?{...u,enabled:pe}:{enabled:pe}}}),vl=c.createContext(null),Dr="button",wl="Draggable";function yl(e){let{id:t,data:n,disabled:r=!1,attributes:a}=e;const o=ln(wl),{activators:i,activatorEvent:l,active:u,activeNodeRect:d,ariaDescribedById:p,draggableNodes:f,over:h}=c.useContext(un),{role:m=Dr,roleDescription:x="draggable",tabIndex:b=0}=a??{},w=u?.id===t,v=c.useContext(w?Ls:vl),[g,E]=Xt(),[k,R]=Xt(),_=rl(i,t),N=Lt(n);Ke(()=>(f.set(t,{id:t,key:o,node:g,activatorNode:k,data:N}),()=>{const j=f.get(t);j&&j.key===o&&f.delete(t)}),[f,t]);const M=c.useMemo(()=>({role:m,tabIndex:b,"aria-disabled":r,"aria-pressed":w&&m===Dr?!0:void 0,"aria-roledescription":x,"aria-describedby":p.draggable}),[r,m,b,w,x,p.draggable]);return{active:u,activatorEvent:l,activeNodeRect:d,attributes:M,isDragging:w,listeners:r?void 0:_,node:g,over:h,setNodeRef:E,setActivatorNodeRef:R,transform:v}}const Cl="Droppable",El={timeout:25};function Sl(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:a}=e;const o=ln(Cl),{active:i,dispatch:l,over:u,measureDroppableContainers:d}=c.useContext(un),p=c.useRef({disabled:n}),f=c.useRef(!1),h=c.useRef(null),m=c.useRef(null),{disabled:x,updateMeasurementsFor:b,timeout:w}={...El,...a},v=Lt(b??r),g=c.useCallback(()=>{if(!f.current){f.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{d(Array.isArray(v.current)?v.current:[v.current]),m.current=null},w)},[w]),E=cn({callback:g,disabled:x||!i}),k=c.useCallback((M,j)=>{E&&(j&&(E.unobserve(j),f.current=!1),M&&E.observe(M))},[E]),[R,_]=Xt(k),N=Lt(t);return c.useEffect(()=>{!E||!R.current||(E.disconnect(),f.current=!1,E.observe(R.current))},[R,E]),c.useEffect(()=>(l({type:re.RegisterDroppable,element:{id:r,key:o,disabled:n,node:R,rect:h,data:N}}),()=>l({type:re.UnregisterDroppable,key:o,id:r})),[r]),c.useEffect(()=>{n!==p.current.disabled&&(l({type:re.SetDroppableDisabled,id:r,key:o,disabled:n}),p.current.disabled=n)},[r,o,n,l]),{active:i,rect:h,isOver:u?.id===r,node:R,over:u,setNodeRef:_}}const Nl=({label:e,value:t})=>{const{attributes:n,listeners:r,setNodeRef:a,transform:o}=yl({id:t}),i=o?{transform:`translate(${o.x}px, ${o.y}px)`}:void 0,l=typeof e=="string"?wt(e,{replace:u=>u instanceof de.Element&&u.name==="button"?s.jsx("button",{...u.attribs,className:"text-black bg-amber-50 border-amber-200 border rounded px-2 py-1",style:{color:"black",backgroundColor:"#fffbeb",borderColor:"#fde68a"},children:u.children&&de.domToReact(u.children)},u.attribs?.key||t):u}):e;return s.jsx(Ot,{ref:a,style:i,...r,...n,className:"p-2 cursor-grab select-none shadow inline-block w-fit bg-primary text-black [&_button]:text-black [&_button]:!bg-amber-50 [&_button]:!border-amber-200 [&_button]:border [&_button]:rounded [&_button]:px-2 [&_button]:py-1",children:l})},jl=({id:e,children:t})=>{const{isOver:n,setNodeRef:r}=Sl({id:e});return s.jsx("div",{ref:r,className:K("min-h-[40px] min-w-[100px] w-fit border-b border-dashed px-2 py-1 flex items-center justify-center transition-colors",n?"bg-primary/10":"bg-transparent"),children:t})},kl=({options:e,questions:t,form:n,isRepeatAnswer:r=!1})=>{const[a,o]=c.useState(null),[i,l]=c.useState([]),[u,d]=c.useState([]),p=c.useMemo(()=>e,[e]),f=c.useMemo(()=>t,[t]);c.useEffect(()=>{if(!p?.length){o("Notogri yoki bosh variantlar kiritilgan.");return}if(!f?.length){o("Notogri yoki bosh savollar kiritilgan.");return}l(p),d(f.map(x=>({...x,answer:x.answer||n.getValues(`answers.${parseInt(x.question_number)-1}.answer`)||void 0}))),o(null)},[]);const h=x=>{const{over:b,active:w}=x;if(!b)return;const v=p.find(k=>String(k.value)===String(w.id));if(!v)return;const g=parseInt(b.id)-1,E=u.find(k=>k.question_number===b.id)?.answer;if(E&&!r){const k=p.find(R=>String(R.value)===String(E));k&&!i.some(R=>String(R.value)===String(k.value))&&l(R=>[...R,k])}n.setValue(`answers.${g}.answer`,v.value),d(k=>k.map(R=>R.question_number===b.id?{...R,answer:v.value}:R)),r||l(k=>k.filter(_=>String(_.value)!==String(v.value)))},m=x=>{const b=parseInt(x)-1,w=u.find(v=>v.question_number===x);if(w?.answer&&(n.setValue(`answers.${b}.answer`,""),d(v=>v.map(g=>g.question_number===x?{...g,answer:void 0}:g)),!r)){const v=p.find(g=>String(g.value)===String(w.answer));v&&!i.some(g=>String(g.value)===String(v.value))&&l(g=>[...g,v])}};return a?s.jsx("div",{className:"p-4 text-red-600",children:a}):s.jsx(bl,{onDragEnd:h,children:s.jsxs("div",{className:"space-y-6 mt-4 mb-6",children:[s.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(x=>s.jsx(Nl,{label:x.label,value:x.value},x.value))}),s.jsx("div",{className:"space-y-4",children:u.map(x=>s.jsxs("div",{className:"flex flex-row items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"font-bold",children:x.question_number}),s.jsx("span",{children:x.question_text||""}),s.jsx(jl,{id:x.question_number,children:x.answer?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ot,{className:"p-2 bg-gray-300 text-white [&_button]:text-white [&_button]:!bg-gray-500 [&_button]:!border-gray-500 [&_button]:border [&_button]:rounded [&_button]:px-2 [&_button]:py-1",children:(()=>{const b=p.find(w=>String(w.value)===String(x.answer))?.label||"?";return typeof b=="string"?wt(b,{replace:w=>w instanceof de.Element&&w.name==="button"?s.jsx("button",{...w.attribs,className:"text-white bg-gray-500 border-gray-500 border rounded px-2 py-1",style:{color:"white",backgroundColor:"rgb(107 114 128)",borderColor:"rgb(107 114 128)"},children:w.children&&de.domToReact(w.children)},w.attribs?.key||x.answer):w}):b})()}),s.jsx("button",{onClick:()=>m(x.question_number),className:"text-destructive hover:text-destructive/70",children:s.jsx(Tr,{size:15})})]}):s.jsx("span",{className:"text-muted-foreground",children:x.question_number})})]},x.question_number))})]})})};var Qn="Radio",[Rl,Ms]=en(Qn),[Dl,_l]=Rl(Qn),Os=c.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:a=!1,required:o,disabled:i,value:l="on",onCheck:u,form:d,...p}=e,[f,h]=c.useState(null),m=nt(t,w=>h(w)),x=c.useRef(!1),b=f?d||!!f.closest("form"):!0;return s.jsxs(Dl,{scope:n,checked:a,disabled:i,children:[s.jsx(rt.button,{type:"button",role:"radio","aria-checked":a,"data-state":Hs(a),"data-disabled":i?"":void 0,disabled:i,value:l,...p,ref:m,onClick:yt(e.onClick,w=>{a||u?.(),b&&(x.current=w.isPropagationStopped(),x.current||w.stopPropagation())})}),b&&s.jsx(Fs,{control:f,bubbles:!x.current,name:r,value:l,checked:a,required:o,disabled:i,form:d,style:{transform:"translateX(-100%)"}})]})});Os.displayName=Qn;var $s="RadioIndicator",qs=c.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...a}=e,o=_l($s,n);return s.jsx(Or,{present:r||o.checked,children:s.jsx(rt.span,{"data-state":Hs(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:t})})});qs.displayName=$s;var Il="RadioBubbleInput",Fs=c.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...a},o)=>{const i=c.useRef(null),l=nt(i,o),u=Lr(n),d=Mr(t);return c.useEffect(()=>{const p=i.current;if(!p)return;const f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(u!==n&&m){const x=new Event("click",{bubbles:r});m.call(p,n),p.dispatchEvent(x)}},[u,n,r]),s.jsx(rt.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:l,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Fs.displayName=Il;function Hs(e){return e?"checked":"unchecked"}var Al=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],dn="RadioGroup",[zl,Gc]=en(dn,[Fr,Ms]),Gs=Fr(),Bs=Ms(),[Tl,Pl]=zl(dn),Ws=c.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:a,value:o,required:i=!1,disabled:l=!1,orientation:u,dir:d,loop:p=!0,onValueChange:f,...h}=e,m=Gs(n),x=oa(d),[b,w]=Pr({prop:o,defaultProp:a??null,onChange:f,caller:dn});return s.jsx(Tl,{scope:n,name:r,required:i,disabled:l,value:b,onValueChange:w,children:s.jsx(ra,{asChild:!0,...m,orientation:u,dir:x,loop:p,children:s.jsx(rt.div,{role:"radiogroup","aria-required":i,"aria-orientation":u,"data-disabled":l?"":void 0,dir:x,...h,ref:t})})})});Ws.displayName=dn;var Vs="RadioGroupItem",Us=c.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...a}=e,o=Pl(Vs,n),i=o.disabled||r,l=Gs(n),u=Bs(n),d=c.useRef(null),p=nt(t,d),f=o.value===a.value,h=c.useRef(!1);return c.useEffect(()=>{const m=b=>{Al.includes(b.key)&&(h.current=!0)},x=()=>h.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",x),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",x)}},[]),s.jsx(sa,{asChild:!0,...l,focusable:!i,active:f,children:s.jsx(Os,{disabled:i,required:o.required,checked:f,...u,...a,name:o.name,ref:p,onCheck:()=>o.onValueChange(a.value),onKeyDown:yt(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:yt(a.onFocus,()=>{h.current&&d.current?.click()})})})});Us.displayName=Vs;var Ll="RadioGroupIndicator",Ks=c.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,a=Bs(n);return s.jsx(qs,{...a,...r,ref:t})});Ks.displayName=Ll;var Xs=Ws,Ys=Us,Ml=Ks;const Vt=c.forwardRef(({className:e,...t},n)=>s.jsx(Xs,{className:K("grid gap-2",e),...t,ref:n}));Vt.displayName=Xs.displayName;const Tn=c.forwardRef(({className:e,...t},n)=>s.jsx(Ys,{ref:n,className:K("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(Ml,{className:"flex items-center justify-center",children:s.jsx(aa,{className:"h-3 w-3 fill-primary"})})}));Tn.displayName=Ys.displayName;const Ol=({control:e,name:t,label:n,helperText:r,required:a,className:o,rules:i,floatingError:l,...u})=>{const d=n&&s.jsxs(Ue,{className:"my-3",children:[n," ",a&&s.jsx("span",{className:"text-red-600",children:"*"})]});return t&&e?s.jsx(Se,{control:e,name:t,rules:i,render:({field:p})=>s.jsxs(Ce,{children:[d,s.jsx(Ne,{children:s.jsx("input",{autoComplete:"off",type:"text",className:K("placeholder:text-primary text-center h-7","bg-transparent border border-ring rounded-md px-2 py-1","focus:outline-none focus:ring-1 focus:ring-ring","inline-block mx-2 my-2"),...u,...p})}),r&&s.jsx(Me,{children:r}),s.jsx(ft,{className:K(l)})]})}):s.jsxs(s.Fragment,{children:[d,s.jsx(fa,{...u,className:Ir(["mt-2",o])}),s.jsx(Me,{children:r})]})},Je=({control:e,name:t,label:n,rules:r,helperText:a,value:o,...i})=>t&&e?s.jsx(Se,{control:e,name:t,rules:r,render:({field:l})=>{const u=()=>{l.onChange(o)};return s.jsxs(Ce,{className:"flex flex-row items-center space-x-3",children:[s.jsx(Ne,{children:s.jsx(Tn,{value:o,checked:l.value===o,onClick:u,onMouseDown:d=>{d.stopPropagation()},...i})}),s.jsxs("div",{className:"space-y-1 leading-none cursor-pointer",onClick:u,children:[n&&s.jsx(Ue,{className:"cursor-pointer select-text",style:{userSelect:"text",WebkitUserSelect:"text"},children:n}),a&&s.jsx(Me,{children:a})]})]})}}):s.jsxs("div",{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[s.jsx(Tn,{value:o,...i}),s.jsxs("div",{className:"space-y-1 leading-none",children:[n&&s.jsx(Ue,{children:n}),s.jsx(Me,{children:a})]})]}),$l=({control:e,name:t,label:n,rules:r,helperText:a,options:o,dir:i,id:l,className:u,...d})=>t&&e?s.jsx(Se,{control:e,name:t,rules:r,render:({field:p})=>s.jsxs(Ce,{className:`flex flex-col space-y-2 ${u}`,id:l,children:[n&&s.jsx(Ue,{children:n}),s.jsx(Ne,{children:s.jsxs(En,{onValueChange:p.onChange,value:p.value,dir:i,...d,children:[s.jsx(Sn,{children:s.jsx(Nn,{placeholder:"Select"})}),s.jsx(jn,{children:o?.map(f=>s.jsx(Ze,{value:f.value,children:f.label},f.value))})]})}),a&&s.jsx(Me,{children:a})]})}):s.jsxs("div",{className:`flex flex-col space-y-2 rounded-md border p-4 ${u}`,id:l,children:[s.jsx(Ue,{children:n}),s.jsxs(En,{dir:i,...d,children:[s.jsx(Sn,{children:s.jsx(Nn,{placeholder:"Select..."})}),s.jsx(jn,{children:o?.map(p=>s.jsx(Ze,{value:p.value,children:p.label},p.value))})]}),s.jsx(Me,{children:a})]}),ql=({number:e,type:t,form:n,options:r,questions:a})=>{const o=Number(e)-1;return t===ue.SENTENCE_COMPLETION||t===ue.SHORT_ANSWER||t===ue.SUMMARY_COMPLETION||t===ue.DIAGRAM_LABEL?s.jsx(Ol,{id:e,control:n.control,name:`answers.${o}.answer`,type:"text"}):t===ue.TRUE_FALSE_NOT_GIVEN?s.jsx(Se,{control:n.control,name:`answers.${o}.answer`,render:({field:i})=>s.jsxs(Ce,{className:"my-5",children:[s.jsx(Ne,{children:s.jsxs(Vt,{value:i.value||"",onValueChange:i.onChange,className:"gap-4",children:[s.jsx(Je,{control:n.control,name:`answers.${o}.answer`,value:"TRUE",id:e,label:"TRUE"}),s.jsx(Je,{control:n.control,name:`answers.${o}.answer`,value:"FALSE",id:e,label:"FALSE"}),s.jsx(Je,{control:n.control,name:`answers.${o}.answer`,value:"NOT GIVEN",id:e,label:"NOT GIVEN"})]})}),s.jsx(ft,{})]})}):t===ue.YES_NO_NOT_GIVEN?s.jsx(Se,{control:n.control,name:`answers.${o}.answer`,render:({field:i})=>s.jsxs(Ce,{className:"my-5",children:[s.jsx(Ne,{children:s.jsxs(Vt,{value:i.value||"",onValueChange:i.onChange,className:"gap-4",children:[s.jsx(Je,{control:n.control,name:`answers.${o}.answer`,value:"YES",id:e,label:"YES"}),s.jsx(Je,{control:n.control,name:`answers.${o}.answer`,value:"NO",id:e,label:"NO"}),s.jsx(Je,{control:n.control,name:`answers.${o}.answer`,value:"NOT GIVEN",id:e,label:"NOT GIVEN"})]})}),s.jsx(ft,{})]})}):t===ue.MULTIPLE_CHOICE||t==="multiple_choice_with_multiple_answer"?s.jsx(Se,{control:n.control,name:`answers.${o}.answer`,render:({field:i})=>s.jsxs(Ce,{className:"my-5",children:[s.jsx(Ne,{children:s.jsx(Vt,{value:i.value||"",onValueChange:i.onChange,className:"gap-4",children:r?.map(l=>s.jsx(Je,{control:n.control,name:`answers.${o}.answer`,value:l.value,id:e,label:`${l.value}) ${l.label}`},l.value))})}),s.jsx(ft,{})]})}):t===ue.MATCHING_INFORMATION?s.jsxs("div",{className:"space-y-8",children:[s.jsxs(ht,{children:[s.jsx(pt,{children:s.jsxs(be,{children:[s.jsx(ze,{}),r?.map(i=>s.jsx(ze,{children:i.value},i.value))]})}),s.jsx(gt,{children:a.map((i,l)=>s.jsxs(be,{children:[s.jsxs(ve,{children:[i?.question_number,". ",i?.question_text]}),r?.map(u=>s.jsx(ve,{children:s.jsx(Se,{control:n.control,name:`answers.${l}.answer`,render:({field:d})=>s.jsxs(Ce,{className:"flex items-center space-x-2",children:[s.jsx(Ne,{children:s.jsx("input",{type:"radio",onChange:()=>d.onChange(u.value),name:`${i.question_number-1}`,value:u.value,id:`${i.question_number}`,className:`h-4 w-4 rounded-full border border-primary appearance-none 
                                checked:bg-white 
                                relative 
                                checked:after:content-[''] 
                                checked:after:block 
                                checked:after:w-2.5 checked:after:h-2.5 
                                checked:after:rounded-full 
                                checked:after:bg-primary 
                                checked:after:mx-auto checked:after:my-auto 
                                checked:after:absolute checked:after:inset-0
                                disabled:cursor-not-allowed disabled:opacity-50`})}),s.jsx(Ue,{htmlFor:`${e}-${l}-${u.value}`}),s.jsx(ft,{})]})})},u.value))]},l))})]}),s.jsxs(ht,{children:[s.jsx(pt,{children:s.jsx(be,{children:s.jsx(ze,{colSpan:2,children:"First invented or used by"})})}),s.jsx(gt,{children:r?.map((i,l)=>s.jsxs(be,{children:[s.jsx(ve,{className:"w-[50px]",children:i.value}),s.jsx(ve,{children:i.label})]},l))})]})]}):t===ue.MATCHING_HEADINGS?s.jsx($l,{control:n.control,name:`answers.${o}.answer`,id:e,className:"mx-2 my-2",options:Te.isEmpty(r)?[]:r?.map(i=>({label:i.value,value:i.value}))}):null},Pn=({htmlString:e,form:t,className:n="",enabledHighlight:r=!0,storageKey:a})=>{const o=c.useRef(null),[i,l]=c.useState(null),[u,d]=c.useState(null),[p,f]=c.useState(null),h=c.useRef(0),m=c.useRef(null),x=qr({control:t.control,name:"answers"}),[b,w]=c.useState(e),v=c.useRef(!1),g=()=>Date.now().toString()+Math.random().toString(36).slice(2),E=S=>{if(S instanceof HTMLElement){const C=S.tagName.toLowerCase();if(["input","button","textarea","select"].includes(C))return!0;if(C==="label"||S.closest("label"))return!1;if(S.closest(".FormControl"))return!S.closest("label, .FormLabel, [role='label']");if(S.closest(".FormItem, .FormLabel"))return!1}if(S.nodeType===Node.TEXT_NODE&&S.parentElement){const C=S.parentElement;return C.tagName.toLowerCase()==="label"||C.closest("label, .FormLabel, [role='label']")?!1:C.closest(".FormControl")?!C.closest("label, .FormLabel"):(C.closest(".FormItem"),!1)}return!1},k=(S,C)=>{try{if(S.collapsed||E(S.startContainer)||E(S.endContainer))return;if(S.startContainer.nodeType===Node.TEXT_NODE&&S.startOffset>0){const T=S.startContainer.splitText(S.startOffset);S.setStart(T,0)}S.endContainer.nodeType===Node.TEXT_NODE&&S.endOffset<S.endContainer.textContent.length&&S.endContainer.splitText(S.endOffset);const I=S.extractContents(),D=document.createElement("span");D.className="highlight",D.dataset.highlightId=C,D.appendChild(I),S.insertNode(D),D.parentNode?.normalize(),a&&o.current&&setTimeout(()=>{if(o.current)try{localStorage.setItem(`highlights_${a}`,o.current.innerHTML)}catch(T){console.warn("Failed to save highlights:",T)}},0)}catch(I){console.warn("Error applying highlight:",I)}},R=S=>{if(!o.current)return[];const C=[],I=document.createTreeWalker(o.current,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,{acceptNode(T){return E(T)?NodeFilter.FILTER_REJECT:S.intersectsNode(T)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});let D=I.nextNode();for(;D;)C.push(D),D=I.nextNode();return C},_=()=>{if(!r||!i)return;const S=g(),C=i.cloneRange(),I=R(C);I.length===0?k(C,S):I.forEach(D=>{if(D.nodeType===Node.TEXT_NODE){const T=document.createRange();T.selectNodeContents(D),C.comparePoint(D,0)<0&&T.setStart(C.startContainer,C.startOffset),C.comparePoint(D,D.textContent.length)>0&&T.setEnd(C.endContainer,C.endOffset),T.collapsed||k(T,S)}}),l(null),d(null),f(null)},N=c.useCallback(()=>{r&&(m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{const S=window.getSelection();if(S&&S.rangeCount>0&&o.current?.contains(S.anchorNode)){const C=S.getRangeAt(0),I=S.toString().trim();if(E(C.startContainer)||E(C.endContainer)){l(null),f(null),d(null);return}if(!C.collapsed&&I.length>0){const D=C.getBoundingClientRect(),T=C.commonAncestorContainer instanceof HTMLElement?C.commonAncestorContainer:C.commonAncestorContainer.parentElement;T&&T.classList?.contains("highlight")?(f(T),l(null)):(f(null),l(C));const O=window.innerWidth,H=200,y=50;let A=D.left+window.scrollX+D.width/2;A+H/2>O+window.scrollX?A=O+window.scrollX-H/2-10:A-H/2<window.scrollX&&(A=window.scrollX+H/2+10);let P=D.top+window.scrollY-y-35;P<window.scrollY&&(P=D.bottom+window.scrollY+35),d({x:A,y:P,width:H})}else l(null),f(null),d(null)}else l(null),f(null),d(null)},150))},[r]),M=c.useCallback(S=>{const C=S.target;if(C){const D=C.tagName?.toLowerCase();if(["input","button","textarea","select"].includes(D))return;if(D==="label"||C.closest("label, .FormLabel")){const T=Date.now();if(T-h.current<300)return;h.current=T,N();return}if(C.closest(".FormControl")){if(C.closest("label, .FormLabel")){const T=Date.now();if(T-h.current<300)return;h.current=T,N();return}return}if(C.closest(".FormItem")){const T=Date.now();if(T-h.current<300)return;h.current=T,N();return}}const I=Date.now();I-h.current<300||(h.current=I,N())},[N]),j=c.useCallback(S=>{const C=S.target;if(C){const I=C.tagName?.toLowerCase();if(["input","button","textarea","select"].includes(I))return;if(I==="label"||C.closest("label, .FormLabel")){N();return}if(C.closest(".FormControl")){if(C.closest("label, .FormLabel")){N();return}return}if(C.closest(".FormItem")){N();return}}N()},[N]);c.useEffect(()=>{if(!r)return;document.addEventListener("mouseup",M),document.addEventListener("dblclick",j);const S=I=>{const D=I.target;D.closest("img")||D.closest(".image-drawer-container")||D.tagName==="IMG"||o.current?.contains(D)||(f(null),d(null))},C=I=>{const D=window.getSelection();D&&D.toString().trim().length>0&&I.stopPropagation()};return document.body.addEventListener("click",S),window.addEventListener("scroll",C,{passive:!0}),document.addEventListener("scroll",C,{passive:!0}),()=>{document.removeEventListener("mouseup",M),document.removeEventListener("dblclick",j),document.body.removeEventListener("click",S),window.removeEventListener("scroll",C),document.removeEventListener("scroll",C),m.current&&clearTimeout(m.current)}},[M,j,r]);const q=S=>{S.stopPropagation();const C=S.currentTarget;f(C),l(null);const I=C.getBoundingClientRect(),D=window.innerWidth,T=200,O=50;let H=I.left+window.scrollX+I.width/2;H+T/2>D+window.scrollX?H=D+window.scrollX-T/2-10:H-T/2<window.scrollX&&(H=window.scrollX+T/2+10);let y=I.top+window.scrollY-O-35;y<window.scrollY&&(y=I.bottom+window.scrollY+35),d({x:H,y,width:T})},F=()=>{if(r){try{if(p){const S=p,C=S.parentNode;if(C){for(;S.firstChild;)C.insertBefore(S.firstChild,S);C.removeChild(S),C.normalize()}}else if(i&&!p){const S=i.cloneRange();if(!o.current)return;const C=[],I=document.createTreeWalker(o.current,NodeFilter.SHOW_ELEMENT,{acceptNode(T){return T instanceof HTMLElement&&T.classList.contains("highlight")&&S.intersectsNode(T)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});let D=I.nextNode();for(;D;)C.push(D),D=I.nextNode();C.forEach(T=>{const O=T.parentNode;if(O){for(;T.firstChild;)O.insertBefore(T.firstChild,T);O.removeChild(T),O.normalize()}})}a&&o.current&&setTimeout(()=>{if(o.current)try{localStorage.setItem(`highlights_${a}`,o.current.innerHTML)}catch(S){console.warn("Failed to save highlights:",S)}},0)}catch(S){console.warn("Error clearing highlight:",S)}l(null),f(null),d(null)}},B=S=>{const C=window.getSelection();C&&C.rangeCount>0&&C.removeAllRanges()};c.useEffect(()=>{w(e),v.current=!1},[e]),c.useEffect(()=>{if(a&&o.current&&!v.current)try{const S=localStorage.getItem(`highlights_${a}`);S?setTimeout(()=>{if(o.current){const C=document.createElement("div");C.innerHTML=S;const I=C.querySelectorAll(".highlight");I.length>0&&I.forEach(D=>{const T=D.getAttribute("data-highlight-id"),O=D.textContent;if(O&&o.current){const H=document.createTreeWalker(o.current,NodeFilter.SHOW_TEXT,null);let y;for(;y=H.nextNode();){const P=(y.textContent||"").indexOf(O);if(P!==-1&&y.parentElement&&!y.parentElement.classList.contains("highlight"))try{const z=document.createRange();z.setStart(y,P),z.setEnd(y,P+O.length);const L=document.createElement("span");L.className="highlight",L.dataset.highlightId=T||Date.now().toString();const $=z.extractContents();L.appendChild($),z.insertNode(L);break}catch{}}}})}v.current=!0},150):v.current=!0}catch(S){console.warn("Failed to restore highlights:",S),v.current=!0}},[a,b]);const W=typeof b=="string"&&b.trim().length>0?b:e;let G=-1;const Y=wt(W,{replace:S=>{if(S instanceof de.Element){if(S.name==="img"&&S.attribs){const{src:C,alt:I,style:D,className:T}=S.attribs;let O={};return D&&D.split(";").forEach(H=>{const[y,A]=H.split(":").map(P=>P.trim());if(y&&A){const P=y.replace(/-([a-z])/g,z=>z[1].toUpperCase());O[P]=A}}),s.jsx(Ar,{src:C||"",alt:I||"",style:O,className:T||""},C||Math.random().toString())}if(S.name==="span"&&S.attribs?.class?.includes("highlight"))return c.createElement("span",{...S.attribs,onClick:q,style:{cursor:"pointer"},key:S.attribs["data-highlight-id"]||void 0},de.domToReact(S.children));if(S.name==="question-input"){const{attribs:C}=S,I=C["data-question-number"]??"",D=C["data-question-type"]??"";let T=[],O=[];try{T=JSON.parse(C["data-question-options"]||"[]"),O=JSON.parse(C["data-question"]||"[]")}catch(y){return console.warn("Error parsing question-input attributes:",y),s.jsx("span",{className:"text-destructive",children:"Invalid question input"})}if(!I||!D)return console.warn("Missing question-number or question-type:",C),s.jsx("span",{className:"text-destructive",children:"Invalid question input"});const H=s.jsx(ql,{number:I,type:D,form:t,options:T,questions:O});return D===ue.TRUE_FALSE_NOT_GIVEN||D===ue.YES_NO_NOT_GIVEN||D===ue.MULTIPLE_CHOICE||D==="multiple_choice_with_multiple_answer"?s.jsx("div",{id:`question-${I}`,style:{margin:"8px 0",userSelect:"text"},className:"select-text",children:H},I):s.jsx("span",{id:`question-${I}`,style:{display:"inline-block",minWidth:150},children:H},I)}if(S.name==="list-selection-tegs"){const{attribs:C}=S;let I=[],D=[];const T=C.question_type||"";try{I=JSON.parse(C.question_numbers||"[]"),D=JSON.parse(C["data-options"]||"[]")}catch(H){return console.warn("Error parsing list-selection-tegs attributes:",H),s.jsx("span",{className:"text-destructive",children:"Invalid list selection tags"})}if(!I.length||!D.length||T!==ue.LIST_SELECTION)return console.warn("Invalid list-selection-tegs attributes:",C),s.jsx("span",{className:"text-destructive",children:"Invalid list selection tags"});const O=D.map(H=>({value:H.value,label:H.label||H.value,id:`sharedAnswers_${I.join("_")}_${H.value}`}));return s.jsx("div",{className:"my-6",children:s.jsx(ri,{control:t.control,name:`sharedAnswers_${I.join("_")}`,options:O,maxSelections:I.length,orientation:"vertical",className:"w-full",onValueChange:H=>{I.forEach((y,A)=>{const P=parseInt(y)-1;t.setValue(`answers.${P}.answer`,H[A]||"")})}})},I.join("_"))}if(S.name==="drag-drop-tegs"){const{attribs:C}=S,I=!!C.repeat_answer;let D=[],T=[];try{D=JSON.parse(C["data-options"]||"[]"),T=JSON.parse(C["data-questions"]||"[]")}catch(O){return console.warn("Error parsing drag-drop-tegs attributes:",O),s.jsx("span",{className:"text-destructive",children:"Invalid drag-drop tags"})}return s.jsx(kl,{options:D,questions:T,form:t,isRepeatAnswer:I})}if(S.name==="table-tegs"){const{attribs:C}=S;let I=[],D=[];const T=C.table_name||"";try{I=JSON.parse(C["data-options"]||"[]"),D=JSON.parse(C["data-questions"]||"[]")}catch(O){return console.warn("Error parsing table-tegs attributes:",O),s.jsx("span",{className:"text-destructive",children:"Invalid table tags"})}return s.jsxs("div",{className:"space-y-8 my-8",children:[s.jsxs(ht,{className:"selectable-table",children:[s.jsx(pt,{children:s.jsxs(be,{children:[s.jsx(ze,{}),I?.map(O=>s.jsx(ze,{children:O.value},O.value))]})}),s.jsx(gt,{children:D.map(O=>{const H=parseInt(String(O.question_number),10);if(Number.isNaN(H)||H<=0)return console.warn("Invalid question number in table-tegs:",O.question_number),null;const y=H-1,A=x?.[y]?.answer??"";return s.jsxs(be,{id:`question-${O.question_number}`,children:[s.jsxs(ve,{className:"question-text-cell",children:[O?.question_number,". ",O?.question_text]}),I?.map(P=>s.jsx(ve,{children:s.jsx(Se,{control:t.control,name:`answers.${y}.answer`,render:({field:z})=>{const L=$=>{$.stopPropagation(),z.onChange(P.value)};return s.jsx(Ce,{className:"flex items-center space-x-2",children:s.jsx(Ne,{children:s.jsx("input",{type:"radio",onClick:L,onChange:$=>{$.target.checked&&z.onChange(P.value)},checked:A===P.value,name:`table_tegs_question_${O.question_number}`,value:P.value,id:`${O.question_number}_${P.value}_table`,className:`h-4 w-4 rounded-full border border-primary appearance-none
                                            checked:bg-white
                                            relative
                                            checked:after:content-['']
                                            checked:after:block
                                            checked:after:w-2.5 checked:after:h-2.5
                                            checked:after:rounded-full
                                            checked:after:bg-primary
                                            checked:after:mx-auto checked:after:my-auto
                                            checked:after:absolute checked:after:inset-0`})})})}})},P.value))]},`table-tegs-${O.question_number}`)})})]}),s.jsxs(ht,{children:[s.jsx(pt,{children:s.jsx(be,{children:s.jsx(ze,{colSpan:2,children:T})})}),s.jsx(gt,{children:I?.map(O=>s.jsxs(be,{children:[s.jsx(ve,{className:"w-[50px]",children:O.value}),s.jsx(ve,{children:O.label})]},O.value))})]})]})}if(S.name==="table-tegs-input"){const{attribs:C}=S;let I=[],D=[];const T=C.table_name||"";try{I=JSON.parse(C["data-options"]||"[]"),D=JSON.parse(C["data-questions"]||"[]")}catch(y){return console.warn("Error parsing table-tegs-input attributes:",y),s.jsx("span",{className:"text-destructive",children:"Invalid table input tags"})}const O=C.repeat_answer!=="False",H=new Map(D.map(y=>{const A=parseInt(String(y.question_number),10);if(Number.isNaN(A)||A<=0)return[String(y.question_number),void 0];const P=A-1;return[String(y.question_number),x?.[P]?.answer??""]}));return s.jsxs("div",{className:"space-y-8 my-8",children:[s.jsxs(ht,{className:"selectable-table",children:[s.jsx(pt,{children:s.jsxs(be,{children:[s.jsx(ze,{}),I?.map(y=>s.jsx(ze,{children:y.value},y.value))]})}),s.jsx(gt,{children:D.map(y=>{const A=parseInt(String(y.question_number),10);if(Number.isNaN(A)||A<=0)return console.warn("Invalid question number in table-tegs-input:",y.question_number),null;const P=A-1,z=String(y.question_number),L=H.get(z)??"";return s.jsxs(be,{id:`question-${y.question_number}`,children:[s.jsxs(ve,{className:"question-text-cell",children:[y?.question_number,". ",y?.question_text]}),I?.map($=>{const U=$.value,X=L===U,ee=!O&&Array.from(H.entries()).some(([J,Z])=>J!==z&&Z&&String(Z).trim()!==""&&Z===U)&&!X;return s.jsx(ve,{children:s.jsx(Se,{control:t.control,name:`answers.${P}.answer`,render:({field:J})=>{const Z=ce=>{ce.stopPropagation(),ee||J.onChange(U)};return s.jsxs(Ce,{className:"flex items-center space-x-2",children:[s.jsx(Ne,{children:s.jsx("input",{type:"radio",onClick:Z,onChange:ce=>{ce.target.checked&&!ee&&J.onChange(U)},checked:X,name:`table_tegs_input_question_${y.question_number}`,value:U,id:`${y.question_number}_${U}_input`,disabled:ee,className:`h-4 w-4 rounded-full border border-primary appearance-none
                          checked:bg-white
                          relative
                          checked:after:content-['']
                          checked:after:block
                          checked:after:w-2.5 checked:after:h-2.5
                          checked:after:rounded-full
                          checked:after:bg-primary
                          checked:after:mx-auto checked:after:my-auto
                          checked:after:absolute checked:after:inset-0
                          disabled:cursor-not-allowed disabled:opacity-50`})}),s.jsx(Ue,{})]})}})},$.value)})]},`table-tegs-input-${y.question_number}`)})})]}),I?.length>0&&T&&T!=="List"&&s.jsxs(ht,{className:"selectable-table",children:[s.jsx(pt,{children:s.jsx(be,{children:s.jsx(ze,{colSpan:2,children:T||"Options"})})}),s.jsx(gt,{children:I.map(y=>s.jsxs(be,{children:[s.jsx(ve,{className:"w-[50px]",children:y.value}),s.jsx(ve,{children:y.label})]},y.value))})]})]})}if(S.name==="drag-drop-matching-sentence-endings")return G+=1,s.jsx(Hl,{blockKey:`drag-drop-${G}`,element:S,form:t,onPreventSelection:B},`drag-drop-${G}`)}}});return s.jsxs(s.Fragment,{children:[s.jsx("style",{children:`
        .highlight {
          background-color: #fde68a;
          transition: background-color 0.2s;
        }
        .highlight:hover {
          background-color: #fad980;
        }
        .drag-drop-container {
          min-height: 40px;
        }
        .drag-drop-option-used,
        .drag-drop-option-used *,
        .drag-drop-option-used span,
        .drag-drop-option-used p,
        .drag-drop-option-used div,
        .drag-drop-option-used button {
          color: black !important;
        }
        input, button, [draggable] {
          pointer-events: auto;
          user-select: none;
        }
        question-input, list-selection-tegs, drag-drop-tegs, table-tegs, table-tegs-input, drag-drop-matching-sentence-endings, drag-drop-sentence-input {
          user-select: text;
        }
        .selectable-table {
          user-select: text;
        }
        .selectable-table .question-text-cell {
          user-select: text;
          cursor: text;
        }
        .selectable-table td, .selectable-table th {
          user-select: text;
        }
        /* Ensure all text elements are selectable for highlighting */
        p, div, span, h1, h2, h3, h4, h5, h6, li, td, th {
          user-select: text;
          -webkit-user-select: text;
          -moz-user-select: text;
          -ms-user-select: text;
        }
        /* Ensure labels and option text are selectable */
        label, .FormLabel, [role="label"] {
          user-select: text !important;
          -webkit-user-select: text !important;
          -moz-user-select: text !important;
          -ms-user-select: text !important;
          cursor: text;
        }
        /* Ensure FormItem allows text selection (contains option labels) */
        .FormItem {
          user-select: text;
          -webkit-user-select: text;
        }
        /* But keep inputs non-selectable */
        .FormItem input[type="radio"],
        .FormItem input[type="checkbox"],
        .FormControl input {
          user-select: none !important;
          -webkit-user-select: none !important;
        }
        /* Ensure question containers are highlightable */
        [id^="question-"] {
          user-select: text !important;
          -webkit-user-select: text !important;
        }
      `}),s.jsx("div",{ref:o,className:`w-full text-sm text-[--foreground] ${n}
          [&_table]:w-full [&_table]:border-collapse
          [&_td]:border [&_td]:border-[--border] [&_td]:p-2
          [&_th]:border [&_th]:border-[--border] [&_th]:p-2
          [&_p]:mb-2 [&_p]:text-[--foreground]
          [&_h3]:text-lg [&_h3]:font-semibold [&_h3]:mb-2 [&_h3]:text-[--foreground]
          [&_strong]:font-bold [&_em]:italic select-text`,style:{userSelect:"text"},children:Y}),r&&u&&(i||p)&&s.jsxs("div",{className:"absolute z-50 flex gap-2 rounded-lg border bg-muted p-2 shadow-lg -translate-x-1/2",style:{left:u.x,top:u.y},children:[!p&&s.jsxs(Le,{size:"sm",onClick:_,children:[s.jsx(Go,{className:"mr-1 h-4 w-4"})," Highlight"]}),s.jsxs(Le,{size:"sm",variant:"destructive",onClick:F,disabled:!p&&!i,children:[s.jsx(Bo,{className:"mr-1 h-4 w-4"})," Clear"]})]})]})},Fl=e=>{const t=[],n=r=>{r?.forEach(a=>{if(a instanceof de.Element){if(a.name==="drag-drop-sentence-input"){const o=a.attribs["data-question-number"];o&&t.push(o)}a.children&&a.children.length&&n(a.children)}})};return n(e||[]),t},Hl=({element:e,form:t,blockKey:n,onPreventSelection:r})=>{const a=c.useMemo(()=>{try{return JSON.parse(e.attribs["data-options"]||"[]")}catch(g){return console.error("Invalid data-options JSON:",g),[]}},[e]);if(!a.length)return s.jsx("span",{className:"text-destructive block my-4",children:"No drag drop options"});const o=e.attribs["data-repeat"]==="True",i=c.useMemo(()=>Fl(e.children),[e.children]),[l,u]=c.useState({});c.useEffect(()=>{const g=t.getValues("answers")||[],E={};i.forEach(k=>{const R=parseInt(k,10)-1,_=g?.[R]?.answer;_&&(E[k]=_)}),u(k=>{const R=JSON.stringify(k),_=JSON.stringify(E);return R===_?k:E})},[t,i]);const d=c.useMemo(()=>o?new Set:new Set(Object.values(l).filter(g=>g?String(g).trim().length>0:!1)),[l,o]),p=c.useCallback((g,E)=>{u(R=>{const _={...R};return o||Object.entries(_).forEach(([N,M])=>{if(N!==g&&M===E){_[N]="";const j=parseInt(N,10)-1;t.setValue(`answers.${j}.answer`,"")}}),_[g]=E,_});const k=parseInt(g,10)-1;t.setValue(`answers.${k}.answer`,E)},[t,o]),f=c.useCallback(g=>{u(k=>{if(!k[g])return k;const R={...k};return R[g]="",R});const E=parseInt(g,10)-1;t.setValue(`answers.${E}.answer`,"")},[t]),h=c.useCallback((g,E)=>{g.dataTransfer.setData("text/plain",E),g.currentTarget.style.opacity="0.5",r?.(g)},[r]),m=c.useCallback(g=>{g.currentTarget.style.opacity="1"},[]),x=c.useCallback((g,E)=>{g.preventDefault();const k=g.dataTransfer.getData("text/plain");k&&(p(E,k),g.currentTarget.style.backgroundColor="")},[p]),b=c.useCallback(g=>{g.preventDefault(),g.currentTarget.style.backgroundColor="#e0f7fa"},[]),w=c.useCallback(g=>{g.currentTarget.style.backgroundColor=""},[]),v=c.useMemo(()=>de.domToReact(e.children,{replace:g=>{if(g instanceof de.Element&&g.name==="drag-drop-sentence-input"){const E=g.attribs,k=E["data-question-number"]??"",R=E["data-question-type"]??"";if(!k||R!=="matching_sentence_endings"&&R!=="matching_headings")return s.jsx("span",{className:"text-destructive",children:"Invalid drag-drop input"},`${n}-invalid`);const _=l[k],N=a.find(j=>j.value===_)?.label||_,M=typeof N=="string"?wt(N,{replace:j=>j instanceof de.Element&&j.name==="button"?s.jsx("button",{...j.attribs,className:"text-black bg-white border border-gray-300 rounded px-2 py-1",style:{color:"black",backgroundColor:"#FFFBF0",borderColor:"#d1d5db"},children:j.children&&de.domToReact(j.children)},j.attribs?.key||_):j}):N;return s.jsx("span",{onDrop:j=>x(j,k),onDragOver:b,onDragLeave:w,className:"inline-block min-w-[150px] border-2 border-gray-400 border-dashed p-1 my-1 mx-2 rounded-md text-center align-middle","data-question-number":k,children:_?s.jsxs("span",{className:"inline-flex items-center justify-between gap-2 w-full",children:[s.jsx("span",{className:"font-semibold px-2 py-1 rounded",style:{backgroundColor:"#FFFBF0",color:"black"},children:M}),s.jsx("button",{type:"button",onClick:()=>f(k),onMouseDown:r,className:"text-destructive hover:text-destructive/70",children:s.jsx(Tr,{size:16})})]}):s.jsx("span",{className:"text-muted-foreground",children:k})},`${n}-${k}`)}return g}}),[e.children,l,x,w,b,f,r,n,a]);return s.jsxs("span",{className:"block my-6",children:[v,s.jsx("span",{className:"block mt-6",children:s.jsx("div",{className:"flex flex-wrap gap-3",children:a.map(g=>{const E=!o&&d.has(g.value),k=typeof g.label=="string"?wt(g.label,{replace:R=>R instanceof de.Element&&R.name==="button"?s.jsx("button",{...R.attribs,className:`rounded px-2 py-1 border ${E?"drag-drop-option-used":""}`,style:{color:E?"black":"white",backgroundColor:E?"#FFFBF0":"#1a1a1a",borderColor:E?"#d1d5db":"#404040"},children:s.jsx("span",{style:{color:E?"black":"white"},children:R.children&&de.domToReact(R.children)})},R.attribs?.key||g.value):R}):g.label;return s.jsx("div",{draggable:!E,onDragStart:E?void 0:R=>h(R,g.value),onDragEnd:m,className:`drag-drop-option p-2 rounded-lg min-w-[150px] text-center cursor-move transition-colors ${E?"border-2 border-gray-300 border-dashed cursor-not-allowed drag-drop-option-used":""}`,style:E?{backgroundColor:"#FFFBF0",color:"black"}:{backgroundColor:"#1a1a1a",color:"white"},children:s.jsx("span",{style:{color:E?"black":"white"},children:k})},`${n}-${g.value}`)})})})]})},Zn=Po()(Lo(e=>({contrast:"black-on-white",textSize:"regular",setContrast:t=>e({contrast:t}),setTextSize:t=>e({textSize:t})}),{name:"test-display-storage",storage:Mo(()=>localStorage)})),Gl=e=>{switch(e){case"black-on-white":return"bg-white [&_p]:text-black [&_div]:text-black [&_span]:text-black [&_h1]:text-black [&_h2]:text-black [&_h3]:text-black [&_h4]:text-black [&_h5]:text-black [&_h6]:text-black [&_li]:text-black [&_td]:text-black [&_th]:text-black [&_label]:text-black";case"white-on-black":return"bg-black [&_p]:text-white [&_div]:text-white [&_span]:text-white [&_h1]:text-white [&_h2]:text-white [&_h3]:text-white [&_h4]:text-white [&_h5]:text-white [&_h6]:text-white [&_li]:text-white [&_td]:text-white [&_th]:text-white [&_label]:text-white";case"yellow-on-black":return"bg-black [&_p]:text-yellow-300 [&_div]:text-yellow-300 [&_span]:text-yellow-300 [&_h1]:text-yellow-300 [&_h2]:text-yellow-300 [&_h3]:text-yellow-300 [&_h4]:text-yellow-300 [&_h5]:text-yellow-300 [&_h6]:text-yellow-300 [&_li]:text-yellow-300 [&_td]:text-yellow-300 [&_th]:text-yellow-300 [&_label]:text-yellow-300";default:return"bg-white [&_p]:text-black [&_div]:text-black [&_span]:text-black [&_h1]:text-black [&_h2]:text-black [&_h3]:text-black [&_h4]:text-black [&_h5]:text-black [&_h6]:text-black [&_li]:text-black [&_td]:text-black [&_th]:text-black [&_label]:text-black"}},Bl=e=>{switch(e){case"regular":return"text-sm [&_p]:text-sm [&_div]:text-sm [&_span]:text-sm";case"large":return"text-base [&_p]:text-base [&_div]:text-base [&_span]:text-base";case"extra-large":return"text-lg [&_p]:text-lg [&_div]:text-lg [&_span]:text-lg";default:return"text-sm [&_p]:text-sm [&_div]:text-sm [&_span]:text-sm"}},Js=(e,t)=>K(Gl(e),Bl(t)),Wl=({part:e,form:t,testId:n})=>{const{user:r}=Zt(),{contrast:a,textSize:o}=Zn(),i=r?.id||"guest",l=n&&e.id?`listening-${i}-${n}-${e.id}-script`:void 0,u=n&&e.id?`listening-${i}-${n}-${e.id}-questions`:void 0,d=Js(a,o),{imageElement:p,questionsWithoutImage:f}=c.useMemo(()=>{if(!e.questions)return{imageElement:null,questionsWithoutImage:e.questions};let h=null,m=e.questions,x="";const b=/<img[^>]*>/i,w=e.questions.match(b);return w&&(x=w[0],m=e.questions.replace(b,"").trim(),wt(x,{replace:v=>{if(v instanceof de.Element&&v.name==="img"){const{src:g,alt:E,style:k,className:R}=v.attribs;let _={};k&&k.split(";").forEach(N=>{const[M,j]=N.split(":").map(q=>q.trim());if(M&&j){const q=M.replace(/-([a-z])/g,F=>F[1].toUpperCase());_[q]=j}}),h=s.jsx(Ar,{src:g||"",alt:E||"",style:_,className:R||""},g||Math.random().toString())}return v}})),{imageElement:h,questionsWithoutImage:m}},[e.questions]);return s.jsx("div",{className:K("h-[calc(100vh-232px)]",d),children:e.is_script?s.jsx(Gn,{leftContent:s.jsxs("div",{className:K("h-full overflow-y-auto p-6 space-y-4",d),onScroll:h=>{h.stopPropagation()},onWheel:h=>{const m=window.getSelection();m&&m.toString().trim().length>0&&h.stopPropagation()},children:[p&&s.jsx("div",{className:"mb-6 mt-[30px]",onMouseEnter:h=>{h.stopPropagation()},onMouseLeave:h=>{h.stopPropagation()},onClick:h=>{const m=window.getSelection();m&&m.toString().trim().length>0||h.stopPropagation()},onScroll:h=>{h.stopPropagation()},children:p}),e.audioscript&&s.jsxs("div",{className:"border-2 border-gray-300 rounded-lg p-4 bg-white/50",children:[s.jsx("div",{className:"text-sm font-semibold text-muted-foreground mb-2",children:"Script"}),s.jsx(Mn,{className:K("overflow-y-auto",d),htmlString:e.audioscript,storageKey:l})]})]}),rightContent:s.jsx("div",{className:K("h-full overflow-y-auto overflow-x-hidden p-6 space-y-8",d),children:f?s.jsx(s.Fragment,{children:s.jsx(Pn,{htmlString:f,form:t,storageKey:u,className:d})}):s.jsx("div",{children:"No questions available"})})}):s.jsx(ds,{direction:"horizontal",className:K("w-full border rounded-none"),children:s.jsx(Rn,{defaultSize:100,children:s.jsx("div",{className:K("h-full overflow-y-auto overflow-x-hidden p-6 space-y-8",d),children:e.questions?s.jsx(Pn,{htmlString:e.questions,form:t,storageKey:u,className:d}):s.jsx("div",{children:"No questions available"})})})})})},Vl=({part:e,form:t,testId:n})=>{const{user:r}=Zt(),{contrast:a,textSize:o}=Zn(),i=r?.id||"guest",l=n&&e.id?`reading-${i}-${n}-${e.id}-content`:void 0,u=n&&e.id?`reading-${i}-${n}-${e.id}-questions`:void 0,d=Js(a,o);return s.jsx("div",{className:K("h-[calc(100vh-232px)]",d),children:s.jsx(Gn,{leftContent:s.jsx(Mn,{className:K("h-full overflow-y-auto p-6",d),htmlString:e.content||"<p>Sample content for testing</p>",enabledHighlight:!0,storageKey:l}),rightContent:s.jsx("div",{className:K("h-full overflow-y-auto overflow-x-hidden p-6 space-y-8",d),children:e.questions?s.jsx(Pn,{htmlString:e.questions,form:t,storageKey:u,className:d}):s.jsx("div",{children:"No questions available"})})})})},Ln=c.forwardRef(({className:e,...t},n)=>s.jsx("textarea",{className:K("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...t}));Ln.displayName="Textarea";const Ul=({control:e,name:t,label:n,helperText:r,required:a,className:o,rules:i,floatingError:l,...u})=>{const d=n&&s.jsxs(Ue,{className:"my-3",children:[n," ",a&&s.jsx("span",{className:"text-[--destructive]",children:"*"})]});return t&&e?s.jsx(Se,{control:e,name:t,rules:i,render:({field:p})=>s.jsxs(Ce,{children:[d,s.jsx(Ne,{children:s.jsx(Ln,{autoComplete:"off",placeholder:"...",className:K(o),...u,...p})}),r&&s.jsx(Me,{children:r}),s.jsx(ft,{className:K(l)})]})}):s.jsxs(s.Fragment,{children:[d,s.jsx(Ln,{...u,className:Ir([o])}),r&&s.jsx(Me,{children:r})]})},Kl=({part:e,form:t,index:n,testId:r})=>{const a=t.watch(`answers.${n}.answer`)||"",o=a.trim().split(/\s+/).filter(d=>d.length>0).length,[i,l]=c.useState("16px"),u=r&&e.id?`writing-${r}-${e.id}-question`:void 0;return s.jsx("div",{className:"h-[calc(100vh-232px)] bg-muted",children:s.jsx(Gn,{leftContent:s.jsx(Mn,{className:"h-full overflow-y-auto p-6 text-sm",htmlString:e.writing_questions[0].question,enabledHighlight:!0,storageKey:u}),rightContent:s.jsxs("div",{className:"h-full overflow-y-auto p-6 space-y-4 text-sm",children:[s.jsx(Ul,{floatingError:!0,id:"1",control:t.control,name:`answers.${n}.answer`,className:"min-h-[calc(100vh-335px)]",style:{fontSize:i}}),s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Word count: ",a.trim()?o:0]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($r,{htmlFor:"font-size-trigger",className:"text-xs text-muted-foreground",children:"Font size:"}),s.jsxs(En,{onValueChange:d=>l(d),defaultValue:"16px",children:[s.jsx(Sn,{id:"font-size-trigger",className:"w-[75px]",children:s.jsx(Nn,{placeholder:"Select font size"})}),s.jsxs(jn,{children:[s.jsx(Ze,{value:"12px",children:"12px"}),s.jsx(Ze,{value:"14px",children:"14px"}),s.jsx(Ze,{value:"16px",children:"16px"}),s.jsx(Ze,{value:"18px",children:"18px"}),s.jsx(Ze,{value:"20px",children:"20px"})]})]})]})]})]})})})},Xl=e=>"questions"in e,Yl=e=>"questions"in e&&"question_numbers"in e&&Array.isArray(e.question_numbers),Bc=({data:e,activeTab:t,testType:n,form:r,testId:a})=>{const o=(i,l)=>{switch(n){case ne.READING:return Xl(i)?s.jsx(s.Fragment,{children:s.jsx(Vl,{part:i,form:r,testId:a})}):s.jsx(or,{title:"Error",message:"Invalid reading data"});case ne.LISTENING:return Yl(i)?s.jsx(Wl,{part:i,form:r,testId:a}):s.jsx(or,{title:"Error",message:"Invalid listening data"});case ne.WRITING:return s.jsx(Kl,{part:i,index:l,form:r,testId:a});default:return s.jsx("div",{children:"Unsupported test type"})}};return s.jsx("div",{children:e.map((i,l)=>s.jsx($o,{value:`tab-${i.id}`,className:K("h-full bg-muted",t!==`tab-${i.id}`&&"hidden"),children:o(i,l)},i.id))})},Wc=({activePart:e,testType:t})=>{if(!e)return null;const n=()=>{switch(t){case ne.READING:return Te.get(e,"passage_number","");case ne.LISTENING:return Te.get(e,"listening_section","");case ne.WRITING:return Te.get(e,"writing_task","");default:return"Follow the instructions for this part."}};return s.jsx(Ot,{className:"w-full shadow-sm rounded-none",children:s.jsxs(On,{className:"p-3 text-sm h-[70px]",children:[s.jsxs("div",{className:"font-semibold",children:["Part ",n()]}),s.jsx("div",{children:e.description})]})})},Vc=({timeLeft:e,formatTime:t,testType:n=ne.READING,audioRef:r,handleVolumeChange:a,handlePauseToggle:o,isPaused:i=!1,studentHasStarted:l=!1,userHasStarted:u=!1,type:d,isAudioPlaying:p=!1})=>{const f=_r(),h=()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},m=()=>{if(n===ne.LISTENING&&x?.role===Qe.STUDENT){const W=r?.current&&!r.current.paused&&!r.current.ended,G=e>0;if(W||G){let Y="Test tugamadi! Chiqishni xohlaysizmi?";if(W&&G?Y="Audio ijro etilmoqda va vaqt tugamagan! Testdan chiqishni xohlaysizmi?":W?Y="Audio hali ijro etilmoqda! Testdan chiqishni xohlaysizmi?":G&&(Y="Test vaqti hali tugamagan! Testdan chiqishni xohlaysizmi?"),!window.confirm(Y))return}}x?.role===Qe.TEACHER?f(d==="Thematic"?"/teacher/tests/thematic":"/teacher/tests/mock"):f(d==="Thematic"?"/student/tests/thematic":"/student/tests/mock"),h()},{user:x}=Zt(),{contrast:b,textSize:w,setContrast:v,setTextSize:g}=Zn(),[E,k]=c.useState(.5),[R,_]=c.useState(0),[N,M]=c.useState(0),j=r?.current;c.useEffect(()=>{if(n!==ne.LISTENING||!j){_(0),M(0);return}const W=()=>{_(j.currentTime||0)},G=()=>{const Y=Number.isFinite(j.duration)?j.duration:0;M(Y)};return W(),G(),j.addEventListener("timeupdate",W),j.addEventListener("loadedmetadata",G),j.addEventListener("durationchange",G),j.addEventListener("ended",W),()=>{j.removeEventListener("timeupdate",W),j.removeEventListener("loadedmetadata",G),j.removeEventListener("durationchange",G),j.removeEventListener("ended",W)}},[n,j]);const q=W=>{const G=Math.floor(W/60),Y=Math.floor(W%60);return`${G.toString().padStart(2,"0")}:${Y.toString().padStart(2,"0")}`},F=N>0?Math.max(N-R,0):R,B=W=>{const G=W[0];k(G),a&&a(G)};return s.jsx(Ot,{className:"w-full shadow-md rounded-none",children:s.jsxs(On,{className:"p-3 grid grid-cols-3 items-center h-[50px]",children:[s.jsxs("div",{className:"text-sm flex items-center gap-2",children:[s.jsx(Wo,{}),s.jsx("b",{children:"Candidate:"})," ",x?.full_name||x?.username]}),s.jsx("div",{className:"text-sm font-semibold font-mono flex items-center gap-2 justify-center",children:n===ne.LISTENING&&r?s.jsxs(s.Fragment,{children:[s.jsx(ar,{className:"w-5 h-5"}),q(F)]}):s.jsx("span",{className:"text-muted-foreground",children:"-"})}),s.jsxs("div",{className:"flex items-center gap-8 justify-end",children:[s.jsxs("div",{className:"text-sm font-semibold font-mono flex items-center gap-2 whitespace-nowrap",children:[s.jsx(ar,{className:"w-5 h-5"}),s.jsx("span",{className:"whitespace-nowrap",children:"Time Left:"}),s.jsx("span",{className:K("text-red-400",e<600&&"text-red-700"),children:t(e)})]}),n===ne.LISTENING&&r&&a&&s.jsxs("div",{className:"flex items-center gap-4",children:[d==="Thematic"&&o&&s.jsx(Le,{onClick:o,variant:"default",size:"sm",type:"button",className:"flex items-center gap-1 h-8 w-8 p-0 bg-black hover:bg-gray-800 border-black text-white",disabled:x?.role===Qe.STUDENT&&l&&!i,title:x?.role===Qe.STUDENT&&l&&!i?"Students cannot pause after starting audio":u?i?"Resume audio":"Pause audio":"Start audio",children:!u||i?s.jsx(Vo,{className:"w-4 h-4 text-white"}):s.jsx(Uo,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{className:"flex items-center gap-2",children:[E===0?s.jsx(Ko,{className:"w-5 h-5"}):s.jsx(Xo,{className:"w-5 h-5"}),s.jsx(ha,{id:"volume",min:0,max:1,step:.01,defaultValue:[.5],onValueChange:B,className:"w-24"})]})]}),(n===ne.LISTENING||n===ne.READING)&&s.jsxs(ia,{children:[s.jsx(la,{asChild:!0,children:s.jsxs(Le,{variant:"outline",size:"sm",type:"button",className:"flex items-center gap-2 h-7 bg-black text-white border-black hover:bg-gray-800",children:[s.jsx(Yo,{className:"w-4 h-4"}),"Options"]})}),s.jsxs(ca,{align:"end",className:"w-56",children:[s.jsx(ua,{children:"Options"}),s.jsx(da,{}),s.jsxs(ir,{children:[s.jsx(lr,{children:s.jsx("span",{children:"Contrast"})}),s.jsx(cr,{children:s.jsxs(ur,{value:b,onValueChange:W=>v(W),children:[s.jsx(ct,{value:"black-on-white",children:"Black on white"}),s.jsx(ct,{value:"white-on-black",children:"White on Black"}),s.jsx(ct,{value:"yellow-on-black",children:"Yellow on black"})]})})]}),s.jsxs(ir,{children:[s.jsx(lr,{children:s.jsx("span",{children:"Text size"})}),s.jsx(cr,{children:s.jsxs(ur,{value:w,onValueChange:W=>g(W),children:[s.jsx(ct,{value:"regular",children:"Regular"}),s.jsx(ct,{value:"large",children:"Large"}),s.jsx(ct,{value:"extra-large",children:"Extra large"})]})})]})]})]}),(x?.role===Qe.TEACHER||x?.role===Qe.STUDENT&&d==="Thematic")&&s.jsxs(Le,{onClick:m,variant:"default",type:"button",className:"flex items-center gap-2 h-7 w-24",children:[s.jsx(Jo,{className:"w-4 h-4"}),"Back"]})]})]})})};var Qs="AlertDialog",[Jl,Uc]=en(Qs,[Hr]),Oe=Hr(),Zs=e=>{const{__scopeAlertDialog:t,...n}=e,r=Oe(t);return s.jsx(pa,{...r,...n,modal:!0})};Zs.displayName=Qs;var Ql="AlertDialogTrigger",eo=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Oe(n);return s.jsx(ga,{...a,...r,ref:t})});eo.displayName=Ql;var Zl="AlertDialogPortal",to=e=>{const{__scopeAlertDialog:t,...n}=e,r=Oe(t);return s.jsx(ma,{...r,...n})};to.displayName=Zl;var ec="AlertDialogOverlay",no=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Oe(n);return s.jsx(ya,{...a,...r,ref:t})});no.displayName=ec;var vt="AlertDialogContent",[tc,nc]=Jl(vt),rc=ea("AlertDialogContent"),ro=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...a}=e,o=Oe(n),i=c.useRef(null),l=nt(t,i),u=c.useRef(null);return s.jsx(xa,{contentName:vt,titleName:so,docsSlug:"alert-dialog",children:s.jsx(tc,{scope:n,cancelRef:u,children:s.jsxs(ba,{role:"alertdialog",...o,...a,ref:l,onOpenAutoFocus:yt(a.onOpenAutoFocus,d=>{d.preventDefault(),u.current?.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[s.jsx(rc,{children:r}),s.jsx(oc,{contentRef:i})]})})})});ro.displayName=vt;var so="AlertDialogTitle",oo=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Oe(n);return s.jsx(va,{...a,...r,ref:t})});oo.displayName=so;var ao="AlertDialogDescription",io=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Oe(n);return s.jsx(wa,{...a,...r,ref:t})});io.displayName=ao;var sc="AlertDialogAction",lo=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Oe(n);return s.jsx(Gr,{...a,...r,ref:t})});lo.displayName=sc;var co="AlertDialogCancel",uo=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:a}=nc(co,n),o=Oe(n),i=nt(t,a);return s.jsx(Gr,{...o,...r,ref:i})});uo.displayName=co;var oc=({contentRef:e})=>{const t=`\`${vt}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${vt}\` by passing a \`${ao}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${vt}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return c.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},ac=Zs,ic=eo,lc=to,fo=no,ho=ro,po=lo,go=uo,mo=oo,xo=io;const cc=ac,uc=ic,dc=lc,bo=c.forwardRef(({className:e,...t},n)=>s.jsx(fo,{className:K("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));bo.displayName=fo.displayName;const vo=c.forwardRef(({className:e,...t},n)=>s.jsxs(dc,{children:[s.jsx(bo,{}),s.jsx(ho,{ref:n,className:K("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));vo.displayName=ho.displayName;const wo=({className:e,...t})=>s.jsx("div",{className:K("flex flex-col space-y-2 text-center sm:text-left",e),...t});wo.displayName="AlertDialogHeader";const yo=({className:e,...t})=>s.jsx("div",{className:K("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});yo.displayName="AlertDialogFooter";const Co=c.forwardRef(({className:e,...t},n)=>s.jsx(mo,{ref:n,className:K("text-lg font-semibold",e),...t}));Co.displayName=mo.displayName;const Eo=c.forwardRef(({className:e,...t},n)=>s.jsx(xo,{ref:n,className:K("text-sm text-muted-foreground",e),...t}));Eo.displayName=xo.displayName;const So=c.forwardRef(({className:e,...t},n)=>s.jsx(po,{ref:n,className:K(zr(),e),...t}));So.displayName=po.displayName;const No=c.forwardRef(({className:e,...t},n)=>s.jsx(go,{ref:n,className:K(zr({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));No.displayName=go.displayName;const fc=({trigger:e,title:t,description:n,onConfirm:r,confirmText:a="Confirm",cancelText:o="Cancel",isLoading:i})=>s.jsxs(cc,{children:[s.jsx(uc,{asChild:!0,children:e}),s.jsxs(vo,{children:[s.jsxs(wo,{children:[s.jsx(Co,{children:t}),s.jsx(Eo,{children:n})]}),s.jsxs(yo,{children:[s.jsx(No,{disabled:i,children:o}),s.jsx(So,{asChild:!0,children:s.jsx(Le,{onClick:r,disabled:i,loading:i,children:a})})]})]})]}),Kc=({data:e,form:t,activeTab:n,testType:r,setActiveTab:a,currentTabIndex:o,handlePrevious:i,handleNext:l,onSubmit:u,isTestFinished:d,isLoading:p,disableSubmit:f=!1,disableSubmitReason:h})=>{const m=b=>{switch(r){case ne.READING:return Te.get(b,"passage_number","");case ne.LISTENING:return Te.get(b,"listening_section","");case ne.WRITING:return Te.get(b,"writing_task","");default:return""}},x=(b,w)=>{a(`tab-${w}`),setTimeout(()=>{const v=document.getElementById(`question-${b}`);v&&v.scrollIntoView({behavior:"smooth",block:"center"})},100)};return s.jsx(Ot,{className:"w-full shadow-md p-2 sticky bottom-0 z-50 rounded-none",children:s.jsxs(On,{className:"p-0 flex items-center justify-between gap-2 h-[80px]",children:[s.jsx(qo,{className:K(r===ne.WRITING?"!flex !flex-row w-full gap-2 min-h-min":"grid grid-cols-2 gap-2 min-h-min"),children:e.map(b=>{const w=Te.get(b,"question_numbers",[]);return s.jsxs("div",{className:K(r===ne.WRITING?"flex gap-1":"flex gap-2"),children:[s.jsxs(Fo,{value:`tab-${b.id}`,className:K(r===ne.WRITING?"flex items-center gap-1 px-2 py-1 text-sm":"flex items-center gap-2"),children:["Part ",m(b)]}),!Te.isEmpty(w)&&s.jsx("div",{className:"flex flex-wrap gap-1",children:w?.sort((v,g)=>v.question_number-g.question_number).map(v=>{const g=t.watch(`answers.${v?.question_number-1}.answer`),E=!!g&&g.trim()!=="";return s.jsx($r,{onClick:k=>{k.preventDefault(),k.stopPropagation(),x(v?.question_number,b.id)},className:K("cursor-pointer rounded text-sm flex items-center justify-center",r===ne.WRITING?"h-6 w-6":"h-7 w-7",E?"bg-primary text-background hover:bg-primary/90":"border border-primary text-primary hover:bg-primary/10"),children:v?.question_number},v.id)})})]},b.id)})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Le,{type:"button",onClick:i,disabled:o===0||d,variant:"outline",size:"sm",className:"p-0 w-8 h-8",children:s.jsx(Qo,{className:"w-4 h-4"})}),s.jsx(Le,{type:"button",onClick:l,disabled:o===e.length-1||d,variant:"outline",size:"sm",className:"p-0 w-8 h-8",children:s.jsx(Zo,{className:"w-4 h-4"})}),s.jsx(fc,{trigger:s.jsx(Le,{type:"button",disabled:d||f,className:"w-full md:w-auto",children:"Submit"}),title:"Submit Test ?",description:"Are you sure you want to submit the test? This action cannot be undone.",onConfirm:u,confirmText:"Yes, Submit",cancelText:"No, Cancel",isLoading:p}),f&&h&&s.jsx("p",{className:"text-xs text-muted-foreground max-w-[200px]",children:h})]})]})})},Xc=e=>{const{user:t}=Zt(),n=Oo(),r=_r(),a=typeof e=="boolean"?{shouldBlock:e}:e,{shouldBlock:o,audioRef:i,timeLeft:l,isAudioPlaying:u,customMessage:d}=a,p=t?.role===Qe.STUDENT,f=()=>i?.current?!i.current.paused&&!i.current.ended:!1,h=()=>l==null?!1:l>0,m=()=>!p||!o?!1:f()||h()?!0:o,x=()=>{if(d)return d;const g=f(),E=h();return g&&E?"Audio hali ijro etilmoqda va vaqt tugamagan! Chiqishni xohlaysizmi?":g?"Audio hali ijro etilmoqda! Chiqishni xohlaysizmi?":E?"Test vaqti hali tugamagan! Chiqishni xohlaysizmi?":"Test hali tugamadi! Chiqishni xohlaysizmi?"},b=c.useCallback(()=>{const g=document.documentElement;g.requestFullscreen&&g.requestFullscreen().catch(E=>{console.error("Fullscreen rejimini yoqishda xato:",E)})},[]),w=c.useCallback(()=>{document.exitFullscreen&&document.fullscreenElement&&document.exitFullscreen().catch(g=>{console.error("Fullscreen rejimidan chiqishda xato:",g)})},[]),v=c.useCallback(()=>{const g=m();if(p&&g){const E=x();window.confirm(E)?w():r(n.pathname,{replace:!0})}},[p,o,i,l,n.pathname,r,w]);c.useEffect(()=>{if(!p)return;if(!o){w();return}b();const g=j=>{if(m()){j.preventDefault();const F=d||"Test hali tugamadi! Audio ijro etilmoqda yoki vaqt tugamagan. Chiqishni tasdiqlasangiz, natijalar saqlanmaydi!";j.returnValue=F}},E=j=>{const q=m();if(q&&(j.ctrlKey&&j.key==="r"||j.key==="F5")){j.preventDefault();const F=f(),B=h();let W="Test tugamaguncha sahifani yangilash taqiqlangan!";F&&B?W="Audio ijro etilmoqda va vaqt tugamagan! Sahifani yangilash taqiqlangan!":F?W="Audio hali ijro etilmoqda! Sahifani yangilash taqiqlangan!":B&&(W="Test vaqti hali tugamagan! Sahifani yangilash taqiqlangan!"),alert(W)}q&&j.key==="F11"&&(j.preventDefault(),alert("Test tugamaguncha fullscreen rejimidan chiqish taqiqlangan!")),q&&j.key==="Escape"&&(j.preventDefault(),alert("Test tugamaguncha Escape tugmasi ishlamaydi!")),q&&(j.altKey&&j.key==="Tab"||j.ctrlKey&&j.key==="Tab")&&(j.preventDefault(),alert("Test tugamaguncha boshqa oynaga o'tish taqiqlangan!"))},k=()=>{if(m()&&!document.fullscreenElement){b();const q=f(),F=h();let B="Test tugamaguncha fullscreen rejimida qolishingiz kerak!";q&&F?B="Audio ijro etilmoqda va vaqt tugamagan! Fullscreen rejimida qolishingiz kerak!":q?B="Audio hali ijro etilmoqda! Fullscreen rejimida qolishingiz kerak!":F&&(B="Test vaqti hali tugamagan! Fullscreen rejimida qolishingiz kerak!"),alert(B)}},R=j=>{m()&&(j.preventDefault(),alert("Test tugamaguncha o'ng tugma menyusi ishlamaydi!"))},_=j=>{m()&&(j.key==="F12"||j.ctrlKey&&j.shiftKey&&(j.key==="I"||j.key==="J")||j.ctrlKey&&j.key==="u")&&(j.preventDefault(),alert("Test tugamaguncha developer tools ishlamaydi!"))};window.addEventListener("beforeunload",g),window.addEventListener("keydown",E),window.addEventListener("keydown",_),window.addEventListener("popstate",v),document.addEventListener("fullscreenchange",k),document.addEventListener("contextmenu",R);const N=()=>{m()&&f()&&setTimeout(()=>{window.focus(),alert("Audio ijro etilmoqda! Boshqa oynaga o'tish taqiqlangan!")},100)};window.addEventListener("blur",N);const M=j=>{m()&&(j.preventDefault(),history.pushState(null,"",n.pathname),alert("Test tugamaguncha browser navigation tugmalari ishlamaydi!"))};return m()&&history.pushState(null,"",n.pathname),window.addEventListener("hashchange",M),()=>{window.removeEventListener("beforeunload",g),window.removeEventListener("keydown",E),window.removeEventListener("keydown",_),window.removeEventListener("popstate",v),document.removeEventListener("fullscreenchange",k),document.removeEventListener("contextmenu",R),window.removeEventListener("blur",N),window.removeEventListener("hashchange",M)}},[p,o,i,l,v,b,w])};export{Bc as C,Wc as P,Vc as T,ne as a,Kc as b,Xc as u};
