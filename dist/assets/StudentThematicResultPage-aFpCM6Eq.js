import{e as b,u as k,j as e,c as g}from"./index-CGz7kFpt.js";import{B as a}from"./badge-CoTFThew.js";import{C as i,a as l,b as c,c as n}from"./card-D3gurF0g.js";import{a as q}from"./test-material-CYXOqKgh.js";import{B as S}from"./BackButton-DjHUIfky.js";import{u as j,E as C}from"./ErrorMessage-DbJcIzK3.js";import{L as E}from"./LoadingSpinner-CILShqlX.js";import{c as L,b as T,_ as $,h as I}from"./index-MqYuSQRa.js";import{l as s}from"./lodash-DX7nIOvF.js";import{c as F,a as A}from"./student-Cv2PTSc5.js";import"./index-BdrbzQWw.js";import"./utils-CPYLdFy8.js";import"./button-BXvCQrzc.js";import"./index-bldY7p9i.js";import"./createLucideIcon-DMPZRlKd.js";const X=()=>{const{student_id:r,material_id:o,skill:f}=b(),u=k(),{data:d,isLoading:p,isError:v}=j({queryKey:["students",r],queryFn:()=>F(r)}),{data:t,isLoading:N,isError:w}=j({queryKey:["test-material-thematic-result",r,o],queryFn:()=>A(f,r,o)}),h=s.get(t,"skill_type","reading"),{data:x,isLoading:y,isError:_}=j({queryKey:["test-material-thematic",o],queryFn:()=>q(f,o)});return N||p||y?e.jsx(E,{}):w||v||_?e.jsx(C,{title:"Failed to Load page",message:"An error occurred while loading the page. Please try again later."}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-xl font-semibold",children:s.get(t,"material_info.material_title")}),e.jsx("div",{className:"flex gap-2",children:e.jsx(S,{to:`/teacher/students/${r}/thematic`,label:"Back to thematics"})})]}),e.jsxs(i,{className:"w-full",children:[e.jsx(l,{className:"flex flex-row items-center gap-4",children:e.jsx(c,{children:d?.full_name})}),e.jsxs(n,{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Username:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:d?.username})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Group:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsx(a,{onClick:()=>u(`/teacher/groups/${d?.group?.id}`),className:"cursor-pointer",variant:"default",children:d?.group?.name})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Phone number:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:d?.phone})]})]})]}),e.jsxs(i,{className:"w-full",children:[e.jsx(l,{className:"flex flex-row items-center gap-4",children:e.jsx(c,{children:s.get(x,"skill_info.skill_title")})}),e.jsxs(n,{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Section title:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.get(x,"test_info.test_title")})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Material title:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.get(x,"title")})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Test type:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsx(a,{variant:"default",children:s.get(x,"test_info.test_type","N/A")})})]}),e.jsx("div",{className:"space-y-2 mt-4",children:s.get(x,"materials",[])?.map(m=>e.jsx("div",{className:"mb-2",children:e.jsxs(a,{variant:"outline",className:"inline-flex gap-2 p-1",children:[m.type==="reading"?e.jsx(L,{className:"h-6 w-6"}):m.type==="listening"?e.jsx(T,{className:"h-6 w-6"}):m.type==="writing"?e.jsx($,{className:"h-6 w-6"}):e.jsx(I,{className:"h-6 w-6"}),s.get(m,"title","N/A")]})},m.id))})]})]}),h==="reading"&&e.jsx(e.Fragment,{children:e.jsxs(i,{className:"w-full",children:[e.jsx(l,{className:"flex flex-row items-center gap-4",children:e.jsx(c,{children:s.get(t,"title")})}),e.jsxs(n,{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Total questions:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsx(a,{variant:"outline",children:s.get(t,"total_questions")})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Incorrect answers:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsx(a,{variant:"destructive",children:s.get(t,"incorrect_answers")})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Correct answers:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsx(a,{variant:"success",children:s.get(t,"correct_answers")})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Score percentage:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsx(a,{variant:"secondary",children:s.get(t,"score_percentage")})})]}),e.jsxs("div",{className:"flex gap-2 mt-4 items-center",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Answer review:"}),e.jsx(g,{to:`/teacher/students/${r}/thematic/reading/${s.get(t,"material_info.reading_material_id")}/view`,className:"text-blue-500",children:"View"})]})]})]})}),h==="listening"&&e.jsx(e.Fragment,{children:e.jsxs(i,{className:"w-full",children:[e.jsx(l,{className:"flex flex-row items-center gap-4",children:e.jsx(c,{children:s.get(t,"title")})}),e.jsxs(n,{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Total questions:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsx(a,{variant:"outline",children:s.get(t,"total_questions")})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Incorrect answers:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsx(a,{variant:"destructive",children:s.get(t,"incorrect_answers")})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Correct answers:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsx(a,{variant:"success",children:s.get(t,"correct_answers")})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Score percentage:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsx(a,{variant:"secondary",children:s.get(t,"score_percentage")})})]}),e.jsxs("div",{className:"flex gap-2 mt-4 items-center",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Answer review:"}),e.jsx(g,{to:`/teacher/students/${r}/thematic/listening/${s.get(t,"material_info.listening_material_id")}`,className:"text-blue-500",children:"View"})]})]})]})}),h==="writing"&&e.jsx(e.Fragment,{children:e.jsxs(i,{className:"w-full",children:[e.jsx(l,{className:"flex flex-row items-center gap-4",children:e.jsx(c,{children:s.get(t,"title")})}),e.jsxs(n,{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Writing (T1) score:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.get(t,"writing_task1.completed")?e.jsx(a,{variant:"outline",children:s.get(t,"writing_task1.score")}):e.jsx(a,{variant:"destructive",children:"Not completed"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Writing (T2) score:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.get(t,"writing_task2.completed")?e.jsx(a,{variant:"outline",children:s.get(t,"writing_task2.score")}):e.jsx(a,{variant:"destructive",children:"Not completed"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Score:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsx(a,{variant:"default",children:s.get(t,"score")})})]}),e.jsxs("div",{className:"flex gap-2 mt-4 items-center",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Answer review:"}),e.jsx(g,{to:`/teacher/students/${r}/thematic/writing/${s.get(t,"material_info.writing_material_id")}/view`,className:"text-blue-500",children:"View"})]})]})]})}),h==="speaking"&&e.jsx(e.Fragment,{children:e.jsxs(i,{className:"w-full",children:[e.jsx(l,{className:"flex flex-row items-center gap-4",children:e.jsx(c,{children:s.get(t,"title")})}),e.jsxs(n,{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Total questions:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsx(a,{variant:"outline",children:s.get(t,"total_questions")})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Incorrect answers:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsx(a,{variant:"destructive",children:s.get(t,"incorrect_answers")})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Correct answers:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsx(a,{variant:"success",children:s.get(t,"correct_answers")})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Score percentage:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsx(a,{variant:"secondary",children:s.get(t,"score_percentage")})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Score:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsx(a,{variant:"default",children:s.get(t,"score")})})]}),e.jsxs("div",{className:"flex gap-2 mt-4 items-center",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Answer review:"}),e.jsx(g,{to:`/teacher/students/${r}/thematic/speaking/${s.get(t,"material_info.speaking_material_id")}/view`,className:"text-blue-500",children:"View"})]})]})]})})]})};export{X as default};
