import{d as j,j as e,c as y,u as h,r as o,e as C,a as M}from"./index-4kS3dc92.js";import{A as k,a as T}from"./avatar-1W4M9J2K.js";import{B as N}from"./badge-kS4BdgrN.js";import{C as S,a as V,b as K,c as E}from"./card-BhQ0nrJq.js";import{T as I,a as F,b as p,c as f}from"./tabs-BX0jSQDB.js";import{L as v}from"./LoadingSpinner-BtnFZCDF.js";import{c as L,b as $,_ as A,h as R,X as q,d as D,H}from"./index-BG-AEQrd.js";import{D as b}from"./data-table-_c_PbQZR.js";import{I as w}from"./input-Cg-vDzte.js";import{u as P}from"./useDebounce-Cbr4sAPq.js";import{u as _,E as B}from"./ErrorMessage-BOcr_lnl.js";import{l as r}from"./lodash-Cfwg2KdB.js";import"./index-Bq1TzI-k.js";import"./index-CGLyUDTa.js";import"./index-C5Edetr2.js";import"./utils-CPYLdFy8.js";import"./index-BdrbzQWw.js";import"./index-7Jc_Rc96.js";import"./index-C7PJrxHK.js";import"./index-Bq6uM4er.js";import"./index-aQQWtKiN.js";import"./table-CNnoRbys.js";import"./button-DbvuEKFN.js";import"./createLucideIcon-DBG_za26.js";import"./chevron-right-LDCTISZ0.js";const X=async(t,s)=>{let a=`/api/me/mocks/?page=${t}`;return s&&(a+=`&search=${s}`),(await j.get(a)).data},Q=async(t,s)=>{let a=`/api/me/thematics/?page=${t}`;return s&&(a+=`&search=${s}`),(await j.get(a)).data};function z(){return[{accessorKey:"title",header:"Material title",cell:({row:t})=>{const s=t.getValue("title");return e.jsx("div",{children:s})}},{accessorKey:"test_info",header:"Test title",cell:({row:t})=>{const s=t.getValue("test_info");return e.jsx("div",{children:r.get(s,"test_title")})}},{accessorKey:"materials",header:"Materials",cell:({row:t})=>{const s=t.getValue("materials");return e.jsx("div",{children:e.jsx("div",{className:"space-y-2 my-2",children:s?.map(a=>e.jsx("div",{className:"mb-2",children:e.jsxs(N,{variant:"outline",className:"inline-flex gap-2 p-1",children:[a.type==="reading"?e.jsx(L,{className:"h-6 w-6"}):a.type==="listening"?e.jsx($,{className:"h-6 w-6"}):a.type==="writing"?e.jsx(A,{className:"h-6 w-6"}):e.jsx(R,{className:"h-6 w-6"}),r.get(a,"title","N/A")]})},a.id))})})}},{accessorKey:"id",header:"Results",cell:({row:t})=>{const s=t.getValue("id");return e.jsx(e.Fragment,{children:e.jsx(y,{to:`/student/results/mock/${s}`,className:"text-blue-500",children:"View"})})}}]}function G(){h();const[t,s]=o.useState(1),[a,l]=o.useState(""),i=P(a),{data:c,isLoading:m,isError:g}=_({queryKey:["my-mocks",t,i],queryFn:()=>X(t,i)}),d=z(),u=r.get(c,"results",[]),n={totalCount:r.get(c,"count",0),totalPages:r.get(c,"total_pages",1),currentPage:t};return o.useEffect(()=>{s(1)},[i]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-xl font-semibold",children:"My mocks"}),e.jsx("div",{className:"flex gap-2",children:e.jsx(w,{placeholder:"Search ...",value:a,onChange:x=>l(x.target.value),className:"max-w-sm w-64"})})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(b,{data:u,columns:d,pagination:!0,totalCount:n.totalCount,totalPages:n.totalPages,currentPage:n.currentPage,onPageChange:s,isLoading:m})})]})}function J(){const{student_id:t}=C();return[{accessorKey:"title",header:"Material title",cell:({row:s})=>{const a=s.getValue("title");return e.jsx("div",{children:a})}},{accessorKey:"test_info",header:"Section title",cell:({row:s})=>{const a=s.getValue("test_info");return e.jsx("div",{children:r.get(a,"test_title")})}},{accessorKey:"skill_info",header:"Test title",cell:({row:s})=>{const a=s.getValue("skill_info");return e.jsx("div",{children:r.get(a,"skill_title")})}},{accessorKey:"id",header:"Results",cell:({row:s})=>{const a=s.getValue("id"),l=s.original.type;return e.jsx(e.Fragment,{children:e.jsx(y,{to:`/student/results/thematic/${l}/${a}`,className:"text-blue-500",children:"View"})})}}]}function O(){h();const[t,s]=o.useState(1),[a,l]=o.useState(""),i=P(a),{data:c,isLoading:m,isError:g}=_({queryKey:["my-thematics",t,i],queryFn:()=>Q(t,i)}),d=J(),u=r.get(c,"results",[]),n={totalCount:r.get(c,"count",0),totalPages:r.get(c,"total_pages",1),currentPage:t};return o.useEffect(()=>{s(1)},[i]),m?e.jsx(v,{}):g?e.jsx(B,{title:"Failed to Load page",message:"An error occurred while loading the page. Please try again later."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-xl font-semibold",children:"My thematics"}),e.jsx("div",{className:"flex gap-2",children:e.jsx(w,{placeholder:"Search ...",value:a,onChange:x=>l(x.target.value),className:"max-w-sm w-64"})})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(b,{data:u,columns:d,pagination:!0,totalCount:n.totalCount,totalPages:n.totalPages,currentPage:n.currentPage,onPageChange:s,isLoading:m})})]})}const ve=()=>{h();const{user:t,loading:s}=M();return s?e.jsx(v,{}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs(S,{className:"w-full",children:[e.jsxs(V,{className:"flex flex-row items-center gap-4",children:[e.jsx(k,{className:"h-12 w-12",children:e.jsx(T,{children:e.jsx(q,{className:"w-6 h-6"})})}),e.jsx("div",{children:e.jsx(K,{children:t?.username})})]}),e.jsxs(E,{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Full name:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t?.full_name})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Phone number:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t?.phone})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Role:"}),e.jsx(N,{variant:"outline",children:t?.role})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"text-xl font-semibold text-center",children:"My results"}),e.jsxs(I,{defaultValue:"mock",className:"w-full",children:[e.jsxs(F,{className:"w-full grid grid-cols-2",children:[e.jsxs(p,{value:"mock",className:"flex items-center justify-center gap-2 text-sm font-medium transition-colors ",children:[e.jsx(D,{className:"w-5 h-5"}),"Mock"]}),e.jsxs(p,{value:"thematic",className:"flex items-center justify-center gap-2 text-sm font-medium transition-colors ",children:[e.jsx(H,{className:"w-5 h-5"}),"Thematic"]})]}),e.jsx(f,{value:"mock",className:"mt-6",children:e.jsx(G,{})}),e.jsx(f,{value:"thematic",className:"mt-6",children:e.jsx(O,{})})]})]})]})};export{ve as default};
