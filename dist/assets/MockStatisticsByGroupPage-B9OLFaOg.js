import{j as e,r as c,e as P,c as G}from"./index-Cy9jHuRv.js";import{B as l}from"./badge-IrXRMWhS.js";import{C as se,a as ae,b as re,c as ne}from"./card-BD9FohpU.js";import{T as Ne,a as ke,b as $,c as L}from"./tabs-DH6m9RDL.js";import{B as Fe}from"./BackButton-CgA627_F.js";import{u as C,E as T}from"./ErrorMessage-DNrmBrBl.js";import{L as Se}from"./LoadingSpinner-B72d7kK0.js";import{T as E,U as A,W as Ce,F as be,c as ie,b as le,_ as ce,h as oe,p as Pe}from"./index-Csn_CNAh.js";import{l as a}from"./lodash-BBcoGl6R.js";import{a as Te}from"./groups-DzCzvBer.js";import{d as Ke,e as I,g as Re}from"./test-material-B00FWadq.js";import{D as q}from"./data-table-CkcK5AN_.js";import{I as z}from"./input-Dmuv5Y0O.js";import{u as D}from"./useDebounce-C0HtNpXM.js";import{b as W}from"./helper-DHn6dyFE.js";import{B as F}from"./button-CiEzOr1B.js";import{T as de,a as ge,W as X,P as v,A as H,b as S,c as Me,F as $e,d as Le,e as Ee}from"./index-vYlAMFR9.js";import"./index-BdrbzQWw.js";import"./utils-CPYLdFy8.js";import"./index-DmFExJhO.js";import"./index-tzQ0gPW4.js";import"./index-BZQFcWYG.js";import"./index-B0hBVchl.js";import"./index-VMR0j23S.js";import"./index-CsXzfe-O.js";import"./index-C0rI5D1m.js";import"./createLucideIcon-tayhp3_E.js";import"./table-CVudzuY3.js";import"./chevron-right-SLim4-4O.js";function Ae(){return[{accessorKey:"full_name",header:"Student Name",cell:({row:t})=>e.jsx("div",{children:t.getValue("full_name")})},{accessorKey:"material_info",header:"Listening",cell:({row:t})=>{const s=t.original.material_info,r=a.get(s,"listening_complete",!1);return e.jsx(e.Fragment,{children:r?e.jsxs(e.Fragment,{children:[a.get(s,"listening_total_questions")," /"," ",a.get(s,"listening_correct_answers")," /"," ",a.get(s,"listening_score")]}):e.jsx(l,{variant:"destructive",children:"Not completed"})})}},{accessorKey:"material_info",header:"Reading",cell:({row:t})=>{const s=t.original.material_info,r=a.get(s,"reading_complete",!1);return e.jsx(e.Fragment,{children:r?e.jsxs(e.Fragment,{children:[a.get(s,"reading_total_questions")," /"," ",a.get(s,"reading_correct_answers")," /"," ",a.get(s,"reading_score")]}):e.jsx(l,{variant:"destructive",children:"Not completed"})})}},{accessorKey:"material_info",header:"Writing (T1)",cell:({row:t})=>{const s=t.original.material_info,r=a.get(s,"writing_complete",!1);return e.jsx(e.Fragment,{children:r?e.jsx(e.Fragment,{children:a.get(s,"writing_task1_score")}):e.jsx(l,{variant:"destructive",children:"Not completed"})})}},{accessorKey:"material_info",header:"Writing (T2)",cell:({row:t})=>{const s=t.original.material_info,r=a.get(s,"writing_complete",!1);return e.jsx(e.Fragment,{children:r?e.jsx(e.Fragment,{children:a.get(s,"writing_task2_score")}):e.jsx(l,{variant:"destructive",children:"Not completed"})})}},{accessorKey:"material_info",header:"Writing total",cell:({row:t})=>{const s=t.original.material_info,r=a.get(s,"writing_complete",!1);return e.jsx(e.Fragment,{children:r?e.jsx(e.Fragment,{children:a.get(s,"writing_overall_score")}):e.jsx(l,{variant:"destructive",children:"Not completed"})})}},{accessorKey:"material_info",header:"Speaking",cell:({row:t})=>{const s=t.original.material_info,r=a.get(s,"speaking_complete",!1);return e.jsx(e.Fragment,{children:r?e.jsx(e.Fragment,{children:a.get(s,"speaking_overall_score")}):e.jsx(l,{variant:"destructive",children:"Not completed"})})}},{accessorKey:"score",header:"Total score",cell:({row:t})=>{const s=t.original.material_info;return e.jsx(l,{variant:"default",children:a.get(s,"total_overall_score")})}},{accessorKey:"created_at",header:"Test performed",cell:({row:t})=>{const s=String(t.getValue("created_at"));return e.jsxs(e.Fragment,{children:[s.slice(0,10)," ",s.slice(11,19)]})}},{accessorKey:"actions",header:"Actions",cell:({row:t})=>{const s=a.get(t.original,"is_call",!1),r=a.get(t.original,"is_sms",!1),n=a.get(t.original,"phone","");return e.jsxs("div",{className:"flex items-center gap-2",children:[s&&e.jsx(F,{variant:"outline",size:"icon",onClick:()=>window.open(`tel:${n}`,"_self"),className:"h-8 w-8",children:e.jsx(E,{className:"h-4 w-4"})}),r&&e.jsx(F,{variant:"outline",size:"icon",onClick:()=>window.open(`sms:${n}`,"_self"),className:"h-8 w-8",children:e.jsx(A,{className:"h-4 w-4"})})]})}}]}const Ie=({testData:t,material_id:s,group_id:r})=>{const[n,h]=c.useState(!1),x=c.useMemo(()=>({material_id:s,group_id:r}),[s,r]),{data:g,fetchStatus:p,refetch:o}=C({queryKey:["mock-full-results",x],queryFn:()=>Ke(s,r),enabled:!1}),u=async()=>{h(!0);try{const _=(await o()).data?.results||[];if(_.length===0){console.error("No data fetched from API");return}const y=_[0]?.group_name||"Group Result",k=_.map((i,w)=>{const m=i.material_info,M=m.listening_complete?`${m.listening_correct_answers}/${m.listening_score}`:m.listening_score>0?m.listening_score.toString():"-",te=m.reading_complete?`${m.reading_correct_answers}/${m.reading_score}`:m.reading_score>0?m.reading_score.toString():"-",b=m.writing_task1_score>0?m.writing_task1_score.toString():"-",V=m.writing_task2_score>0?m.writing_task2_score.toString():"-",ye=m.writing_overall_score>0?m.writing_overall_score.toString():b!=="-"&&V!=="-"?((parseFloat(V)*2+parseFloat(b))/3).toFixed(1):"-",O=m.total_overall_score||0;let B="Failed";return O>=6?B="Qualified":O===5.5?B="Saved Chance":(b==="D"||V==="D")&&(B="D"),{no:w+1,name:i.full_name,l:M,r:te,t1:b,t2:V,writing:ye,total:O.toFixed(1),result:B}}),d=["No","Names and Surnames","L","R","T1","T2","Writing total","Total score","Result"],N=d.length,K=9026,Z=[.4,2,.8,.8,.8,.8,.8,.8,.8],ue=Z.reduce((i,w)=>i+w,0),me=Math.floor(K/ue),Q=Z.map(i=>Math.floor(me*i)),he=Q.reduce((i,w)=>i+w,0),J=K-he;J>0&&(Q[1]+=J);const U=i=>Q[i],xe=i=>{if(i==="Qualified")return"FFFF00";if(i==="Saved Chance")return"90EE90";if(i==="Failed")return"FF6347";if(i==="D")return"808080"},pe=new de({children:d.map((i,w)=>new ge({children:[new v({children:[new S({text:i,bold:!0})],alignment:H.CENTER})],shading:{fill:"D3D3D3"},width:{size:U(w),type:X.DXA}}))}),fe=k.map(i=>{const w=[i.no,i.name,i.l,i.r,i.t1,i.t2,i.writing,i.total,i.result];return new de({children:w.map((m,M)=>{const b=M===8?xe(String(m)):void 0;return new ge({children:[new v({children:[new S({text:String(m)})],alignment:M===0?H.CENTER:H.LEFT})],shading:b?{fill:b}:void 0,width:{size:U(M),type:X.DXA}})})})}),_e=new Me({rows:[pe,...fe],width:{size:K,type:X.DXA},columnWidths:d.map((i,w)=>U(w))}),j=[];t&&(j.push(new v({children:[new S({text:`Test Title: ${t.test_info.test_title}`,size:20})]})),j.push(new v({children:[new S({text:`Test Type: ${t.test_type}`,size:20})]})),j.push(new v({children:[new S({text:`Material Title: ${t.title}`,size:20})]})),j.push(new v({children:[new S({text:"Materials:",size:20})]})),t.materials.forEach((i,w)=>{j.push(new v({children:[new S({text:`${w+1}. ${i.type.toUpperCase()}: ${i.title}`,size:20})]}))}),j.push(new v({text:""}))),j.push(new v({children:[new S({text:`Group: ${y}`,size:24,bold:!0})]})),j.push(new v({text:""})),j.push(_e);const Y=new Date().toLocaleString("en-US",{timeZone:"Asia/Tashkent"});j.push(new v({text:""})),["* Qualified --> those who got at least overall 6","** Saved chance --> those who nearly passed","*** Writing total formula just in case: ((T2*2)+T1)/3","**** D --> Disqualified due to the occurrence of cheating"].forEach(i=>{j.push(new v({children:[new S({text:i,size:20})]}))}),j.push(new v({children:[new S({text:`Generated on: ${Y}`,size:20})]}));const je=new $e({sections:[{properties:{page:{size:{orientation:Le.PORTRAIT,width:11906,height:16838},margin:{top:1440,right:1440,bottom:1440,left:1440}}},children:j}]}),we=await Ee.toBlob(je),ee=window.URL.createObjectURL(we),R=document.createElement("a");R.href=ee;const ve=Y.replace(/[/:]/g,"-").replace(/,/g,"");R.download=`${y} - Mock Results - ${ve}.docx`,document.body.appendChild(R),R.click(),document.body.removeChild(R),window.URL.revokeObjectURL(ee)}catch(f){console.error("Error generating Word document:",f)}finally{h(!1)}};return e.jsxs(F,{onClick:u,disabled:n,children:[n?e.jsx(Ce,{className:"w-5 h-5 animate-spin"}):e.jsx(be,{className:"w-5 h-5"})," ","Download"]})},qe=({testData:t})=>{const{material_id:s,group_id:r}=P(),[n,h]=c.useState(1),[x,g]=c.useState(""),p=D(x),o=c.useMemo(()=>({material_id:s,group_id:r}),[s,r]),u=W(o),{data:f,isLoading:_,isError:y}=C({queryKey:["mock-full-results",n,p,u],queryFn:()=>I("full",n,p,"",u)}),k=Ae(),d=a.get(f,"results",[]),N={totalCount:a.get(f,"count",0),totalPages:a.get(f,"total_pages",1),currentPage:n};return c.useEffect(()=>{h(1)},[p]),y?e.jsx(T,{title:"Failed to Load page",message:"An error occurred while loading the page. Please try again later."}):e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-xl font-semibold",children:"Full results"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(z,{placeholder:"Search ...",value:x,onChange:K=>g(K.target.value),className:"max-w-sm w-64"}),e.jsx(Ie,{group_id:r,material_id:s,testData:t})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(q,{data:d,columns:k,pagination:!0,totalCount:N.totalCount,totalPages:N.totalPages,currentPage:N.currentPage,onPageChange:h,isLoading:_})})]})})};function ze(){return[{accessorKey:"full_name",header:"Student Name",cell:({row:t})=>e.jsx("div",{children:t.getValue("full_name")})},{accessorKey:"total_questions",header:"Total questions",cell:({row:t})=>{const s=t.original.material_info;return e.jsx(l,{variant:"outline",children:a.get(s,"total_questions")})}},{accessorKey:"incorrect_answers",header:"Incorrect answers",cell:({row:t})=>{const s=t.original.material_info;return e.jsx(l,{variant:"destructive",children:a.get(s,"incorrect_answers")})}},{accessorKey:"correct_answers",header:"Correct answers",cell:({row:t})=>{const s=t.original.material_info;return e.jsx(l,{variant:"success",children:a.get(s,"correct_answers")})}},{accessorKey:"score_percentage",header:"Score percentage (%)",cell:({row:t})=>{const s=t.original.material_info;return e.jsx(l,{variant:"secondary",children:a.get(s,"score_percentage")})}},{accessorKey:"score",header:"Score",cell:({row:t})=>{const s=t.original.material_info;return e.jsx(l,{variant:"default",children:a.get(s,"score")})}},{accessorKey:"created_at",header:"Test performed",cell:({row:t})=>{const s=String(t.getValue("created_at"));return e.jsxs(e.Fragment,{children:[s.slice(0,10)," ",s.slice(11,19)]})}},{accessorKey:"material_info",header:"Answer review",cell:({row:t})=>{const s=t.original.student_id,r=t.getValue("material_info"),n=a.get(r,"id",null);return e.jsx(e.Fragment,{children:e.jsx(G,{to:`/teacher/students/${s}/mock/listening/${n}/view`,className:"text-blue-500",children:"View"})})}},{accessorKey:"actions",header:"Actions",cell:({row:t})=>{const s=a.get(t.original,"is_call",!1),r=a.get(t.original,"is_sms",!1),n=a.get(t.original,"phone","");return e.jsxs("div",{className:"flex items-center gap-2",children:[s&&e.jsx(F,{variant:"outline",size:"icon",onClick:()=>window.open(`tel:${n}`,"_self"),className:"h-8 w-8",children:e.jsx(E,{className:"h-4 w-4"})}),r&&e.jsx(F,{variant:"outline",size:"icon",onClick:()=>window.open(`sms:${n}`,"_self"),className:"h-8 w-8",children:e.jsx(A,{className:"h-4 w-4"})})]})}}]}const De=()=>{const{material_id:t,group_id:s}=P(),[r,n]=c.useState(1),[h,x]=c.useState(""),g=D(h),p=c.useMemo(()=>({material_id:t,group_id:s}),[t,s]),o=W(p),{data:u,isLoading:f,isError:_}=C({queryKey:["mock-listening-results",r,g,o],queryFn:()=>I("listening",r,g,"",o)}),y=ze(),k=a.get(u,"results",[]),d={totalCount:a.get(u,"count",0),totalPages:a.get(u,"total_pages",1),currentPage:r};return c.useEffect(()=>{n(1)},[g]),_?e.jsx(T,{title:"Failed to Load page",message:"An error occurred while loading the page. Please try again later."}):e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-xl font-semibold",children:"Listening results"}),e.jsx("div",{className:"flex gap-2",children:e.jsx(z,{placeholder:"Search ...",value:h,onChange:N=>x(N.target.value),className:"max-w-sm w-64"})})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(q,{data:k,columns:y,pagination:!0,totalCount:d.totalCount,totalPages:d.totalPages,currentPage:d.currentPage,onPageChange:n,isLoading:f})})]})})};function We(){return[{accessorKey:"full_name",header:"Student Name",cell:({row:t})=>e.jsx("div",{children:t.getValue("full_name")})},{accessorKey:"total_questions",header:"Total questions",cell:({row:t})=>{const s=t.original.material_info;return e.jsx(l,{variant:"outline",children:a.get(s,"total_questions")})}},{accessorKey:"incorrect_answers",header:"Incorrect answers",cell:({row:t})=>{const s=t.original.material_info;return e.jsx(l,{variant:"destructive",children:a.get(s,"incorrect_answers")})}},{accessorKey:"correct_answers",header:"Correct answers",cell:({row:t})=>{const s=t.original.material_info;return e.jsx(l,{variant:"success",children:a.get(s,"correct_answers")})}},{accessorKey:"score_percentage",header:"Score percentage (%)",cell:({row:t})=>{const s=t.original.material_info;return e.jsx(l,{variant:"secondary",children:a.get(s,"score_percentage")})}},{accessorKey:"score",header:"Score",cell:({row:t})=>{const s=t.original.material_info;return e.jsx(l,{variant:"default",children:a.get(s,"score")})}},{accessorKey:"created_at",header:"Test performed",cell:({row:t})=>{const s=String(t.getValue("created_at"));return e.jsxs(e.Fragment,{children:[s.slice(0,10)," ",s.slice(11,19)]})}},{accessorKey:"material_info",header:"Answer review",cell:({row:t})=>{const s=t.original.student_id,r=t.getValue("material_info"),n=a.get(r,"id",null);return e.jsx(e.Fragment,{children:e.jsx(G,{to:`/teacher/students/${s}/mock/reading/${n}/view`,className:"text-blue-500",children:"View"})})}},{accessorKey:"actions",header:"Actions",cell:({row:t})=>{const s=a.get(t.original,"is_call",!1),r=a.get(t.original,"is_sms",!1),n=a.get(t.original,"phone","");return e.jsxs("div",{className:"flex items-center gap-2",children:[s&&e.jsx(F,{variant:"outline",size:"icon",onClick:()=>window.open(`tel:${n}`,"_self"),className:"h-8 w-8",children:e.jsx(E,{className:"h-4 w-4"})}),r&&e.jsx(F,{variant:"outline",size:"icon",onClick:()=>window.open(`sms:${n}`,"_self"),className:"h-8 w-8",children:e.jsx(A,{className:"h-4 w-4"})})]})}}]}const Ve=()=>{const{material_id:t,group_id:s}=P(),[r,n]=c.useState(1),[h,x]=c.useState(""),g=D(h),p=c.useMemo(()=>({material_id:t,group_id:s}),[t,s]),o=W(p),{data:u,isLoading:f,isError:_}=C({queryKey:["mock-reading-results",r,g,o],queryFn:()=>I("reading",r,g,"",o)}),y=We(),k=a.get(u,"results",[]),d={totalCount:a.get(u,"count",0),totalPages:a.get(u,"total_pages",1),currentPage:r};return c.useEffect(()=>{n(1)},[g]),_?e.jsx(T,{title:"Failed to Load page",message:"An error occurred while loading the page. Please try again later."}):e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-xl font-semibold",children:"Reading results"}),e.jsx("div",{className:"flex gap-2",children:e.jsx(z,{placeholder:"Search ...",value:h,onChange:N=>x(N.target.value),className:"max-w-sm w-64"})})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(q,{data:k,columns:y,pagination:!0,totalCount:d.totalCount,totalPages:d.totalPages,currentPage:d.currentPage,onPageChange:n,isLoading:f})})]})})};function Be(){return[{accessorKey:"full_name",header:"Student Name",cell:({row:t})=>e.jsx("div",{children:t.getValue("full_name")})},{accessorKey:"writing_task1_score",header:"Writing (T1) score",cell:({row:t})=>{const s=t.original.material_info,r=a.get(s,"writing_task1"),n=a.get(r,"completed",!1);return e.jsx(e.Fragment,{children:n?e.jsx(l,{variant:"secondary",children:a.get(r,"score")}):e.jsx(l,{variant:"destructive",children:"Not completed"})})}},{accessorKey:"writing_task2_score",header:"Writing (T2) score",cell:({row:t})=>{const s=t.original.material_info,r=a.get(s,"writing_task2"),n=a.get(r,"completed",!1);return e.jsx(e.Fragment,{children:n?e.jsx(l,{variant:"secondary",children:a.get(r,"score")}):e.jsx(l,{variant:"destructive",children:"Not completed"})})}},{accessorKey:"score",header:"Total score",cell:({row:t})=>{const s=t.original.material_info;return e.jsx(l,{variant:"default",children:a.get(s,"score")})}},{accessorKey:"created_at",header:"Test performed",cell:({row:t})=>{const s=String(t.getValue("created_at"));return e.jsxs(e.Fragment,{children:[s.slice(0,10)," ",s.slice(11,19)]})}},{accessorKey:"material_info",header:"Answer review",cell:({row:t})=>{const s=t.original.student_id,r=t.getValue("material_info"),n=a.get(r,"id",null);return e.jsx(e.Fragment,{children:e.jsx(G,{to:`/teacher/students/${s}/mock/writing/${n}/view`,className:"text-blue-500",children:"View"})})}},{accessorKey:"actions",header:"Actions",cell:({row:t})=>{const s=a.get(t.original,"is_call",!1),r=a.get(t.original,"is_sms",!1),n=a.get(t.original,"phone","");return e.jsxs("div",{className:"flex items-center gap-2",children:[s&&e.jsx(F,{variant:"outline",size:"icon",onClick:()=>window.open(`tel:${n}`,"_self"),className:"h-8 w-8",children:e.jsx(E,{className:"h-4 w-4"})}),r&&e.jsx(F,{variant:"outline",size:"icon",onClick:()=>window.open(`sms:${n}`,"_self"),className:"h-8 w-8",children:e.jsx(A,{className:"h-4 w-4"})})]})}}]}const Ge=()=>{const{material_id:t,group_id:s}=P(),[r,n]=c.useState(1),[h,x]=c.useState(""),g=D(h),p=c.useMemo(()=>({material_id:t,group_id:s}),[t,s]),o=W(p),{data:u,isLoading:f,isError:_}=C({queryKey:["mock-writing-results",r,g,o],queryFn:()=>I("writing",r,g,"",o)}),y=Be(),k=a.get(u,"results",[]),d={totalCount:a.get(u,"count",0),totalPages:a.get(u,"total_pages",1),currentPage:r};return c.useEffect(()=>{n(1)},[g]),_?e.jsx(T,{title:"Failed to Load page",message:"An error occurred while loading the page. Please try again later."}):e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-xl font-semibold",children:"Writing results"}),e.jsx("div",{className:"flex gap-2",children:e.jsx(z,{placeholder:"Search ...",value:h,onChange:N=>x(N.target.value),className:"max-w-sm w-64"})})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(q,{data:k,columns:y,pagination:!0,totalCount:d.totalCount,totalPages:d.totalPages,currentPage:d.currentPage,onPageChange:n,isLoading:f})})]})})};function Qe(){return[{accessorKey:"full_name",header:"Student Name",cell:({row:t})=>e.jsx("div",{children:t.getValue("full_name")})},{accessorKey:"feedback",header:"Feedback",cell:({row:t})=>{const s=t.original.material_info;return e.jsx(e.Fragment,{children:a.get(s,"feedback")})}},{accessorKey:"score",header:"Score",cell:({row:t})=>{const s=t.original.material_info;return e.jsx(l,{variant:"default",children:a.get(s,"score")})}},{accessorKey:"created_at",header:"Test performed",cell:({row:t})=>{const s=String(t.getValue("created_at"));return e.jsxs(e.Fragment,{children:[s.slice(0,10)," ",s.slice(11,19)]})}},{accessorKey:"material_info",header:"Answer review",cell:({row:t})=>{const s=t.original.student_id,r=t.getValue("material_info"),n=a.get(r,"id",null);return e.jsx(e.Fragment,{children:e.jsx(G,{to:`/teacher/students/${s}/mock/writing/${n}/view`,className:"text-blue-500",children:"View"})})}},{accessorKey:"actions",header:"Actions",cell:({row:t})=>{const s=a.get(t.original,"is_call",!1),r=a.get(t.original,"is_sms",!1),n=a.get(t.original,"phone","");return e.jsxs("div",{className:"flex items-center gap-2",children:[s&&e.jsx(F,{variant:"outline",size:"icon",onClick:()=>window.open(`tel:${n}`,"_self"),className:"h-8 w-8",children:e.jsx(E,{className:"h-4 w-4"})}),r&&e.jsx(F,{variant:"outline",size:"icon",onClick:()=>window.open(`sms:${n}`,"_self"),className:"h-8 w-8",children:e.jsx(A,{className:"h-4 w-4"})})]})}}]}const Ue=()=>{const{material_id:t,group_id:s}=P(),[r,n]=c.useState(1),[h,x]=c.useState(""),g=D(h),p=c.useMemo(()=>({material_id:t,group_id:s}),[t,s]),o=W(p),{data:u,isLoading:f,isError:_}=C({queryKey:["mock-speaking-results",r,g,o],queryFn:()=>I("speaking",r,g,"",o)}),y=Qe(),k=a.get(u,"results",[]),d={totalCount:a.get(u,"count",0),totalPages:a.get(u,"total_pages",1),currentPage:r};return c.useEffect(()=>{n(1)},[g]),_?e.jsx(T,{title:"Failed to Load page",message:"An error occurred while loading the page. Please try again later."}):e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-xl font-semibold",children:"Speaking results"}),e.jsx("div",{className:"flex gap-2",children:e.jsx(z,{placeholder:"Search ...",value:h,onChange:N=>x(N.target.value),className:"max-w-sm w-64"})})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(q,{data:k,columns:y,pagination:!0,totalCount:d.totalCount,totalPages:d.totalPages,currentPage:d.currentPage,onPageChange:n,isLoading:f})})]})})},kt=()=>{const{group_id:t,material_id:s}=P(),{data:r,isLoading:n,isError:h}=C({queryKey:["groups",t],queryFn:()=>Te(t)}),{data:x,isLoading:g,isError:p}=C({queryKey:["test-material-mock",s],queryFn:()=>Re(s)});return n||g?e.jsx(Se,{}):h||p?e.jsx(T,{title:"Failed to Load page",message:"An error occurred while loading the page. Please try again later."}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-xl font-semibold",children:a.get(r,"name")}),e.jsx("div",{className:"flex gap-2",children:e.jsx(Fe,{to:`/teacher/tests/mock/statistics/${s}`,label:"Back to mock groups"})})]}),e.jsxs(se,{className:"w-full",children:[e.jsx(ae,{className:"flex flex-row items-center gap-4",children:e.jsx(re,{children:r?.name})}),e.jsxs(ne,{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Number of students"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:r?.students_count})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Status:"}),r?.is_active===!0?e.jsx(l,{variant:"success",children:"Active"}):e.jsx(l,{variant:"destructive",children:"Inactive"})]})]})]}),e.jsxs(se,{className:"w-full",children:[e.jsx(ae,{className:"flex flex-row items-center gap-4",children:e.jsx(re,{children:a.get(x,"test_info.test_title")})}),e.jsxs(ne,{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Material title:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:a.get(x,"title")})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"text-sm text-primary font-extrabold",children:"Test type:"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsx(l,{variant:"default",children:a.get(x,"test_type","N/A")})})]}),e.jsx("div",{className:"space-y-2 mt-4",children:a.get(x,"materials",[])?.map(o=>e.jsx("div",{className:"mb-2",children:e.jsxs(l,{variant:"outline",className:"inline-flex gap-2 p-1",children:[o.type==="reading"?e.jsx(ie,{className:"h-6 w-6"}):o.type==="listening"?e.jsx(le,{className:"h-6 w-6"}):o.type==="writing"?e.jsx(ce,{className:"h-6 w-6"}):e.jsx(oe,{className:"h-6 w-6"}),a.get(o,"title","N/A")]})},o.id))})]})]}),e.jsxs(Ne,{defaultValue:"reading",className:"w-full",children:[e.jsxs(ke,{className:"w-full grid grid-cols-5",children:[e.jsxs($,{value:"reading",className:"flex items-center justify-center gap-2 text-sm font-medium transition-colors ",children:[e.jsx(ie,{className:"w-5 h-5"}),"Reading"]}),e.jsxs($,{value:"listening",className:"flex items-center justify-center gap-2 text-sm font-medium transition-colors ",children:[e.jsx(le,{className:"w-5 h-5"}),"Listening"]}),e.jsxs($,{value:"writing",className:"flex items-center justify-center gap-2 text-sm font-medium transition-colors ",children:[e.jsx(ce,{className:"w-5 h-5"}),"Writing"]}),e.jsxs($,{value:"speaking",className:"flex items-center justify-center gap-2 text-sm font-medium transition-colors ",children:[e.jsx(oe,{className:"w-5 h-5"}),"Speaking"]}),e.jsxs($,{value:"full",className:"flex items-center justify-center gap-2 text-sm font-medium transition-colors ",children:[e.jsx(Pe,{className:"w-5 h-5"}),"Full"]})]}),e.jsx(L,{value:"reading",className:"mt-6",children:e.jsx(Ve,{})}),e.jsx(L,{value:"listening",className:"mt-6",children:e.jsx(De,{})}),e.jsx(L,{value:"writing",className:"mt-6",children:e.jsx(Ge,{})}),e.jsx(L,{value:"speaking",className:"mt-6",children:e.jsx(Ue,{})}),e.jsx(L,{value:"full",className:"mt-6",children:e.jsx(qe,{testData:x})})]})]})};export{kt as default};
