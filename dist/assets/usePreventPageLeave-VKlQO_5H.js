import{r as c,g as ra,j as s,h as ye,i as Dt,k as sa,p as oa,m as aa,a as en,u as $r,R as ct,b as ia}from"./index-CS2s05i4.js";import{c as la,a as ca,b as ua}from"./tabs-CJyCdXqc.js";import{c as W,t as Fr}from"./utils-CPYLdFy8.js";import{E as pr}from"./ErrorMessage-BbNFSGUB.js";import{c as da}from"./createLucideIcon-Dms7U1ir.js";import{p as fa,l as Tt,I as ha,H as qn}from"./useTestLogic-C78rFO_v.js";import{B as Le,b as Hr}from"./button-COBIZrUi.js";import{P as qr,M as pa,i as ma,j as ga,m as mr,G as xa,o as va,q as ba,s as wa,t as ya,Q as Sa,u as Ca,r as Ea}from"./index-Cqn82ak4.js";import{u as ge,c as Na}from"./index-63UScni_.js";import{c as $t}from"./index-x3L15vPG.js";import{u as Gn,c as wt}from"./index-C0WrmhQw.js";import{u as Bn,S as Nn,a as jn,b as Rn,c as Dn,d as Ze,e as Gr}from"./select-DjYLCAgf.js";import{u as Vn}from"./index-DBp2RNDP.js";import{P as Br}from"./index-mipPtYdG.js";import{P as Ce}from"./index-DLJVOBtY.js";import{C as ja}from"./index-DWHm-Cgz.js";import{F as Ne,a as Se,b as je,c as Oe,d as dt,e as Ke,L as Vr}from"./form-0hi-Stsd.js";import{b as Ra,c as Wr}from"./index.esm-B71M4lkn.js";import{C as tn,c as Wn}from"./card-B6uzx6J5.js";import{c as Ur,R as Da,I as _a}from"./index-f06P9S5E.js";import{u as Kr,c as ka}from"./index-tcoWAij7.js";import{C as Ia,D as Aa,a as za,b as Ta,d as Pa,e as Ma,g as gr,h as xr,i as vr,j as br,k as it}from"./dropdown-menu-CUfoXf1Z.js";import{T as ft,a as ht,b as ve,c as Te,d as pt,e as be}from"./table-C7t1_LVl.js";import{I as La}from"./input-DTtiGvPz.js";import{l as Pe}from"./lodash-CWzgwyzy.js";import{c as Xr,R as Oa,b as $a,P as Fa,W as Ha,C as qa,T as Ga,D as Ba,a as Yr,O as Va}from"./index-D9z673Yh.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Ua=da("grip-vertical",Wa);var ne=(e=>(e.READING="READING",e.LISTENING="LISTENING",e.WRITING="WRITING",e.SPEAKING="SPEAKING",e))(ne||{});const nn=c.createContext(null);nn.displayName="PanelGroupContext";const te={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},Un=10,et=c.useLayoutEffect,wr=ra.useId,Ka=typeof wr=="function"?wr:()=>null;let Xa=0;function Kn(e=null){const t=Ka(),n=c.useRef(e||t||null);return n.current===null&&(n.current=""+Xa++),e??n.current}function Jr({children:e,className:t="",collapsedSize:n,collapsible:r,defaultSize:o,forwardedRef:a,id:i,maxSize:l,minSize:u,onCollapse:f,onExpand:h,onResize:d,order:p,style:m,tagName:x="div",...g}){const y=c.useContext(nn);if(y===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:v,expandPanel:b,getPanelSize:N,getPanelStyle:E,groupId:k,isPanelCollapsed:D,reevaluatePanelConstraints:j,registerPanel:z,resizePanel:B,unregisterPanel:G}=y,O=Kn(i),L=c.useRef({callbacks:{onCollapse:f,onExpand:h,onResize:d},constraints:{collapsedSize:n,collapsible:r,defaultSize:o,maxSize:l,minSize:u},id:O,idIsFromProps:i!==void 0,order:p});c.useRef({didLogMissingDefaultSizeWarning:!1}),et(()=>{const{callbacks:U,constraints:J}=L.current,C={...J};L.current.id=O,L.current.idIsFromProps=i!==void 0,L.current.order=p,U.onCollapse=f,U.onExpand=h,U.onResize=d,J.collapsedSize=n,J.collapsible=r,J.defaultSize=o,J.maxSize=l,J.minSize=u,(C.collapsedSize!==J.collapsedSize||C.collapsible!==J.collapsible||C.maxSize!==J.maxSize||C.minSize!==J.minSize)&&j(L.current,C)}),et(()=>{const U=L.current;return z(U),()=>{G(U)}},[p,O,z,G]),c.useImperativeHandle(a,()=>({collapse:()=>{v(L.current)},expand:U=>{b(L.current,U)},getId(){return O},getSize(){return N(L.current)},isCollapsed(){return D(L.current)},isExpanded(){return!D(L.current)},resize:U=>{B(L.current,U)}}),[v,b,N,D,O,B]);const X=E(L.current,o);return c.createElement(x,{...g,children:e,className:t,id:O,style:{...X,...m},[te.groupId]:k,[te.panel]:"",[te.panelCollapsible]:r||void 0,[te.panelId]:O,[te.panelSize]:parseFloat(""+X.flexGrow).toFixed(1)})}const Qr=c.forwardRef((e,t)=>c.createElement(Jr,{...e,forwardedRef:t}));Jr.displayName="Panel";Qr.displayName="forwardRef(Panel)";let _n=null,Vt=-1,Ve=null;function Ya(e,t){if(t){const n=(t&rs)!==0,r=(t&ss)!==0,o=(t&os)!==0,a=(t&as)!==0;if(n)return o?"se-resize":a?"ne-resize":"e-resize";if(r)return o?"sw-resize":a?"nw-resize":"w-resize";if(o)return"s-resize";if(a)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function Ja(){Ve!==null&&(document.head.removeChild(Ve),_n=null,Ve=null,Vt=-1)}function gn(e,t){var n,r;const o=Ya(e,t);if(_n!==o){if(_n=o,Ve===null&&(Ve=document.createElement("style"),document.head.appendChild(Ve)),Vt>=0){var a;(a=Ve.sheet)===null||a===void 0||a.removeRule(Vt)}Vt=(n=(r=Ve.sheet)===null||r===void 0?void 0:r.insertRule(`*{cursor: ${o} !important;}`))!==null&&n!==void 0?n:-1}}function Zr(e){return e.type==="keydown"}function es(e){return e.type.startsWith("pointer")}function ts(e){return e.type.startsWith("mouse")}function rn(e){if(es(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(ts(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function Qa(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function Za(e,t,n){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function ei(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:Cr(e),b:Cr(t)};let r;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),r=e;q(r,"Stacking order can only be calculated for elements with a common ancestor");const o={a:Sr(yr(n.a)),b:Sr(yr(n.b))};if(o.a===o.b){const a=r.childNodes,i={a:n.a.at(-1),b:n.b.at(-1)};let l=a.length;for(;l--;){const u=a[l];if(u===i.a)return 1;if(u===i.b)return-1}}return Math.sign(o.a-o.b)}const ti=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function ni(e){var t;const n=getComputedStyle((t=ns(e))!==null&&t!==void 0?t:e).display;return n==="flex"||n==="inline-flex"}function ri(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||ni(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||ti.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function yr(e){let t=e.length;for(;t--;){const n=e[t];if(q(n,"Missing node"),ri(n))return n}return null}function Sr(e){return e&&Number(getComputedStyle(e).zIndex)||0}function Cr(e){const t=[];for(;e;)t.push(e),e=ns(e);return t}function ns(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const rs=1,ss=2,os=4,as=8,si=Qa()==="coarse";let Re=[],xt=!1,We=new Map,sn=new Map;const Pt=new Set;function oi(e,t,n,r,o){var a;const{ownerDocument:i}=t,l={direction:n,element:t,hitAreaMargins:r,setResizeHandlerState:o},u=(a=We.get(i))!==null&&a!==void 0?a:0;return We.set(i,u+1),Pt.add(l),Kt(),function(){var h;sn.delete(e),Pt.delete(l);const d=(h=We.get(i))!==null&&h!==void 0?h:1;if(We.set(i,d-1),Kt(),d===1&&We.delete(i),Re.includes(l)){const p=Re.indexOf(l);p>=0&&Re.splice(p,1),Yn(),o("up",!0,null)}}}function ai(e){const{target:t}=e,{x:n,y:r}=rn(e);xt=!0,Xn({target:t,x:n,y:r}),Kt(),Re.length>0&&(Xt("down",e),e.preventDefault(),is(t)||e.stopImmediatePropagation())}function xn(e){const{x:t,y:n}=rn(e);if(xt&&e.buttons===0&&(xt=!1,Xt("up",e)),!xt){const{target:r}=e;Xn({target:r,x:t,y:n})}Xt("move",e),Yn(),Re.length>0&&e.preventDefault()}function vn(e){const{target:t}=e,{x:n,y:r}=rn(e);sn.clear(),xt=!1,Re.length>0&&(e.preventDefault(),is(t)||e.stopImmediatePropagation()),Xt("up",e),Xn({target:t,x:n,y:r}),Yn(),Kt()}function is(e){let t=e;for(;t;){if(t.hasAttribute(te.resizeHandle))return!0;t=t.parentElement}return!1}function Xn({target:e,x:t,y:n}){Re.splice(0);let r=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(r=e),Pt.forEach(o=>{const{element:a,hitAreaMargins:i}=o,l=a.getBoundingClientRect(),{bottom:u,left:f,right:h,top:d}=l,p=si?i.coarse:i.fine;if(t>=f-p&&t<=h+p&&n>=d-p&&n<=u+p){if(r!==null&&document.contains(r)&&a!==r&&!a.contains(r)&&!r.contains(a)&&ei(r,a)>0){let x=r,g=!1;for(;x&&!x.contains(a);){if(Za(x.getBoundingClientRect(),l)){g=!0;break}x=x.parentElement}if(g)return}Re.push(o)}})}function bn(e,t){sn.set(e,t)}function Yn(){let e=!1,t=!1;Re.forEach(r=>{const{direction:o}=r;o==="horizontal"?e=!0:t=!0});let n=0;sn.forEach(r=>{n|=r}),e&&t?gn("intersection",n):e?gn("horizontal",n):t?gn("vertical",n):Ja()}let wn;function Kt(){var e;(e=wn)===null||e===void 0||e.abort(),wn=new AbortController;const t={capture:!0,signal:wn.signal};Pt.size&&(xt?(Re.length>0&&We.forEach((n,r)=>{const{body:o}=r;n>0&&(o.addEventListener("contextmenu",vn,t),o.addEventListener("pointerleave",xn,t),o.addEventListener("pointermove",xn,t))}),We.forEach((n,r)=>{const{body:o}=r;o.addEventListener("pointerup",vn,t),o.addEventListener("pointercancel",vn,t)})):We.forEach((n,r)=>{const{body:o}=r;n>0&&(o.addEventListener("pointerdown",ai,t),o.addEventListener("pointermove",xn,t))}))}function Xt(e,t){Pt.forEach(n=>{const{setResizeHandlerState:r}=n,o=Re.includes(n);r(e,o,t)})}function ii(){const[e,t]=c.useState(0);return c.useCallback(()=>t(n=>n+1),[])}function q(e,t){if(!e)throw console.error(t),Error(t)}function tt(e,t,n=Un){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function Me(e,t,n=Un){return tt(e,t,n)===0}function me(e,t,n){return tt(e,t,n)===0}function li(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){const o=e[r],a=t[r];if(!me(o,a,n))return!1}return!0}function mt({panelConstraints:e,panelIndex:t,size:n}){const r=e[t];q(r!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:o=0,collapsible:a,maxSize:i=100,minSize:l=0}=r;if(tt(n,l)<0)if(a){const u=(o+l)/2;tt(n,u)<0?n=o:n=l}else n=l;return n=Math.min(i,n),n=parseFloat(n.toFixed(Un)),n}function _t({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:r,prevLayout:o,trigger:a}){if(me(e,0))return t;const i=[...t],[l,u]=r;q(l!=null,"Invalid first pivot index"),q(u!=null,"Invalid second pivot index");let f=0;if(a==="keyboard"){{const d=e<0?u:l,p=n[d];q(p,`Panel constraints not found for index ${d}`);const{collapsedSize:m=0,collapsible:x,minSize:g=0}=p;if(x){const y=t[d];if(q(y!=null,`Previous layout not found for panel index ${d}`),me(y,m)){const v=g-y;tt(v,Math.abs(e))>0&&(e=e<0?0-v:v)}}}{const d=e<0?l:u,p=n[d];q(p,`No panel constraints found for index ${d}`);const{collapsedSize:m=0,collapsible:x,minSize:g=0}=p;if(x){const y=t[d];if(q(y!=null,`Previous layout not found for panel index ${d}`),me(y,g)){const v=y-m;tt(v,Math.abs(e))>0&&(e=e<0?0-v:v)}}}}{const d=e<0?1:-1;let p=e<0?u:l,m=0;for(;;){const g=t[p];q(g!=null,`Previous layout not found for panel index ${p}`);const v=mt({panelConstraints:n,panelIndex:p,size:100})-g;if(m+=v,p+=d,p<0||p>=n.length)break}const x=Math.min(Math.abs(e),Math.abs(m));e=e<0?0-x:x}{let p=e<0?l:u;for(;p>=0&&p<n.length;){const m=Math.abs(e)-Math.abs(f),x=t[p];q(x!=null,`Previous layout not found for panel index ${p}`);const g=x-m,y=mt({panelConstraints:n,panelIndex:p,size:g});if(!me(x,y)&&(f+=x-y,i[p]=y,f.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?p--:p++}}if(li(o,i))return o;{const d=e<0?u:l,p=t[d];q(p!=null,`Previous layout not found for panel index ${d}`);const m=p+f,x=mt({panelConstraints:n,panelIndex:d,size:m});if(i[d]=x,!me(x,m)){let g=m-x,v=e<0?u:l;for(;v>=0&&v<n.length;){const b=i[v];q(b!=null,`Previous layout not found for panel index ${v}`);const N=b+g,E=mt({panelConstraints:n,panelIndex:v,size:N});if(me(b,E)||(g-=E-b,i[v]=E),me(g,0))break;e>0?v--:v++}}}const h=i.reduce((d,p)=>p+d,0);return me(h,100)?i:o}function ci({layout:e,panelsArray:t,pivotIndices:n}){let r=0,o=100,a=0,i=0;const l=n[0];q(l!=null,"No pivot index found"),t.forEach((d,p)=>{const{constraints:m}=d,{maxSize:x=100,minSize:g=0}=m;p===l?(r=g,o=x):(a+=g,i+=x)});const u=Math.min(o,100-a),f=Math.max(r,100-i),h=e[l];return{valueMax:u,valueMin:f,valueNow:h}}function Mt(e,t=document){return Array.from(t.querySelectorAll(`[${te.resizeHandleId}][data-panel-group-id="${e}"]`))}function ls(e,t,n=document){const o=Mt(e,n).findIndex(a=>a.getAttribute(te.resizeHandleId)===t);return o??null}function cs(e,t,n){const r=ls(e,t,n);return r!=null?[r,r+1]:[-1,-1]}function ui(e){return e instanceof HTMLElement?!0:typeof e=="object"&&e!==null&&"tagName"in e&&"getAttribute"in e}function us(e,t=document){if(ui(t)&&t.dataset.panelGroupId==e)return t;const n=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return n||null}function on(e,t=document){const n=t.querySelector(`[${te.resizeHandleId}="${e}"]`);return n||null}function di(e,t,n,r=document){var o,a,i,l;const u=on(t,r),f=Mt(e,r),h=u?f.indexOf(u):-1,d=(o=(a=n[h])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null,p=(i=(l=n[h+1])===null||l===void 0?void 0:l.id)!==null&&i!==void 0?i:null;return[d,p]}function fi({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:r,panelDataArray:o,panelGroupElement:a,setLayout:i}){c.useRef({didWarnAboutMissingResizeHandle:!1}),et(()=>{if(!a)return;const l=Mt(n,a);for(let u=0;u<o.length-1;u++){const{valueMax:f,valueMin:h,valueNow:d}=ci({layout:r,panelsArray:o,pivotIndices:[u,u+1]}),p=l[u];if(p!=null){const m=o[u];q(m,`No panel data found for index "${u}"`),p.setAttribute("aria-controls",m.id),p.setAttribute("aria-valuemax",""+Math.round(f)),p.setAttribute("aria-valuemin",""+Math.round(h)),p.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{l.forEach((u,f)=>{u.removeAttribute("aria-controls"),u.removeAttribute("aria-valuemax"),u.removeAttribute("aria-valuemin"),u.removeAttribute("aria-valuenow")})}},[n,r,o,a]),c.useEffect(()=>{if(!a)return;const l=t.current;q(l,"Eager values not found");const{panelDataArray:u}=l,f=us(n,a);q(f!=null,`No group found for id "${n}"`);const h=Mt(n,a);q(h,`No resize handles found for group id "${n}"`);const d=h.map(p=>{const m=p.getAttribute(te.resizeHandleId);q(m,"Resize handle element has no handle id attribute");const[x,g]=di(n,m,u,a);if(x==null||g==null)return()=>{};const y=v=>{if(!v.defaultPrevented)switch(v.key){case"Enter":{v.preventDefault();const b=u.findIndex(N=>N.id===x);if(b>=0){const N=u[b];q(N,`No panel data found for index ${b}`);const E=r[b],{collapsedSize:k=0,collapsible:D,minSize:j=0}=N.constraints;if(E!=null&&D){const z=_t({delta:me(E,k)?j-k:k-E,initialLayout:r,panelConstraints:u.map(B=>B.constraints),pivotIndices:cs(n,m,a),prevLayout:r,trigger:"keyboard"});r!==z&&i(z)}}break}}};return p.addEventListener("keydown",y),()=>{p.removeEventListener("keydown",y)}});return()=>{d.forEach(p=>p())}},[a,e,t,n,r,o,i])}function Er(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ds(e,t){const n=e==="horizontal",{x:r,y:o}=rn(t);return n?r:o}function hi(e,t,n,r,o){const a=n==="horizontal",i=on(t,o);q(i,`No resize handle element found for id "${t}"`);const l=i.getAttribute(te.groupId);q(l,"Resize handle element has no group id attribute");let{initialCursorPosition:u}=r;const f=ds(n,e),h=us(l,o);q(h,`No group element found for id "${l}"`);const d=h.getBoundingClientRect(),p=a?d.width:d.height;return(f-u)/p*100}function pi(e,t,n,r,o,a){if(Zr(e)){const i=n==="horizontal";let l=0;e.shiftKey?l=100:o!=null?l=o:l=10;let u=0;switch(e.key){case"ArrowDown":u=i?0:l;break;case"ArrowLeft":u=i?-l:0;break;case"ArrowRight":u=i?l:0;break;case"ArrowUp":u=i?0:-l;break;case"End":u=100;break;case"Home":u=-100;break}return u}else return r==null?0:hi(e,t,n,r,a)}function mi({panelDataArray:e}){const t=Array(e.length),n=e.map(a=>a.constraints);let r=0,o=100;for(let a=0;a<e.length;a++){const i=n[a];q(i,`Panel constraints not found for index ${a}`);const{defaultSize:l}=i;l!=null&&(r++,t[a]=l,o-=l)}for(let a=0;a<e.length;a++){const i=n[a];q(i,`Panel constraints not found for index ${a}`);const{defaultSize:l}=i;if(l!=null)continue;const u=e.length-r,f=o/u;r++,t[a]=f,o-=f}return t}function lt(e,t,n){t.forEach((r,o)=>{const a=e[o];q(a,`Panel data not found for index ${o}`);const{callbacks:i,constraints:l,id:u}=a,{collapsedSize:f=0,collapsible:h}=l,d=n[u];if(d==null||r!==d){n[u]=r;const{onCollapse:p,onExpand:m,onResize:x}=i;x&&x(r,d),h&&(p||m)&&(m&&(d==null||Me(d,f))&&!Me(r,f)&&m(),p&&(d==null||!Me(d,f))&&Me(r,f)&&p())}})}function Bt(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function gi({defaultSize:e,dragState:t,layout:n,panelData:r,panelIndex:o,precision:a=3}){const i=n[o];let l;return i==null?l=e!=null?e.toPrecision(a):"1":r.length===1?l="1":l=i.toPrecision(a),{flexBasis:0,flexGrow:l,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function xi(e,t=10){let n=null;return(...o)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{e(...o)},t)}}function Nr(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,n)=>{localStorage.setItem(t,n)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function fs(e){return`react-resizable-panels:${e}`}function hs(e){return e.map(t=>{const{constraints:n,id:r,idIsFromProps:o,order:a}=t;return o?r:a?`${a}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((t,n)=>t.localeCompare(n)).join(",")}function ps(e,t){try{const n=fs(e),r=t.getItem(n);if(r){const o=JSON.parse(r);if(typeof o=="object"&&o!=null)return o}}catch{}return null}function vi(e,t,n){var r,o;const a=(r=ps(e,n))!==null&&r!==void 0?r:{},i=hs(t);return(o=a[i])!==null&&o!==void 0?o:null}function bi(e,t,n,r,o){var a;const i=fs(e),l=hs(t),u=(a=ps(e,o))!==null&&a!==void 0?a:{};u[l]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{o.setItem(i,JSON.stringify(u))}catch(f){console.error(f)}}function jr({layout:e,panelConstraints:t}){const n=[...e],r=n.reduce((a,i)=>a+i,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(a=>`${a}%`).join(", ")}`);if(!me(r,100)&&n.length>0)for(let a=0;a<t.length;a++){const i=n[a];q(i!=null,`No layout data found for index ${a}`);const l=100/r*i;n[a]=l}let o=0;for(let a=0;a<t.length;a++){const i=n[a];q(i!=null,`No layout data found for index ${a}`);const l=mt({panelConstraints:t,panelIndex:a,size:i});i!=l&&(o+=i-l,n[a]=l)}if(!me(o,0))for(let a=0;a<t.length;a++){const i=n[a];q(i!=null,`No layout data found for index ${a}`);const l=i+o,u=mt({panelConstraints:t,panelIndex:a,size:l});if(i!==u&&(o-=u-i,n[a]=u,me(o,0)))break}return n}const wi=100,kt={getItem:e=>(Nr(kt),kt.getItem(e)),setItem:(e,t)=>{Nr(kt),kt.setItem(e,t)}},Rr={};function ms({autoSaveId:e=null,children:t,className:n="",direction:r,forwardedRef:o,id:a=null,onLayout:i=null,keyboardResizeBy:l=null,storage:u=kt,style:f,tagName:h="div",...d}){const p=Kn(a),m=c.useRef(null),[x,g]=c.useState(null),[y,v]=c.useState([]),b=ii(),N=c.useRef({}),E=c.useRef(new Map),k=c.useRef(0),D=c.useRef({autoSaveId:e,direction:r,dragState:x,id:p,keyboardResizeBy:l,onLayout:i,storage:u}),j=c.useRef({layout:y,panelDataArray:[],panelDataArrayChanged:!1});c.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),c.useImperativeHandle(o,()=>({getId:()=>D.current.id,getLayout:()=>{const{layout:S}=j.current;return S},setLayout:S=>{const{onLayout:I}=D.current,{layout:P,panelDataArray:A}=j.current,M=jr({layout:S,panelConstraints:A.map(F=>F.constraints)});Er(P,M)||(v(M),j.current.layout=M,I&&I(M),lt(A,M,N.current))}}),[]),et(()=>{D.current.autoSaveId=e,D.current.direction=r,D.current.dragState=x,D.current.id=p,D.current.onLayout=i,D.current.storage=u}),fi({committedValuesRef:D,eagerValuesRef:j,groupId:p,layout:y,panelDataArray:j.current.panelDataArray,setLayout:v,panelGroupElement:m.current}),c.useEffect(()=>{const{panelDataArray:S}=j.current;if(e){if(y.length===0||y.length!==S.length)return;let I=Rr[e];I==null&&(I=xi(bi,wi),Rr[e]=I);const P=[...S],A=new Map(E.current);I(e,P,A,y,u)}},[e,y,u]),c.useEffect(()=>{});const z=c.useCallback(S=>{const{onLayout:I}=D.current,{layout:P,panelDataArray:A}=j.current;if(S.constraints.collapsible){const M=A.map(le=>le.constraints),{collapsedSize:F=0,panelSize:V,pivotIndices:K}=Je(A,S,P);if(q(V!=null,`Panel size not found for panel "${S.id}"`),!Me(V,F)){E.current.set(S.id,V);const ee=ut(A,S)===A.length-1?V-F:F-V,Y=_t({delta:ee,initialLayout:P,panelConstraints:M,pivotIndices:K,prevLayout:P,trigger:"imperative-api"});Bt(P,Y)||(v(Y),j.current.layout=Y,I&&I(Y),lt(A,Y,N.current))}}},[]),B=c.useCallback((S,I)=>{const{onLayout:P}=D.current,{layout:A,panelDataArray:M}=j.current;if(S.constraints.collapsible){const F=M.map(Z=>Z.constraints),{collapsedSize:V=0,panelSize:K=0,minSize:le=0,pivotIndices:ee}=Je(M,S,A),Y=I??le;if(Me(K,V)){const Z=E.current.get(S.id),ce=Z!=null&&Z>=Y?Z:Y,nt=ut(M,S)===M.length-1?K-ce:ce-K,oe=_t({delta:nt,initialLayout:A,panelConstraints:F,pivotIndices:ee,prevLayout:A,trigger:"imperative-api"});Bt(A,oe)||(v(oe),j.current.layout=oe,P&&P(oe),lt(M,oe,N.current))}}},[]),G=c.useCallback(S=>{const{layout:I,panelDataArray:P}=j.current,{panelSize:A}=Je(P,S,I);return q(A!=null,`Panel size not found for panel "${S.id}"`),A},[]),O=c.useCallback((S,I)=>{const{panelDataArray:P}=j.current,A=ut(P,S);return gi({defaultSize:I,dragState:x,layout:y,panelData:P,panelIndex:A})},[x,y]),L=c.useCallback(S=>{const{layout:I,panelDataArray:P}=j.current,{collapsedSize:A=0,collapsible:M,panelSize:F}=Je(P,S,I);return q(F!=null,`Panel size not found for panel "${S.id}"`),M===!0&&Me(F,A)},[]),X=c.useCallback(S=>{const{layout:I,panelDataArray:P}=j.current,{collapsedSize:A=0,collapsible:M,panelSize:F}=Je(P,S,I);return q(F!=null,`Panel size not found for panel "${S.id}"`),!M||tt(F,A)>0},[]),U=c.useCallback(S=>{const{panelDataArray:I}=j.current;I.push(S),I.sort((P,A)=>{const M=P.order,F=A.order;return M==null&&F==null?0:M==null?-1:F==null?1:M-F}),j.current.panelDataArrayChanged=!0,b()},[b]);et(()=>{if(j.current.panelDataArrayChanged){j.current.panelDataArrayChanged=!1;const{autoSaveId:S,onLayout:I,storage:P}=D.current,{layout:A,panelDataArray:M}=j.current;let F=null;if(S){const K=vi(S,M,P);K&&(E.current=new Map(Object.entries(K.expandToSizes)),F=K.layout)}F==null&&(F=mi({panelDataArray:M}));const V=jr({layout:F,panelConstraints:M.map(K=>K.constraints)});Er(A,V)||(v(V),j.current.layout=V,I&&I(V),lt(M,V,N.current))}}),et(()=>{const S=j.current;return()=>{S.layout=[]}},[]);const J=c.useCallback(S=>{let I=!1;const P=m.current;return P&&window.getComputedStyle(P,null).getPropertyValue("direction")==="rtl"&&(I=!0),function(M){M.preventDefault();const F=m.current;if(!F)return()=>null;const{direction:V,dragState:K,id:le,keyboardResizeBy:ee,onLayout:Y}=D.current,{layout:Z,panelDataArray:ce}=j.current,{initialLayout:Ee}=K??{},nt=cs(le,S,F);let oe=pi(M,S,V,K,ee,F);const rt=V==="horizontal";rt&&I&&(oe=-oe);const _e=ce.map(Gt=>Gt.constraints),ke=_t({delta:oe,initialLayout:Ee??Z,panelConstraints:_e,pivotIndices:nt,prevLayout:Z,trigger:Zr(M)?"keyboard":"mouse-or-touch"}),Ye=!Bt(Z,ke);(es(M)||ts(M))&&k.current!=oe&&(k.current=oe,!Ye&&oe!==0?rt?bn(S,oe<0?rs:ss):bn(S,oe<0?os:as):bn(S,0)),Ye&&(v(ke),j.current.layout=ke,Y&&Y(ke),lt(ce,ke,N.current))}},[]),C=c.useCallback((S,I)=>{const{onLayout:P}=D.current,{layout:A,panelDataArray:M}=j.current,F=M.map(Z=>Z.constraints),{panelSize:V,pivotIndices:K}=Je(M,S,A);q(V!=null,`Panel size not found for panel "${S.id}"`);const ee=ut(M,S)===M.length-1?V-I:I-V,Y=_t({delta:ee,initialLayout:A,panelConstraints:F,pivotIndices:K,prevLayout:A,trigger:"imperative-api"});Bt(A,Y)||(v(Y),j.current.layout=Y,P&&P(Y),lt(M,Y,N.current))},[]),w=c.useCallback((S,I)=>{const{layout:P,panelDataArray:A}=j.current,{collapsedSize:M=0,collapsible:F}=I,{collapsedSize:V=0,collapsible:K,maxSize:le=100,minSize:ee=0}=S.constraints,{panelSize:Y}=Je(A,S,P);Y!=null&&(F&&K&&Me(Y,M)?Me(M,V)||C(S,V):Y<ee?C(S,ee):Y>le&&C(S,le))},[C]),R=c.useCallback((S,I)=>{const{direction:P}=D.current,{layout:A}=j.current;if(!m.current)return;const M=on(S,m.current);q(M,`Drag handle element not found for id "${S}"`);const F=ds(P,I);g({dragHandleId:S,dragHandleRect:M.getBoundingClientRect(),initialCursorPosition:F,initialLayout:A})},[]),_=c.useCallback(()=>{g(null)},[]),T=c.useCallback(S=>{const{panelDataArray:I}=j.current,P=ut(I,S);P>=0&&(I.splice(P,1),delete N.current[S.id],j.current.panelDataArrayChanged=!0,b())},[b]),$=c.useMemo(()=>({collapsePanel:z,direction:r,dragState:x,expandPanel:B,getPanelSize:G,getPanelStyle:O,groupId:p,isPanelCollapsed:L,isPanelExpanded:X,reevaluatePanelConstraints:w,registerPanel:U,registerResizeHandle:J,resizePanel:C,startDragging:R,stopDragging:_,unregisterPanel:T,panelGroupElement:m.current}),[z,x,r,B,G,O,p,L,X,w,U,J,C,R,_,T]),H={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return c.createElement(nn.Provider,{value:$},c.createElement(h,{...d,children:t,className:n,id:a,ref:m,style:{...H,...f},[te.group]:"",[te.groupDirection]:r,[te.groupId]:p}))}const gs=c.forwardRef((e,t)=>c.createElement(ms,{...e,forwardedRef:t}));ms.displayName="PanelGroup";gs.displayName="forwardRef(PanelGroup)";function ut(e,t){return e.findIndex(n=>n===t||n.id===t.id)}function Je(e,t,n){const r=ut(e,t),a=r===e.length-1?[r-1,r]:[r,r+1],i=n[r];return{...t.constraints,panelSize:i,pivotIndices:a}}function yi({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:r}){c.useEffect(()=>{if(e||n==null||r==null)return;const o=on(t,r);if(o==null)return;const a=i=>{if(!i.defaultPrevented)switch(i.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{i.preventDefault(),n(i);break}case"F6":{i.preventDefault();const l=o.getAttribute(te.groupId);q(l,`No group element found for id "${l}"`);const u=Mt(l,r),f=ls(l,t,r);q(f!==null,`No resize element found for id "${t}"`);const h=i.shiftKey?f>0?f-1:u.length-1:f+1<u.length?f+1:0;u[h].focus();break}}};return o.addEventListener("keydown",a),()=>{o.removeEventListener("keydown",a)}},[r,e,t,n])}function xs({children:e=null,className:t="",disabled:n=!1,hitAreaMargins:r,id:o,onBlur:a,onClick:i,onDragging:l,onFocus:u,onPointerDown:f,onPointerUp:h,style:d={},tabIndex:p=0,tagName:m="div",...x}){var g,y;const v=c.useRef(null),b=c.useRef({onClick:i,onDragging:l,onPointerDown:f,onPointerUp:h});c.useEffect(()=>{b.current.onClick=i,b.current.onDragging=l,b.current.onPointerDown=f,b.current.onPointerUp=h});const N=c.useContext(nn);if(N===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:E,groupId:k,registerResizeHandle:D,startDragging:j,stopDragging:z,panelGroupElement:B}=N,G=Kn(o),[O,L]=c.useState("inactive"),[X,U]=c.useState(!1),[J,C]=c.useState(null),w=c.useRef({state:O});et(()=>{w.current.state=O}),c.useEffect(()=>{if(n)C(null);else{const $=D(G);C(()=>$)}},[n,G,D]);const R=(g=r?.coarse)!==null&&g!==void 0?g:15,_=(y=r?.fine)!==null&&y!==void 0?y:5;c.useEffect(()=>{if(n||J==null)return;const $=v.current;q($,"Element ref not attached");let H=!1;return oi(G,$,E,{coarse:R,fine:_},(I,P,A)=>{if(!P){L("inactive");return}switch(I){case"down":{L("drag"),H=!1,q(A,'Expected event to be defined for "down" action'),j(G,A);const{onDragging:M,onPointerDown:F}=b.current;M?.(!0),F?.();break}case"move":{const{state:M}=w.current;H=!0,M!=="drag"&&L("hover"),q(A,'Expected event to be defined for "move" action'),J(A);break}case"up":{L("hover"),z();const{onClick:M,onDragging:F,onPointerUp:V}=b.current;F?.(!1),V?.(),H||M?.();break}}})},[R,E,n,_,D,G,J,j,z]),yi({disabled:n,handleId:G,resizeHandler:J,panelGroupElement:B});const T={touchAction:"none",userSelect:"none"};return c.createElement(m,{...x,children:e,className:t,id:o,onBlur:()=>{U(!1),a?.()},onFocus:()=>{U(!0),u?.()},ref:v,role:"separator",style:{...T,...d},tabIndex:p,[te.groupDirection]:E,[te.groupId]:k,[te.resizeHandle]:"",[te.resizeHandleActive]:O==="drag"?"pointer":X?"keyboard":void 0,[te.resizeHandleEnabled]:!n,[te.resizeHandleId]:G,[te.resizeHandleState]:O})}xs.displayName="PanelResizeHandle";const vs=({className:e,...t})=>s.jsx(gs,{className:W("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",e),...t}),kn=Qr,Si=({withHandle:e,className:t,...n})=>s.jsx(xs,{className:W("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",t),...n,children:e&&s.jsx("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:s.jsx(Ua,{className:"h-2.5 w-2.5"})})}),Jn=({leftContent:e,rightContent:t,direction:n="horizontal",defaultSizes:r=[50,50],className:o})=>s.jsxs(vs,{direction:n,className:W("w-full border rounded-none",o),children:[s.jsx(kn,{defaultSize:r[0],children:e}),s.jsx(Si,{withHandle:!0}),s.jsx(kn,{defaultSize:r[1],children:t})]});var an="Checkbox",[Ci,Ru]=$t(an),[Ei,Qn]=Ci(an);function Ni(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:o,disabled:a,form:i,name:l,onCheckedChange:u,required:f,value:h="on",internal_do_not_use_render:d}=e,[p,m]=Gn({prop:n,defaultProp:o??!1,onChange:u,caller:an}),[x,g]=c.useState(null),[y,v]=c.useState(null),b=c.useRef(!1),N=x?!!i||!!x.closest("form"):!0,E={checked:p,disabled:a,setChecked:m,control:x,setControl:g,name:l,form:i,value:h,hasConsumerStoppedPropagationRef:b,required:f,defaultChecked:Ue(o)?!1:o,isFormControl:N,bubbleInput:y,setBubbleInput:v};return s.jsx(Ei,{scope:t,...E,children:ji(d)?d(E):r})}var bs="CheckboxTrigger",ws=c.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},o)=>{const{control:a,value:i,disabled:l,checked:u,required:f,setControl:h,setChecked:d,hasConsumerStoppedPropagationRef:p,isFormControl:m,bubbleInput:x}=Qn(bs,e),g=ge(o,h),y=c.useRef(u);return c.useEffect(()=>{const v=a?.form;if(v){const b=()=>d(y.current);return v.addEventListener("reset",b),()=>v.removeEventListener("reset",b)}},[a,d]),s.jsx(Ce.button,{type:"button",role:"checkbox","aria-checked":Ue(u)?"mixed":u,"aria-required":f,"data-state":Ns(u),"data-disabled":l?"":void 0,disabled:l,value:i,...r,ref:g,onKeyDown:wt(t,v=>{v.key==="Enter"&&v.preventDefault()}),onClick:wt(n,v=>{d(b=>Ue(b)?!0:!b),x&&m&&(p.current=v.isPropagationStopped(),p.current||v.stopPropagation())})})});ws.displayName=bs;var Zn=c.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:o,defaultChecked:a,required:i,disabled:l,value:u,onCheckedChange:f,form:h,...d}=e;return s.jsx(Ni,{__scopeCheckbox:n,checked:o,defaultChecked:a,disabled:l,required:i,onCheckedChange:f,name:r,form:h,value:u,internal_do_not_use_render:({isFormControl:p})=>s.jsxs(s.Fragment,{children:[s.jsx(ws,{...d,ref:t,__scopeCheckbox:n}),p&&s.jsx(Es,{__scopeCheckbox:n})]})})});Zn.displayName=an;var ys="CheckboxIndicator",Ss=c.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...o}=e,a=Qn(ys,n);return s.jsx(Br,{present:r||Ue(a.checked)||a.checked===!0,children:s.jsx(Ce.span,{"data-state":Ns(a.checked),"data-disabled":a.disabled?"":void 0,...o,ref:t,style:{pointerEvents:"none",...e.style}})})});Ss.displayName=ys;var Cs="CheckboxBubbleInput",Es=c.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:o,checked:a,defaultChecked:i,required:l,disabled:u,name:f,value:h,form:d,bubbleInput:p,setBubbleInput:m}=Qn(Cs,e),x=ge(n,m),g=Bn(a),y=Vn(r);c.useEffect(()=>{const b=p;if(!b)return;const N=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(N,"checked").set,D=!o.current;if(g!==a&&k){const j=new Event("click",{bubbles:D});b.indeterminate=Ue(a),k.call(b,Ue(a)?!1:a),b.dispatchEvent(j)}},[p,g,a,o]);const v=c.useRef(Ue(a)?!1:a);return s.jsx(Ce.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??v.current,required:l,disabled:u,name:f,value:h,form:d,...t,tabIndex:-1,ref:x,style:{...t.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Es.displayName=Cs;function ji(e){return typeof e=="function"}function Ue(e){return e==="indeterminate"}function Ns(e){return Ue(e)?"indeterminate":e?"checked":"unchecked"}const js=c.forwardRef(({className:e,...t},n)=>s.jsx(Zn,{ref:n,className:W("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(Ss,{className:W("flex items-center justify-center text-current"),children:s.jsx(ja,{className:"h-4 w-4"})})}));js.displayName=Zn.displayName;const Ri=({control:e,name:t,label:n,options:r,orientation:o="vertical",className:a="",maxSelections:i,onValueChange:l})=>{const{setValue:u}=Ra(),f=Wr({control:e,name:t});return c.useEffect(()=>{if(i&&f&&f.length>i){const h=f.slice(0,i);u(t,h),l&&l(h)}},[f,i,t,u,l]),s.jsx(Ne,{control:e,name:t,render:({field:h})=>s.jsxs(Se,{className:`space-y-2 ${o==="horizontal"?"space-x-4":""} ${a}`,children:[n&&s.jsx("div",{className:"font-medium",children:n}),r.map(d=>{const p=d.id||`${t}_${d.value}`;return s.jsxs(Se,{className:"flex flex-row items-start space-x-3 space-y-0",children:[s.jsx(je,{children:s.jsx(js,{id:p,checked:h.value?.includes(d.value)||!1,onCheckedChange:m=>{const x=h.value||[];if(m&&i&&x.length>=i)return;const g=m?[...x,d.value]:x.filter(y=>y!==d.value);h.onChange(g),l&&l(g)}})}),s.jsxs("div",{className:"space-y-1 leading-none",children:[s.jsx("span",{children:d.label})," ",d.helperText&&s.jsx(Oe,{children:d.helperText})]})]},d.value)})]})})};var ue=(e=>(e.TRUE_FALSE_NOT_GIVEN="true_false_not_given",e.YES_NO_NOT_GIVEN="yes_no_not_given",e.MULTIPLE_CHOICE="multiple_choice_multiple_answers",e.MATCHING_HEADINGS="matching_headings",e.MATCHING_INFORMATION="matching_information",e.MATCHING_FEATURES="matching_features",e.MATCHING_SENTENCE_ENDINGS="matching_sentence_endings",e.SENTENCE_COMPLETION="sentence_completion",e.SUMMARY_COMPLETION="summary_completion",e.DIAGRAM_LABEL="diagram_label",e.SHORT_ANSWER="short_answer",e.LIST_SELECTION="list_selection",e))(ue||{});const ln=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function yt(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function er(e){return"nodeType"in e}function de(e){var t,n;return e?yt(e)?e:er(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function tr(e){const{Document:t}=de(e);return e instanceof t}function Ft(e){return yt(e)?!1:e instanceof de(e).HTMLElement}function Rs(e){return e instanceof de(e).SVGElement}function St(e){return e?yt(e)?e.document:er(e)?tr(e)?e:Ft(e)||Rs(e)?e.ownerDocument:document:document:document}const Xe=ln?c.useLayoutEffect:c.useEffect;function nr(e){const t=c.useRef(e);return Xe(()=>{t.current=e}),c.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function Di(){const e=c.useRef(null),t=c.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),n=c.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Lt(e,t){t===void 0&&(t=[e]);const n=c.useRef(e);return Xe(()=>{n.current!==e&&(n.current=e)},t),n}function Ht(e,t){const n=c.useRef();return c.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Yt(e){const t=nr(e),n=c.useRef(null),r=c.useCallback(o=>{o!==n.current&&t?.(o,n.current),n.current=o},[]);return[n,r]}function In(e){const t=c.useRef();return c.useEffect(()=>{t.current=e},[e]),t.current}let yn={};function cn(e,t){return c.useMemo(()=>{if(t)return t;const n=yn[e]==null?0:yn[e]+1;return yn[e]=n,e+"-"+n},[e,t])}function Ds(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((a,i)=>{const l=Object.entries(i);for(const[u,f]of l){const h=a[u];h!=null&&(a[u]=h+e*f)}return a},{...t})}}const vt=Ds(1),Jt=Ds(-1);function _i(e){return"clientX"in e&&"clientY"in e}function _s(e){if(!e)return!1;const{KeyboardEvent:t}=de(e.target);return t&&e instanceof t}function ki(e){if(!e)return!1;const{TouchEvent:t}=de(e.target);return t&&e instanceof t}function An(e){if(ki(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return _i(e)?{x:e.clientX,y:e.clientY}:null}const Dr="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Ii(e){return e.matches(Dr)?e:e.querySelector(Dr)}const Ai={display:"none"};function zi(e){let{id:t,value:n}=e;return ye.createElement("div",{id:t,style:Ai},n)}function Ti(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ye.createElement("div",{id:t,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function Pi(){const[e,t]=c.useState("");return{announce:c.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const ks=c.createContext(null);function Mi(e){const t=c.useContext(ks);c.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Li(){const[e]=c.useState(()=>new Set),t=c.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[c.useCallback(r=>{let{type:o,event:a}=r;e.forEach(i=>{var l;return(l=i[o])==null?void 0:l.call(i,a)})},[e]),t]}const Oi={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},$i={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Fi(e){let{announcements:t=$i,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=Oi}=e;const{announce:a,announcement:i}=Pi(),l=cn("DndLiveRegion"),[u,f]=c.useState(!1);if(c.useEffect(()=>{f(!0)},[]),Mi(c.useMemo(()=>({onDragStart(d){let{active:p}=d;a(t.onDragStart({active:p}))},onDragMove(d){let{active:p,over:m}=d;t.onDragMove&&a(t.onDragMove({active:p,over:m}))},onDragOver(d){let{active:p,over:m}=d;a(t.onDragOver({active:p,over:m}))},onDragEnd(d){let{active:p,over:m}=d;a(t.onDragEnd({active:p,over:m}))},onDragCancel(d){let{active:p,over:m}=d;a(t.onDragCancel({active:p,over:m}))}}),[a,t])),!u)return null;const h=ye.createElement(ye.Fragment,null,ye.createElement(zi,{id:r,value:o.draggable}),ye.createElement(Ti,{id:l,announcement:i}));return n?Dt.createPortal(h,n):h}var re;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(re||(re={}));function Qt(){}const De=Object.freeze({x:0,y:0});function Hi(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function qi(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Gi(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),i=o-r,l=a-n;if(r<o&&n<a){const u=t.width*t.height,f=e.width*e.height,h=i*l,d=h/(u+f-h);return Number(d.toFixed(4))}return 0}const Bi=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const a of r){const{id:i}=a,l=n.get(i);if(l){const u=Gi(l,t);u>0&&o.push({id:i,data:{droppableContainer:a,value:u}})}}return o.sort(Hi)};function Vi(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Is(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:De}function Wi(e){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return o.reduce((i,l)=>({...i,top:i.top+e*l.y,bottom:i.bottom+e*l.y,left:i.left+e*l.x,right:i.right+e*l.x}),{...n})}}const Ui=Wi(1);function Ki(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Xi(e,t,n){const r=Ki(t);if(!r)return e;const{scaleX:o,scaleY:a,x:i,y:l}=r,u=e.left-i-(1-o)*parseFloat(n),f=e.top-l-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),h=o?e.width/o:e.width,d=a?e.height/a:e.height;return{width:h,height:d,top:f,right:u+h,bottom:f+d,left:u}}const Yi={ignoreTransform:!1};function qt(e,t){t===void 0&&(t=Yi);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:f,transformOrigin:h}=de(e).getComputedStyle(e);f&&(n=Xi(n,f,h))}const{top:r,left:o,width:a,height:i,bottom:l,right:u}=n;return{top:r,left:o,width:a,height:i,bottom:l,right:u}}function _r(e){return qt(e,{ignoreTransform:!0})}function Ji(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Qi(e,t){return t===void 0&&(t=de(e).getComputedStyle(e)),t.position==="fixed"}function Zi(e,t){t===void 0&&(t=de(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const a=t[o];return typeof a=="string"?n.test(a):!1})}function rr(e,t){const n=[];function r(o){if(t!=null&&n.length>=t||!o)return n;if(tr(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!Ft(o)||Rs(o)||n.includes(o))return n;const a=de(e).getComputedStyle(o);return o!==e&&Zi(o,a)&&n.push(o),Qi(o,a)?n:r(o.parentNode)}return e?r(e):n}function As(e){const[t]=rr(e,1);return t??null}function Sn(e){return!ln||!e?null:yt(e)?e:er(e)?tr(e)||e===St(e).scrollingElement?window:Ft(e)?e:null:null}function zs(e){return yt(e)?e.scrollX:e.scrollLeft}function Ts(e){return yt(e)?e.scrollY:e.scrollTop}function zn(e){return{x:zs(e),y:Ts(e)}}var se;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(se||(se={}));function Ps(e){return!ln||!e?!1:e===document.scrollingElement}function Ms(e){const t={x:0,y:0},n=Ps(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,i=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:o,isLeft:a,isBottom:i,isRight:l,maxScroll:r,minScroll:t}}const el={x:.2,y:.2};function tl(e,t,n,r,o){let{top:a,left:i,right:l,bottom:u}=n;r===void 0&&(r=10),o===void 0&&(o=el);const{isTop:f,isBottom:h,isLeft:d,isRight:p}=Ms(e),m={x:0,y:0},x={x:0,y:0},g={height:t.height*o.y,width:t.width*o.x};return!f&&a<=t.top+g.height?(m.y=se.Backward,x.y=r*Math.abs((t.top+g.height-a)/g.height)):!h&&u>=t.bottom-g.height&&(m.y=se.Forward,x.y=r*Math.abs((t.bottom-g.height-u)/g.height)),!p&&l>=t.right-g.width?(m.x=se.Forward,x.x=r*Math.abs((t.right-g.width-l)/g.width)):!d&&i<=t.left+g.width&&(m.x=se.Backward,x.x=r*Math.abs((t.left+g.width-i)/g.width)),{direction:m,speed:x}}function nl(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:i}=window;return{top:0,left:0,right:a,bottom:i,width:a,height:i}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function Ls(e){return e.reduce((t,n)=>vt(t,zn(n)),De)}function rl(e){return e.reduce((t,n)=>t+zs(n),0)}function sl(e){return e.reduce((t,n)=>t+Ts(n),0)}function ol(e,t){if(t===void 0&&(t=qt),!e)return;const{top:n,left:r,bottom:o,right:a}=t(e);As(e)&&(o<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const al=[["x",["left","right"],rl],["y",["top","bottom"],sl]];class sr{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=rr(n),o=Ls(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,i,l]of al)for(const u of i)Object.defineProperty(this,u,{get:()=>{const f=l(r),h=o[a]-f;return this.rect[u]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class It{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var o;(o=this.target)==null||o.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function il(e){const{EventTarget:t}=de(e);return e instanceof t?e:St(e)}function Cn(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var we;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(we||(we={}));function kr(e){e.preventDefault()}function ll(e){e.stopPropagation()}var Q;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Q||(Q={}));const Os={start:[Q.Space,Q.Enter],cancel:[Q.Esc],end:[Q.Space,Q.Enter,Q.Tab]},cl=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Q.Right:return{...n,x:n.x+25};case Q.Left:return{...n,x:n.x-25};case Q.Down:return{...n,y:n.y+25};case Q.Up:return{...n,y:n.y-25}}};class $s{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new It(St(n)),this.windowListeners=new It(de(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(we.Resize,this.handleCancel),this.windowListeners.add(we.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(we.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&ol(r),n(De)}handleKeyDown(t){if(_s(t)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:a=Os,coordinateGetter:i=cl,scrollBehavior:l="smooth"}=o,{code:u}=t;if(a.end.includes(u)){this.handleEnd(t);return}if(a.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:f}=r.current,h=f?{x:f.left,y:f.top}:De;this.referenceCoordinates||(this.referenceCoordinates=h);const d=i(t,{active:n,context:r.current,currentCoordinates:h});if(d){const p=Jt(d,h),m={x:0,y:0},{scrollableAncestors:x}=r.current;for(const g of x){const y=t.code,{isTop:v,isRight:b,isLeft:N,isBottom:E,maxScroll:k,minScroll:D}=Ms(g),j=nl(g),z={x:Math.min(y===Q.Right?j.right-j.width/2:j.right,Math.max(y===Q.Right?j.left:j.left+j.width/2,d.x)),y:Math.min(y===Q.Down?j.bottom-j.height/2:j.bottom,Math.max(y===Q.Down?j.top:j.top+j.height/2,d.y))},B=y===Q.Right&&!b||y===Q.Left&&!N,G=y===Q.Down&&!E||y===Q.Up&&!v;if(B&&z.x!==d.x){const O=g.scrollLeft+p.x,L=y===Q.Right&&O<=k.x||y===Q.Left&&O>=D.x;if(L&&!p.y){g.scrollTo({left:O,behavior:l});return}L?m.x=g.scrollLeft-O:m.x=y===Q.Right?g.scrollLeft-k.x:g.scrollLeft-D.x,m.x&&g.scrollBy({left:-m.x,behavior:l});break}else if(G&&z.y!==d.y){const O=g.scrollTop+p.y,L=y===Q.Down&&O<=k.y||y===Q.Up&&O>=D.y;if(L&&!p.x){g.scrollTo({top:O,behavior:l});return}L?m.y=g.scrollTop-O:m.y=y===Q.Down?g.scrollTop-k.y:g.scrollTop-D.y,m.y&&g.scrollBy({top:-m.y,behavior:l});break}}this.handleMove(t,vt(Jt(d,this.referenceCoordinates),m))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}$s.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Os,onActivation:o}=t,{active:a}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const l=a.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),o?.({event:e.nativeEvent}),!0)}return!1}}];function Ir(e){return!!(e&&"distance"in e)}function Ar(e){return!!(e&&"delay"in e)}class or{constructor(t,n,r){var o;r===void 0&&(r=il(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:a}=t,{target:i}=a;this.props=t,this.events=n,this.document=St(i),this.documentListeners=new It(this.document),this.listeners=new It(r),this.windowListeners=new It(de(i)),this.initialCoordinates=(o=An(a))!=null?o:De,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(we.Resize,this.handleCancel),this.windowListeners.add(we.DragStart,kr),this.windowListeners.add(we.VisibilityChange,this.handleCancel),this.windowListeners.add(we.ContextMenu,kr),this.documentListeners.add(we.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Ar(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Ir(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:o}=this.props;o(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(we.Click,ll,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(we.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:o,props:a}=this,{onMove:i,options:{activationConstraint:l}}=a;if(!o)return;const u=(n=An(t))!=null?n:De,f=Jt(o,u);if(!r&&l){if(Ir(l)){if(l.tolerance!=null&&Cn(f,l.tolerance))return this.handleCancel();if(Cn(f,l.distance))return this.handleStart()}if(Ar(l)&&Cn(f,l.tolerance))return this.handleCancel();this.handlePending(l,f);return}t.cancelable&&t.preventDefault(),i(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Q.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const ul={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Fs extends or{constructor(t){const{event:n}=t,r=St(n.target);super(t,ul,r)}}Fs.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const dl={move:{name:"mousemove"},end:{name:"mouseup"}};var Tn;(function(e){e[e.RightClick=2]="RightClick"})(Tn||(Tn={}));class fl extends or{constructor(t){super(t,dl,St(t.event.target))}}fl.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Tn.RightClick?!1:(r?.({event:n}),!0)}}];const En={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class hl extends or{constructor(t){super(t,En)}static setup(){return window.addEventListener(En.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(En.move.name,t)};function t(){}}}hl.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return o.length>1?!1:(r?.({event:n}),!0)}}];var At;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(At||(At={}));var Zt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Zt||(Zt={}));function pl(e){let{acceleration:t,activator:n=At.Pointer,canScroll:r,draggingRect:o,enabled:a,interval:i=5,order:l=Zt.TreeOrder,pointerCoordinates:u,scrollableAncestors:f,scrollableAncestorRects:h,delta:d,threshold:p}=e;const m=gl({delta:d,disabled:!a}),[x,g]=Di(),y=c.useRef({x:0,y:0}),v=c.useRef({x:0,y:0}),b=c.useMemo(()=>{switch(n){case At.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case At.DraggableRect:return o}},[n,o,u]),N=c.useRef(null),E=c.useCallback(()=>{const D=N.current;if(!D)return;const j=y.current.x*v.current.x,z=y.current.y*v.current.y;D.scrollBy(j,z)},[]),k=c.useMemo(()=>l===Zt.TreeOrder?[...f].reverse():f,[l,f]);c.useEffect(()=>{if(!a||!f.length||!b){g();return}for(const D of k){if(r?.(D)===!1)continue;const j=f.indexOf(D),z=h[j];if(!z)continue;const{direction:B,speed:G}=tl(D,z,b,t,p);for(const O of["x","y"])m[O][B[O]]||(G[O]=0,B[O]=0);if(G.x>0||G.y>0){g(),N.current=D,x(E,i),y.current=G,v.current=B;return}}y.current={x:0,y:0},v.current={x:0,y:0},g()},[t,E,r,g,a,i,JSON.stringify(b),JSON.stringify(m),x,f,k,h,JSON.stringify(p)])}const ml={x:{[se.Backward]:!1,[se.Forward]:!1},y:{[se.Backward]:!1,[se.Forward]:!1}};function gl(e){let{delta:t,disabled:n}=e;const r=In(t);return Ht(o=>{if(n||!r||!o)return ml;const a={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[se.Backward]:o.x[se.Backward]||a.x===-1,[se.Forward]:o.x[se.Forward]||a.x===1},y:{[se.Backward]:o.y[se.Backward]||a.y===-1,[se.Forward]:o.y[se.Forward]||a.y===1}}},[n,t,r])}function xl(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return Ht(o=>{var a;return t==null?null:(a=r??o)!=null?a:null},[r,t])}function vl(e,t){return c.useMemo(()=>e.reduce((n,r)=>{const{sensor:o}=r,a=o.activators.map(i=>({eventName:i.eventName,handler:t(i.handler,r)}));return[...n,...a]},[]),[e,t])}var Ot;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Ot||(Ot={}));var Pn;(function(e){e.Optimized="optimized"})(Pn||(Pn={}));const zr=new Map;function bl(e,t){let{dragging:n,dependencies:r,config:o}=t;const[a,i]=c.useState(null),{frequency:l,measure:u,strategy:f}=o,h=c.useRef(e),d=y(),p=Lt(d),m=c.useCallback(function(v){v===void 0&&(v=[]),!p.current&&i(b=>b===null?v:b.concat(v.filter(N=>!b.includes(N))))},[p]),x=c.useRef(null),g=Ht(v=>{if(d&&!n)return zr;if(!v||v===zr||h.current!==e||a!=null){const b=new Map;for(let N of e){if(!N)continue;if(a&&a.length>0&&!a.includes(N.id)&&N.rect.current){b.set(N.id,N.rect.current);continue}const E=N.node.current,k=E?new sr(u(E),E):null;N.rect.current=k,k&&b.set(N.id,k)}return b}return v},[e,a,n,d,u]);return c.useEffect(()=>{h.current=e},[e]),c.useEffect(()=>{d||m()},[n,d]),c.useEffect(()=>{a&&a.length>0&&i(null)},[JSON.stringify(a)]),c.useEffect(()=>{d||typeof l!="number"||x.current!==null||(x.current=setTimeout(()=>{m(),x.current=null},l))},[l,d,m,...r]),{droppableRects:g,measureDroppableContainers:m,measuringScheduled:a!=null};function y(){switch(f){case Ot.Always:return!1;case Ot.BeforeDragging:return n;default:return!n}}}function Hs(e,t){return Ht(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function wl(e,t){return Hs(e,t)}function yl(e){let{callback:t,disabled:n}=e;const r=nr(t),o=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,n]);return c.useEffect(()=>()=>o?.disconnect(),[o]),o}function un(e){let{callback:t,disabled:n}=e;const r=nr(t),o=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[n]);return c.useEffect(()=>()=>o?.disconnect(),[o]),o}function Sl(e){return new sr(qt(e),e)}function Tr(e,t,n){t===void 0&&(t=Sl);const[r,o]=c.useState(null);function a(){o(u=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=u??n)!=null?f:null}const h=t(e);return JSON.stringify(u)===JSON.stringify(h)?u:h})}const i=yl({callback(u){if(e)for(const f of u){const{type:h,target:d}=f;if(h==="childList"&&d instanceof HTMLElement&&d.contains(e)){a();break}}}}),l=un({callback:a});return Xe(()=>{a(),e?(l?.observe(e),i?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),i?.disconnect())},[e]),r}function Cl(e){const t=Hs(e);return Is(e,t)}const Pr=[];function El(e){const t=c.useRef(e),n=Ht(r=>e?r&&r!==Pr&&e&&t.current&&e.parentNode===t.current.parentNode?r:rr(e):Pr,[e]);return c.useEffect(()=>{t.current=e},[e]),n}function Nl(e){const[t,n]=c.useState(null),r=c.useRef(e),o=c.useCallback(a=>{const i=Sn(a.target);i&&n(l=>l?(l.set(i,zn(i)),new Map(l)):null)},[]);return c.useEffect(()=>{const a=r.current;if(e!==a){i(a);const l=e.map(u=>{const f=Sn(u);return f?(f.addEventListener("scroll",o,{passive:!0}),[f,zn(f)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),r.current=e}return()=>{i(e),i(a)};function i(l){l.forEach(u=>{const f=Sn(u);f?.removeEventListener("scroll",o)})}},[o,e]),c.useMemo(()=>e.length?t?Array.from(t.values()).reduce((a,i)=>vt(a,i),De):Ls(e):De,[e,t])}function Mr(e,t){t===void 0&&(t=[]);const n=c.useRef(null);return c.useEffect(()=>{n.current=null},t),c.useEffect(()=>{const r=e!==De;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Jt(e,n.current):De}function jl(e){c.useEffect(()=>{if(!ln)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function Rl(e,t){return c.useMemo(()=>e.reduce((n,r)=>{let{eventName:o,handler:a}=r;return n[o]=i=>{a(i,t)},n},{}),[e,t])}function qs(e){return c.useMemo(()=>e?Ji(e):null,[e])}const Lr=[];function Dl(e,t){t===void 0&&(t=qt);const[n]=e,r=qs(n?de(n):null),[o,a]=c.useState(Lr);function i(){a(()=>e.length?e.map(u=>Ps(u)?r:new sr(t(u),u)):Lr)}const l=un({callback:i});return Xe(()=>{l?.disconnect(),i(),e.forEach(u=>l?.observe(u))},[e]),o}function _l(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Ft(t)?t:e}function kl(e){let{measure:t}=e;const[n,r]=c.useState(null),o=c.useCallback(f=>{for(const{target:h}of f)if(Ft(h)){r(d=>{const p=t(h);return d?{...d,width:p.width,height:p.height}:p});break}},[t]),a=un({callback:o}),i=c.useCallback(f=>{const h=_l(f);a?.disconnect(),h&&a?.observe(h),r(h?t(h):null)},[t,a]),[l,u]=Yt(i);return c.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const Il=[{sensor:Fs,options:{}},{sensor:$s,options:{}}],Al={current:{}},Wt={draggable:{measure:_r},droppable:{measure:_r,strategy:Ot.WhileDragging,frequency:Pn.Optimized},dragOverlay:{measure:qt}};class zt extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const zl={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new zt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Qt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Wt,measureDroppableContainers:Qt,windowRect:null,measuringScheduled:!1},Tl={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Qt,draggableNodes:new Map,over:null,measureDroppableContainers:Qt},dn=c.createContext(Tl),Pl=c.createContext(zl);function Ml(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new zt}}}function Ll(e,t){switch(t.type){case re.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case re.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case re.DragEnd:case re.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case re.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new zt(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case re.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new zt(e.droppable.containers);return i.set(n,{...a,disabled:o}),{...e,droppable:{...e.droppable,containers:i}}}case re.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const a=new zt(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function Ol(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=c.useContext(dn),a=In(r),i=In(n?.id);return c.useEffect(()=>{if(!t&&!r&&a&&i!=null){if(!_s(a)||document.activeElement===a.target)return;const l=o.get(i);if(!l)return;const{activatorNode:u,node:f}=l;if(!u.current&&!f.current)return;requestAnimationFrame(()=>{for(const h of[u.current,f.current]){if(!h)continue;const d=Ii(h);if(d){d.focus();break}}})}},[r,t,o,i,a]),null}function $l(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((o,a)=>a({transform:o,...r}),n):n}function Fl(e){return c.useMemo(()=>({draggable:{...Wt.draggable,...e?.draggable},droppable:{...Wt.droppable,...e?.droppable},dragOverlay:{...Wt.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function Hl(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const a=c.useRef(!1),{x:i,y:l}=typeof o=="boolean"?{x:o,y:o}:o;Xe(()=>{if(!i&&!l||!t){a.current=!1;return}if(a.current||!r)return;const f=t?.node.current;if(!f||f.isConnected===!1)return;const h=n(f),d=Is(h,r);if(i||(d.x=0),l||(d.y=0),a.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const p=As(f);p&&p.scrollBy({top:d.y,left:d.x})}},[t,i,l,r,n])}const Gs=c.createContext({...De,scaleX:1,scaleY:1});var Be;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Be||(Be={}));const ql=c.memo(function(t){var n,r,o,a;let{id:i,accessibility:l,autoScroll:u=!0,children:f,sensors:h=Il,collisionDetection:d=Bi,measuring:p,modifiers:m,...x}=t;const g=c.useReducer(Ll,void 0,Ml),[y,v]=g,[b,N]=Li(),[E,k]=c.useState(Be.Uninitialized),D=E===Be.Initialized,{draggable:{active:j,nodes:z,translate:B},droppable:{containers:G}}=y,O=j!=null?z.get(j):null,L=c.useRef({initial:null,translated:null}),X=c.useMemo(()=>{var ie;return j!=null?{id:j,data:(ie=O?.data)!=null?ie:Al,rect:L}:null},[j,O]),U=c.useRef(null),[J,C]=c.useState(null),[w,R]=c.useState(null),_=Lt(x,Object.values(x)),T=cn("DndDescribedBy",i),$=c.useMemo(()=>G.getEnabled(),[G]),H=Fl(p),{droppableRects:S,measureDroppableContainers:I,measuringScheduled:P}=bl($,{dragging:D,dependencies:[B.x,B.y],config:H.droppable}),A=xl(z,j),M=c.useMemo(()=>w?An(w):null,[w]),F=na(),V=wl(A,H.draggable.measure);Hl({activeNode:j!=null?z.get(j):null,config:F.layoutShiftCompensation,initialRect:V,measure:H.draggable.measure});const K=Tr(A,H.draggable.measure,V),le=Tr(A?A.parentElement:null),ee=c.useRef({activatorEvent:null,active:null,activeNode:A,collisionRect:null,collisions:null,droppableRects:S,draggableNodes:z,draggingNode:null,draggingNodeRect:null,droppableContainers:G,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Y=G.getNodeFor((n=ee.current.over)==null?void 0:n.id),Z=kl({measure:H.dragOverlay.measure}),ce=(r=Z.nodeRef.current)!=null?r:A,Ee=D?(o=Z.rect)!=null?o:K:null,nt=!!(Z.nodeRef.current&&Z.rect),oe=Cl(nt?null:K),rt=qs(ce?de(ce):null),_e=El(D?Y??A:null),ke=Dl(_e),Ye=$l(m,{transform:{x:B.x-oe.x,y:B.y-oe.y,scaleX:1,scaleY:1},activatorEvent:w,active:X,activeNodeRect:K,containerNodeRect:le,draggingNodeRect:Ee,over:ee.current.over,overlayNodeRect:Z.rect,scrollableAncestors:_e,scrollableAncestorRects:ke,windowRect:rt}),Gt=M?vt(M,B):null,cr=Nl(_e),Xo=Mr(cr),Yo=Mr(cr,[K]),st=vt(Ye,Xo),ot=Ee?Ui(Ee,Ye):null,Et=X&&ot?d({active:X,collisionRect:ot,droppableRects:S,droppableContainers:$,pointerCoordinates:Gt}):null,ur=qi(Et,"id"),[Fe,dr]=c.useState(null),Jo=nt?Ye:vt(Ye,Yo),Qo=Vi(Jo,(a=Fe?.rect)!=null?a:null,K),pn=c.useRef(null),fr=c.useCallback((ie,fe)=>{let{sensor:he,options:He}=fe;if(U.current==null)return;const xe=z.get(U.current);if(!xe)return;const pe=ie.nativeEvent,Ie=new he({active:U.current,activeNode:xe,event:pe,options:He,context:ee,onAbort(ae){if(!z.get(ae))return;const{onDragAbort:Ae}=_.current,ze={id:ae};Ae?.(ze),b({type:"onDragAbort",event:ze})},onPending(ae,qe,Ae,ze){if(!z.get(ae))return;const{onDragPending:jt}=_.current,Ge={id:ae,constraint:qe,initialCoordinates:Ae,offset:ze};jt?.(Ge),b({type:"onDragPending",event:Ge})},onStart(ae){const qe=U.current;if(qe==null)return;const Ae=z.get(qe);if(!Ae)return;const{onDragStart:ze}=_.current,Nt={activatorEvent:pe,active:{id:qe,data:Ae.data,rect:L}};Dt.unstable_batchedUpdates(()=>{ze?.(Nt),k(Be.Initializing),v({type:re.DragStart,initialCoordinates:ae,active:qe}),b({type:"onDragStart",event:Nt}),C(pn.current),R(pe)})},onMove(ae){v({type:re.DragMove,coordinates:ae})},onEnd:at(re.DragEnd),onCancel:at(re.DragCancel)});pn.current=Ie;function at(ae){return async function(){const{active:Ae,collisions:ze,over:Nt,scrollAdjustedTranslate:jt}=ee.current;let Ge=null;if(Ae&&jt){const{cancelDrop:Rt}=_.current;Ge={activatorEvent:pe,active:Ae,collisions:ze,delta:jt,over:Nt},ae===re.DragEnd&&typeof Rt=="function"&&await Promise.resolve(Rt(Ge))&&(ae=re.DragCancel)}U.current=null,Dt.unstable_batchedUpdates(()=>{v({type:ae}),k(Be.Uninitialized),dr(null),C(null),R(null),pn.current=null;const Rt=ae===re.DragEnd?"onDragEnd":"onDragCancel";if(Ge){const mn=_.current[Rt];mn?.(Ge),b({type:Rt,event:Ge})}})}}},[z]),Zo=c.useCallback((ie,fe)=>(he,He)=>{const xe=he.nativeEvent,pe=z.get(He);if(U.current!==null||!pe||xe.dndKit||xe.defaultPrevented)return;const Ie={active:pe};ie(he,fe.options,Ie)===!0&&(xe.dndKit={capturedBy:fe.sensor},U.current=He,fr(he,fe))},[z,fr]),hr=vl(h,Zo);jl(h),Xe(()=>{K&&E===Be.Initializing&&k(Be.Initialized)},[K,E]),c.useEffect(()=>{const{onDragMove:ie}=_.current,{active:fe,activatorEvent:he,collisions:He,over:xe}=ee.current;if(!fe||!he)return;const pe={active:fe,activatorEvent:he,collisions:He,delta:{x:st.x,y:st.y},over:xe};Dt.unstable_batchedUpdates(()=>{ie?.(pe),b({type:"onDragMove",event:pe})})},[st.x,st.y]),c.useEffect(()=>{const{active:ie,activatorEvent:fe,collisions:he,droppableContainers:He,scrollAdjustedTranslate:xe}=ee.current;if(!ie||U.current==null||!fe||!xe)return;const{onDragOver:pe}=_.current,Ie=He.get(ur),at=Ie&&Ie.rect.current?{id:Ie.id,rect:Ie.rect.current,data:Ie.data,disabled:Ie.disabled}:null,ae={active:ie,activatorEvent:fe,collisions:he,delta:{x:xe.x,y:xe.y},over:at};Dt.unstable_batchedUpdates(()=>{dr(at),pe?.(ae),b({type:"onDragOver",event:ae})})},[ur]),Xe(()=>{ee.current={activatorEvent:w,active:X,activeNode:A,collisionRect:ot,collisions:Et,droppableRects:S,draggableNodes:z,draggingNode:ce,draggingNodeRect:Ee,droppableContainers:G,over:Fe,scrollableAncestors:_e,scrollAdjustedTranslate:st},L.current={initial:Ee,translated:ot}},[X,A,Et,ot,z,ce,Ee,S,G,Fe,_e,st]),pl({...F,delta:B,draggingRect:ot,pointerCoordinates:Gt,scrollableAncestors:_e,scrollableAncestorRects:ke});const ea=c.useMemo(()=>({active:X,activeNode:A,activeNodeRect:K,activatorEvent:w,collisions:Et,containerNodeRect:le,dragOverlay:Z,draggableNodes:z,droppableContainers:G,droppableRects:S,over:Fe,measureDroppableContainers:I,scrollableAncestors:_e,scrollableAncestorRects:ke,measuringConfiguration:H,measuringScheduled:P,windowRect:rt}),[X,A,K,w,Et,le,Z,z,G,S,Fe,I,_e,ke,H,P,rt]),ta=c.useMemo(()=>({activatorEvent:w,activators:hr,active:X,activeNodeRect:K,ariaDescribedById:{draggable:T},dispatch:v,draggableNodes:z,over:Fe,measureDroppableContainers:I}),[w,hr,X,K,v,T,z,Fe,I]);return ye.createElement(ks.Provider,{value:N},ye.createElement(dn.Provider,{value:ta},ye.createElement(Pl.Provider,{value:ea},ye.createElement(Gs.Provider,{value:Qo},f)),ye.createElement(Ol,{disabled:l?.restoreFocus===!1})),ye.createElement(Fi,{...l,hiddenTextDescribedById:T}));function na(){const ie=J?.autoScrollEnabled===!1,fe=typeof u=="object"?u.enabled===!1:u===!1,he=D&&!ie&&!fe;return typeof u=="object"?{...u,enabled:he}:{enabled:he}}}),Gl=c.createContext(null),Or="button",Bl="Draggable";function Vl(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const a=cn(Bl),{activators:i,activatorEvent:l,active:u,activeNodeRect:f,ariaDescribedById:h,draggableNodes:d,over:p}=c.useContext(dn),{role:m=Or,roleDescription:x="draggable",tabIndex:g=0}=o??{},y=u?.id===t,v=c.useContext(y?Gs:Gl),[b,N]=Yt(),[E,k]=Yt(),D=Rl(i,t),j=Lt(n);Xe(()=>(d.set(t,{id:t,key:a,node:b,activatorNode:E,data:j}),()=>{const B=d.get(t);B&&B.key===a&&d.delete(t)}),[d,t]);const z=c.useMemo(()=>({role:m,tabIndex:g,"aria-disabled":r,"aria-pressed":y&&m===Or?!0:void 0,"aria-roledescription":x,"aria-describedby":h.draggable}),[r,m,g,y,x,h.draggable]);return{active:u,activatorEvent:l,activeNodeRect:f,attributes:z,isDragging:y,listeners:r?void 0:D,node:b,over:p,setNodeRef:N,setActivatorNodeRef:k,transform:v}}const Wl="Droppable",Ul={timeout:25};function Kl(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const a=cn(Wl),{active:i,dispatch:l,over:u,measureDroppableContainers:f}=c.useContext(dn),h=c.useRef({disabled:n}),d=c.useRef(!1),p=c.useRef(null),m=c.useRef(null),{disabled:x,updateMeasurementsFor:g,timeout:y}={...Ul,...o},v=Lt(g??r),b=c.useCallback(()=>{if(!d.current){d.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{f(Array.isArray(v.current)?v.current:[v.current]),m.current=null},y)},[y]),N=un({callback:b,disabled:x||!i}),E=c.useCallback((z,B)=>{N&&(B&&(N.unobserve(B),d.current=!1),z&&N.observe(z))},[N]),[k,D]=Yt(E),j=Lt(t);return c.useEffect(()=>{!N||!k.current||(N.disconnect(),d.current=!1,N.observe(k.current))},[k,N]),c.useEffect(()=>(l({type:re.RegisterDroppable,element:{id:r,key:a,disabled:n,node:k,rect:p,data:j}}),()=>l({type:re.UnregisterDroppable,key:a,id:r})),[r]),c.useEffect(()=>{n!==h.current.disabled&&(l({type:re.SetDroppableDisabled,id:r,key:a,disabled:n}),h.current.disabled=n)},[r,a,n,l]),{active:i,rect:p,isOver:u?.id===r,node:k,over:u,setNodeRef:D}}const Xl=({label:e,value:t})=>{const{attributes:n,listeners:r,setNodeRef:o,transform:a}=Vl({id:t}),i=a?{transform:`translate(${a.x}px, ${a.y}px)`}:void 0;return s.jsx(tn,{ref:o,style:i,...r,...n,className:"p-2 cursor-grab select-none shadow inline-block w-fit",children:e})},Yl=({id:e,children:t})=>{const{isOver:n,setNodeRef:r}=Kl({id:e});return s.jsx("div",{ref:r,className:W("min-h-[40px] min-w-[100px] w-fit border-b border-dashed px-2 py-1 flex items-center justify-center transition-colors",n?"bg-primary/10":"bg-transparent"),children:t})},Jl=({options:e,questions:t,form:n,isRepeatAnswer:r=!1})=>{const[o,a]=c.useState(null),[i,l]=c.useState([]),[u,f]=c.useState([]),h=c.useMemo(()=>e,[e]),d=c.useMemo(()=>t,[t]);c.useEffect(()=>{if(!h?.length){a("Notogri yoki bosh variantlar kiritilgan.");return}if(!d?.length){a("Notogri yoki bosh savollar kiritilgan.");return}l(h),f(d.map(x=>({...x,answer:x.answer||n.getValues(`answers.${parseInt(x.question_number)-1}.answer`)||void 0}))),a(null)},[]);const p=x=>{const{over:g,active:y}=x;if(!g)return;const v=h.find(E=>String(E.value)===String(y.id));if(!v)return;const b=parseInt(g.id)-1,N=u.find(E=>E.question_number===g.id)?.answer;if(N&&!r){const E=h.find(k=>String(k.value)===String(N));E&&!i.some(k=>String(k.value)===String(E.value))&&l(k=>[...k,E])}n.setValue(`answers.${b}.answer`,v.value),f(E=>E.map(k=>k.question_number===g.id?{...k,answer:v.value}:k)),r||l(E=>E.filter(D=>String(D.value)!==String(v.value)))},m=x=>{const g=parseInt(x)-1,y=u.find(v=>v.question_number===x);if(y?.answer&&(n.setValue(`answers.${g}.answer`,""),f(v=>v.map(b=>b.question_number===x?{...b,answer:void 0}:b)),!r)){const v=h.find(b=>String(b.value)===String(y.answer));v&&!i.some(b=>String(b.value)===String(v.value))&&l(b=>[...b,v])}};return o?s.jsx("div",{className:"p-4 text-red-600",children:o}):s.jsx(ql,{onDragEnd:p,children:s.jsxs("div",{className:"space-y-6 mt-4 mb-6",children:[s.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(x=>s.jsx(Xl,{label:x.label,value:x.value},x.value))}),s.jsx("div",{className:"space-y-4",children:u.map(x=>s.jsxs("div",{className:"flex flex-row items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"font-bold",children:x.question_number}),s.jsx("span",{children:x.question_text||""}),s.jsx(Yl,{id:x.question_number,children:x.answer?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:h.find(g=>String(g.value)===String(x.answer))?.label||"?"}),s.jsx("button",{onClick:()=>m(x.question_number),className:"text-destructive hover:text-destructive/70",children:s.jsx(qr,{size:15})})]}):s.jsx("span",{className:"text-muted-foreground",children:x.question_number})})]},x.question_number))})]})})};var ar="Radio",[Ql,Bs]=$t(ar),[Zl,ec]=Ql(ar),Vs=c.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:o=!1,required:a,disabled:i,value:l="on",onCheck:u,form:f,...h}=e,[d,p]=c.useState(null),m=ge(t,y=>p(y)),x=c.useRef(!1),g=d?f||!!d.closest("form"):!0;return s.jsxs(Zl,{scope:n,checked:o,disabled:i,children:[s.jsx(Ce.button,{type:"button",role:"radio","aria-checked":o,"data-state":Xs(o),"data-disabled":i?"":void 0,disabled:i,value:l,...h,ref:m,onClick:wt(e.onClick,y=>{o||u?.(),g&&(x.current=y.isPropagationStopped(),x.current||y.stopPropagation())})}),g&&s.jsx(Ks,{control:d,bubbles:!x.current,name:r,value:l,checked:o,required:a,disabled:i,form:f,style:{transform:"translateX(-100%)"}})]})});Vs.displayName=ar;var Ws="RadioIndicator",Us=c.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...o}=e,a=ec(Ws,n);return s.jsx(Br,{present:r||a.checked,children:s.jsx(Ce.span,{"data-state":Xs(a.checked),"data-disabled":a.disabled?"":void 0,...o,ref:t})})});Us.displayName=Ws;var tc="RadioBubbleInput",Ks=c.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...o},a)=>{const i=c.useRef(null),l=ge(i,a),u=Bn(n),f=Vn(t);return c.useEffect(()=>{const h=i.current;if(!h)return;const d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(u!==n&&m){const x=new Event("click",{bubbles:r});m.call(h,n),h.dispatchEvent(x)}},[u,n,r]),s.jsx(Ce.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:l,style:{...o.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Ks.displayName=tc;function Xs(e){return e?"checked":"unchecked"}var nc=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],fn="RadioGroup",[rc,Du]=$t(fn,[Ur,Bs]),Ys=Ur(),Js=Bs(),[sc,oc]=rc(fn),Qs=c.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:o,value:a,required:i=!1,disabled:l=!1,orientation:u,dir:f,loop:h=!0,onValueChange:d,...p}=e,m=Ys(n),x=Kr(f),[g,y]=Gn({prop:a,defaultProp:o??null,onChange:d,caller:fn});return s.jsx(sc,{scope:n,name:r,required:i,disabled:l,value:g,onValueChange:y,children:s.jsx(Da,{asChild:!0,...m,orientation:u,dir:x,loop:h,children:s.jsx(Ce.div,{role:"radiogroup","aria-required":i,"aria-orientation":u,"data-disabled":l?"":void 0,dir:x,...p,ref:t})})})});Qs.displayName=fn;var Zs="RadioGroupItem",eo=c.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...o}=e,a=oc(Zs,n),i=a.disabled||r,l=Ys(n),u=Js(n),f=c.useRef(null),h=ge(t,f),d=a.value===o.value,p=c.useRef(!1);return c.useEffect(()=>{const m=g=>{nc.includes(g.key)&&(p.current=!0)},x=()=>p.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",x),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",x)}},[]),s.jsx(_a,{asChild:!0,...l,focusable:!i,active:d,children:s.jsx(Vs,{disabled:i,required:a.required,checked:d,...u,...o,name:a.name,ref:h,onCheck:()=>a.onValueChange(o.value),onKeyDown:wt(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:wt(o.onFocus,()=>{p.current&&f.current?.click()})})})});eo.displayName=Zs;var ac="RadioGroupIndicator",to=c.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,o=Js(n);return s.jsx(Us,{...o,...r,ref:t})});to.displayName=ac;var no=Qs,ro=eo,ic=to;const Ut=c.forwardRef(({className:e,...t},n)=>s.jsx(no,{className:W("grid gap-2",e),...t,ref:n}));Ut.displayName=no.displayName;const Mn=c.forwardRef(({className:e,...t},n)=>s.jsx(ro,{ref:n,className:W("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(ic,{className:"flex items-center justify-center",children:s.jsx(Ia,{className:"h-3 w-3 fill-primary"})})}));Mn.displayName=ro.displayName;const lc=({control:e,name:t,label:n,helperText:r,required:o,className:a,rules:i,floatingError:l,...u})=>{const f=n&&s.jsxs(Ke,{className:"my-3",children:[n," ",o&&s.jsx("span",{className:"text-red-600",children:"*"})]});return t&&e?s.jsx(Ne,{control:e,name:t,rules:i,render:({field:h})=>s.jsxs(Se,{children:[f,s.jsx(je,{children:s.jsx("input",{autoComplete:"off",type:"text",className:W("placeholder:text-primary text-center h-7","bg-transparent border border-ring rounded-md px-2 py-1","focus:outline-none focus:ring-1 focus:ring-ring","inline-block mx-2 my-2"),...u,...h})}),r&&s.jsx(Oe,{children:r}),s.jsx(dt,{className:W(l)})]})}):s.jsxs(s.Fragment,{children:[f,s.jsx(La,{...u,className:Fr(["mt-2",a])}),s.jsx(Oe,{children:r})]})},Qe=({control:e,name:t,label:n,rules:r,helperText:o,value:a,...i})=>t&&e?s.jsx(Ne,{control:e,name:t,rules:r,render:({field:l})=>{const u=()=>{l.onChange(a)};return s.jsxs(Se,{className:"flex flex-row items-center space-x-3",children:[s.jsx(je,{children:s.jsx(Mn,{value:a,checked:l.value===a,onClick:u,onMouseDown:f=>{f.stopPropagation()},...i})}),s.jsxs("div",{className:"space-y-1 leading-none cursor-pointer",onClick:u,children:[n&&s.jsx(Ke,{className:"cursor-pointer select-text",style:{userSelect:"text",WebkitUserSelect:"text"},children:n}),o&&s.jsx(Oe,{children:o})]})]})}}):s.jsxs("div",{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[s.jsx(Mn,{value:a,...i}),s.jsxs("div",{className:"space-y-1 leading-none",children:[n&&s.jsx(Ke,{children:n}),s.jsx(Oe,{children:o})]})]}),cc=({control:e,name:t,label:n,rules:r,helperText:o,options:a,dir:i,id:l,className:u,...f})=>t&&e?s.jsx(Ne,{control:e,name:t,rules:r,render:({field:h})=>s.jsxs(Se,{className:`flex flex-col space-y-2 ${u}`,id:l,children:[n&&s.jsx(Ke,{children:n}),s.jsx(je,{children:s.jsxs(Nn,{onValueChange:h.onChange,value:h.value,dir:i,...f,children:[s.jsx(jn,{children:s.jsx(Rn,{placeholder:"Select"})}),s.jsx(Dn,{children:a?.map(d=>s.jsx(Ze,{value:d.value,children:d.label},d.value))})]})}),o&&s.jsx(Oe,{children:o})]})}):s.jsxs("div",{className:`flex flex-col space-y-2 rounded-md border p-4 ${u}`,id:l,children:[s.jsx(Ke,{children:n}),s.jsxs(Nn,{dir:i,...f,children:[s.jsx(jn,{children:s.jsx(Rn,{placeholder:"Select..."})}),s.jsx(Dn,{children:a?.map(h=>s.jsx(Ze,{value:h.value,children:h.label},h.value))})]}),s.jsx(Oe,{children:o})]}),uc=({number:e,type:t,form:n,options:r,questions:o})=>{const a=Number(e)-1;return t===ue.SENTENCE_COMPLETION||t===ue.SHORT_ANSWER||t===ue.SUMMARY_COMPLETION||t===ue.DIAGRAM_LABEL?s.jsx(lc,{id:e,control:n.control,name:`answers.${a}.answer`,type:"text"}):t===ue.TRUE_FALSE_NOT_GIVEN?s.jsx(Ne,{control:n.control,name:`answers.${a}.answer`,render:({field:i})=>s.jsxs(Se,{className:"my-5",children:[s.jsx(je,{children:s.jsxs(Ut,{value:i.value||"",onValueChange:i.onChange,className:"gap-4",children:[s.jsx(Qe,{control:n.control,name:`answers.${a}.answer`,value:"TRUE",id:e,label:"TRUE"}),s.jsx(Qe,{control:n.control,name:`answers.${a}.answer`,value:"FALSE",id:e,label:"FALSE"}),s.jsx(Qe,{control:n.control,name:`answers.${a}.answer`,value:"NOT GIVEN",id:e,label:"NOT GIVEN"})]})}),s.jsx(dt,{})]})}):t===ue.YES_NO_NOT_GIVEN?s.jsx(Ne,{control:n.control,name:`answers.${a}.answer`,render:({field:i})=>s.jsxs(Se,{className:"my-5",children:[s.jsx(je,{children:s.jsxs(Ut,{value:i.value||"",onValueChange:i.onChange,className:"gap-4",children:[s.jsx(Qe,{control:n.control,name:`answers.${a}.answer`,value:"YES",id:e,label:"YES"}),s.jsx(Qe,{control:n.control,name:`answers.${a}.answer`,value:"NO",id:e,label:"NO"}),s.jsx(Qe,{control:n.control,name:`answers.${a}.answer`,value:"NOT GIVEN",id:e,label:"NOT GIVEN"})]})}),s.jsx(dt,{})]})}):t===ue.MULTIPLE_CHOICE?s.jsx(Ne,{control:n.control,name:`answers.${a}.answer`,render:({field:i})=>s.jsxs(Se,{className:"my-5",children:[s.jsx(je,{children:s.jsx(Ut,{value:i.value||"",onValueChange:i.onChange,className:"gap-4",children:r?.map(l=>s.jsx(Qe,{control:n.control,name:`answers.${a}.answer`,value:l.value,id:e,label:`${l.value}) ${l.label}`},l.value))})}),s.jsx(dt,{})]})}):t===ue.MATCHING_INFORMATION?s.jsxs("div",{className:"space-y-8",children:[s.jsxs(ft,{children:[s.jsx(ht,{children:s.jsxs(ve,{children:[s.jsx(Te,{}),r?.map(i=>s.jsx(Te,{children:i.value},i.value))]})}),s.jsx(pt,{children:o.map((i,l)=>s.jsxs(ve,{children:[s.jsxs(be,{children:[i?.question_number,". ",i?.question_text]}),r?.map(u=>s.jsx(be,{children:s.jsx(Ne,{control:n.control,name:`answers.${l}.answer`,render:({field:f})=>s.jsxs(Se,{className:"flex items-center space-x-2",children:[s.jsx(je,{children:s.jsx("input",{type:"radio",onChange:()=>f.onChange(u.value),name:`${i.question_number-1}`,value:u.value,id:`${i.question_number}`,className:`h-4 w-4 rounded-full border border-primary appearance-none 
                                checked:bg-white 
                                relative 
                                checked:after:content-[''] 
                                checked:after:block 
                                checked:after:w-2.5 checked:after:h-2.5 
                                checked:after:rounded-full 
                                checked:after:bg-primary 
                                checked:after:mx-auto checked:after:my-auto 
                                checked:after:absolute checked:after:inset-0
                                disabled:cursor-not-allowed disabled:opacity-50`})}),s.jsx(Ke,{htmlFor:`${e}-${l}-${u.value}`}),s.jsx(dt,{})]})})},u.value))]},l))})]}),s.jsxs(ft,{children:[s.jsx(ht,{children:s.jsx(ve,{children:s.jsx(Te,{colSpan:2,children:"First invented or used by"})})}),s.jsx(pt,{children:r?.map((i,l)=>s.jsxs(ve,{children:[s.jsx(be,{className:"w-[50px]",children:i.value}),s.jsx(be,{children:i.label})]},l))})]})]}):t===ue.MATCHING_HEADINGS?s.jsx(cc,{control:n.control,name:`answers.${a}.answer`,id:e,className:"mx-2 my-2",options:Pe.isEmpty(r)?[]:r?.map(i=>({label:i.value,value:i.value}))}):null},Ln=({htmlString:e,form:t,className:n="",enabledHighlight:r=!0,storageKey:o})=>{const a=c.useRef(null),[i,l]=c.useState(null),[u,f]=c.useState(null),[h,d]=c.useState(null),p=c.useRef(0),m=c.useRef(null),x=Wr({control:t.control,name:"answers"}),[g,y]=c.useState(e),v=c.useRef(!1),b=()=>Date.now().toString()+Math.random().toString(36).slice(2),N=C=>{if(C instanceof HTMLElement){const w=C.tagName.toLowerCase();if(["input","button","textarea","select"].includes(w))return!0;if(w==="label"||C.closest("label"))return!1;if(C.closest(".FormControl"))return!C.closest("label, .FormLabel, [role='label']");if(C.closest(".FormItem, .FormLabel"))return!1}if(C.nodeType===Node.TEXT_NODE&&C.parentElement){const w=C.parentElement;return w.tagName.toLowerCase()==="label"||w.closest("label, .FormLabel, [role='label']")?!1:w.closest(".FormControl")?!w.closest("label, .FormLabel"):(w.closest(".FormItem"),!1)}return!1},E=(C,w)=>{try{if(C.collapsed||N(C.startContainer)||N(C.endContainer))return;if(C.startContainer.nodeType===Node.TEXT_NODE&&C.startOffset>0){const T=C.startContainer.splitText(C.startOffset);C.setStart(T,0)}C.endContainer.nodeType===Node.TEXT_NODE&&C.endOffset<C.endContainer.textContent.length&&C.endContainer.splitText(C.endOffset);const R=C.extractContents(),_=document.createElement("span");_.className="highlight",_.dataset.highlightId=w,_.appendChild(R),C.insertNode(_),_.parentNode?.normalize(),o&&a.current&&setTimeout(()=>{if(a.current)try{localStorage.setItem(`highlights_${o}`,a.current.innerHTML)}catch(T){console.warn("Failed to save highlights:",T)}},0)}catch(R){console.warn("Error applying highlight:",R)}},k=C=>{if(!a.current)return[];const w=[],R=document.createTreeWalker(a.current,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,{acceptNode(T){return N(T)?NodeFilter.FILTER_REJECT:C.intersectsNode(T)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});let _=R.nextNode();for(;_;)w.push(_),_=R.nextNode();return w},D=()=>{if(!r||!i)return;const C=b(),w=i.cloneRange(),R=k(w);R.length===0?E(w,C):R.forEach(_=>{if(_.nodeType===Node.TEXT_NODE){const T=document.createRange();T.selectNodeContents(_),w.comparePoint(_,0)<0&&T.setStart(w.startContainer,w.startOffset),w.comparePoint(_,_.textContent.length)>0&&T.setEnd(w.endContainer,w.endOffset),T.collapsed||E(T,C)}}),l(null),f(null),d(null)},j=c.useCallback(()=>{r&&(m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{const C=window.getSelection();if(C&&C.rangeCount>0&&a.current?.contains(C.anchorNode)){const w=C.getRangeAt(0),R=C.toString().trim();if(N(w.startContainer)||N(w.endContainer)){l(null),d(null),f(null);return}if(!w.collapsed&&R.length>0){const _=w.getBoundingClientRect(),T=w.commonAncestorContainer instanceof HTMLElement?w.commonAncestorContainer:w.commonAncestorContainer.parentElement;T&&T.classList?.contains("highlight")?(d(T),l(null)):(d(null),l(w));const $=window.innerWidth,H=200,S=50;let I=_.left+window.scrollX+_.width/2;I+H/2>$+window.scrollX?I=$+window.scrollX-H/2-10:I-H/2<window.scrollX&&(I=window.scrollX+H/2+10);let P=_.top+window.scrollY-S-35;P<window.scrollY&&(P=_.bottom+window.scrollY+35),f({x:I,y:P,width:H})}else l(null),d(null),f(null)}else l(null),d(null),f(null)},150))},[r]),z=c.useCallback(C=>{const w=C.target;if(w){const _=w.tagName?.toLowerCase();if(["input","button","textarea","select"].includes(_))return;if(_==="label"||w.closest("label, .FormLabel")){const T=Date.now();if(T-p.current<300)return;p.current=T,j();return}if(w.closest(".FormControl")){if(w.closest("label, .FormLabel")){const T=Date.now();if(T-p.current<300)return;p.current=T,j();return}return}if(w.closest(".FormItem")){const T=Date.now();if(T-p.current<300)return;p.current=T,j();return}}const R=Date.now();R-p.current<300||(p.current=R,j())},[j]),B=c.useCallback(C=>{const w=C.target;if(w){const R=w.tagName?.toLowerCase();if(["input","button","textarea","select"].includes(R))return;if(R==="label"||w.closest("label, .FormLabel")){j();return}if(w.closest(".FormControl")){if(w.closest("label, .FormLabel")){j();return}return}if(w.closest(".FormItem")){j();return}}j()},[j]);c.useEffect(()=>{if(!r)return;document.addEventListener("mouseup",z),document.addEventListener("dblclick",B);const C=w=>{a.current?.contains(w.target)||(d(null),f(null))};return document.body.addEventListener("click",C),()=>{document.removeEventListener("mouseup",z),document.removeEventListener("dblclick",B),document.body.removeEventListener("click",C),m.current&&clearTimeout(m.current)}},[z,B,r]);const G=C=>{C.stopPropagation();const w=C.currentTarget;d(w),l(null);const R=w.getBoundingClientRect(),_=window.innerWidth,T=200,$=50;let H=R.left+window.scrollX+R.width/2;H+T/2>_+window.scrollX?H=_+window.scrollX-T/2-10:H-T/2<window.scrollX&&(H=window.scrollX+T/2+10);let S=R.top+window.scrollY-$-35;S<window.scrollY&&(S=R.bottom+window.scrollY+35),f({x:H,y:S,width:T})},O=()=>{if(r){try{if(h){const C=h,w=C.parentNode;if(w){for(;C.firstChild;)w.insertBefore(C.firstChild,C);w.removeChild(C),w.normalize()}}else if(i&&!h){const C=i.cloneRange();if(!a.current)return;const w=[],R=document.createTreeWalker(a.current,NodeFilter.SHOW_ELEMENT,{acceptNode(T){return T instanceof HTMLElement&&T.classList.contains("highlight")&&C.intersectsNode(T)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});let _=R.nextNode();for(;_;)w.push(_),_=R.nextNode();w.forEach(T=>{const $=T.parentNode;if($){for(;T.firstChild;)$.insertBefore(T.firstChild,T);$.removeChild(T),$.normalize()}})}o&&a.current&&setTimeout(()=>{if(a.current)try{localStorage.setItem(`highlights_${o}`,a.current.innerHTML)}catch(C){console.warn("Failed to save highlights:",C)}},0)}catch(C){console.warn("Error clearing highlight:",C)}l(null),d(null),f(null)}},L=C=>{const w=window.getSelection();w&&w.rangeCount>0&&w.removeAllRanges()};c.useEffect(()=>{y(e),v.current=!1},[e]),c.useEffect(()=>{if(o&&a.current&&!v.current)try{const C=localStorage.getItem(`highlights_${o}`);C?setTimeout(()=>{if(a.current){const w=document.createElement("div");w.innerHTML=C;const R=w.querySelectorAll(".highlight");R.length>0&&R.forEach(_=>{const T=_.getAttribute("data-highlight-id"),$=_.textContent;if($&&a.current){const H=document.createTreeWalker(a.current,NodeFilter.SHOW_TEXT,null);let S;for(;S=H.nextNode();){const P=(S.textContent||"").indexOf($);if(P!==-1&&S.parentElement&&!S.parentElement.classList.contains("highlight"))try{const A=document.createRange();A.setStart(S,P),A.setEnd(S,P+$.length);const M=document.createElement("span");M.className="highlight",M.dataset.highlightId=T||Date.now().toString();const F=A.extractContents();M.appendChild(F),A.insertNode(M);break}catch{}}}})}v.current=!0},150):v.current=!0}catch(C){console.warn("Failed to restore highlights:",C),v.current=!0}},[o,g]);const X=typeof g=="string"&&g.trim().length>0?g:e;let U=-1;const J=fa(X,{replace:C=>{if(C instanceof Tt.Element){if(C.name==="img"&&C.attribs){const{src:w,alt:R,style:_,className:T}=C.attribs;let $={};return _&&_.split(";").forEach(H=>{const[S,I]=H.split(":").map(P=>P.trim());if(S&&I){const P=S.replace(/-([a-z])/g,A=>A[1].toUpperCase());$[P]=I}}),s.jsx(ha,{src:w||"",alt:R||"",style:$,className:T||""},w||Math.random().toString())}if(C.name==="span"&&C.attribs?.class?.includes("highlight"))return c.createElement("span",{...C.attribs,onClick:G,style:{cursor:"pointer"},key:C.attribs["data-highlight-id"]||void 0},Tt.domToReact(C.children));if(C.name==="question-input"){const{attribs:w}=C,R=w["data-question-number"]??"",_=w["data-question-type"]??"";let T=[],$=[];try{T=JSON.parse(w["data-question-options"]||"[]"),$=JSON.parse(w["data-question"]||"[]")}catch(S){return console.warn("Error parsing question-input attributes:",S),s.jsx("span",{className:"text-destructive",children:"Invalid question input"})}if(!R||!_)return console.warn("Missing question-number or question-type:",w),s.jsx("span",{className:"text-destructive",children:"Invalid question input"});const H=s.jsx(uc,{number:R,type:_,form:t,options:T,questions:$});return _===ue.TRUE_FALSE_NOT_GIVEN||_===ue.YES_NO_NOT_GIVEN||_===ue.MULTIPLE_CHOICE?s.jsx("div",{id:`question-${R}`,style:{margin:"8px 0",userSelect:"text"},className:"select-text",children:H},R):s.jsx("span",{id:`question-${R}`,style:{display:"inline-block",minWidth:150},children:H},R)}if(C.name==="list-selection-tegs"){const{attribs:w}=C;let R=[],_=[];const T=w.question_type||"";try{R=JSON.parse(w.question_numbers||"[]"),_=JSON.parse(w["data-options"]||"[]")}catch(H){return console.warn("Error parsing list-selection-tegs attributes:",H),s.jsx("span",{className:"text-destructive",children:"Invalid list selection tags"})}if(!R.length||!_.length||T!==ue.LIST_SELECTION)return console.warn("Invalid list-selection-tegs attributes:",w),s.jsx("span",{className:"text-destructive",children:"Invalid list selection tags"});const $=_.map(H=>({value:H.value,label:H.label||H.value,id:`sharedAnswers_${R.join("_")}_${H.value}`}));return s.jsx("div",{className:"my-6",children:s.jsx(Ri,{control:t.control,name:`sharedAnswers_${R.join("_")}`,options:$,maxSelections:R.length,orientation:"vertical",className:"w-full",onValueChange:H=>{R.forEach((S,I)=>{const P=parseInt(S)-1;t.setValue(`answers.${P}.answer`,H[I]||"")})}})},R.join("_"))}if(C.name==="drag-drop-tegs"){const{attribs:w}=C,R=!!w.repeat_answer;let _=[],T=[];try{_=JSON.parse(w["data-options"]||"[]"),T=JSON.parse(w["data-questions"]||"[]")}catch($){return console.warn("Error parsing drag-drop-tegs attributes:",$),s.jsx("span",{className:"text-destructive",children:"Invalid drag-drop tags"})}return s.jsx(Jl,{options:_,questions:T,form:t,isRepeatAnswer:R})}if(C.name==="table-tegs"){const{attribs:w}=C;let R=[],_=[];const T=w.table_name||"";try{R=JSON.parse(w["data-options"]||"[]"),_=JSON.parse(w["data-questions"]||"[]")}catch($){return console.warn("Error parsing table-tegs attributes:",$),s.jsx("span",{className:"text-destructive",children:"Invalid table tags"})}return s.jsxs("div",{className:"space-y-8 my-8",children:[s.jsxs(ft,{className:"selectable-table",children:[s.jsx(ht,{children:s.jsxs(ve,{children:[s.jsx(Te,{}),R?.map($=>s.jsx(Te,{children:$.value},$.value))]})}),s.jsx(pt,{children:_.map($=>{const H=parseInt(String($.question_number),10);if(Number.isNaN(H)||H<=0)return console.warn("Invalid question number in table-tegs:",$.question_number),null;const S=H-1,I=x?.[S]?.answer??"";return s.jsxs(ve,{id:`question-${$.question_number}`,children:[s.jsxs(be,{className:"question-text-cell",children:[$?.question_number,". ",$?.question_text]}),R?.map(P=>s.jsx(be,{children:s.jsx(Ne,{control:t.control,name:`answers.${S}.answer`,render:({field:A})=>{const M=F=>{F.stopPropagation(),A.onChange(P.value)};return s.jsx(Se,{className:"flex items-center space-x-2",children:s.jsx(je,{children:s.jsx("input",{type:"radio",onClick:M,onChange:F=>{F.target.checked&&A.onChange(P.value)},checked:I===P.value,name:`table_tegs_question_${$.question_number}`,value:P.value,id:`${$.question_number}_${P.value}_table`,className:`h-4 w-4 rounded-full border border-primary appearance-none
                                            checked:bg-white
                                            relative
                                            checked:after:content-['']
                                            checked:after:block
                                            checked:after:w-2.5 checked:after:h-2.5
                                            checked:after:rounded-full
                                            checked:after:bg-primary
                                            checked:after:mx-auto checked:after:my-auto
                                            checked:after:absolute checked:after:inset-0`})})})}})},P.value))]},`table-tegs-${$.question_number}`)})})]}),s.jsxs(ft,{children:[s.jsx(ht,{children:s.jsx(ve,{children:s.jsx(Te,{colSpan:2,children:T})})}),s.jsx(pt,{children:R?.map($=>s.jsxs(ve,{children:[s.jsx(be,{className:"w-[50px]",children:$.value}),s.jsx(be,{children:$.label})]},$.value))})]})]})}if(C.name==="table-tegs-input"){const{attribs:w}=C;let R=[],_=[];const T=w.table_name||"";try{R=JSON.parse(w["data-options"]||"[]"),_=JSON.parse(w["data-questions"]||"[]")}catch(S){return console.warn("Error parsing table-tegs-input attributes:",S),s.jsx("span",{className:"text-destructive",children:"Invalid table input tags"})}const $=w.repeat_answer!=="False",H=new Map(_.map(S=>{const I=parseInt(String(S.question_number),10);if(Number.isNaN(I)||I<=0)return[String(S.question_number),void 0];const P=I-1;return[String(S.question_number),x?.[P]?.answer??""]}));return s.jsxs("div",{className:"space-y-8 my-8",children:[s.jsxs(ft,{className:"selectable-table",children:[s.jsx(ht,{children:s.jsxs(ve,{children:[s.jsx(Te,{}),R?.map(S=>s.jsx(Te,{children:S.value},S.value))]})}),s.jsx(pt,{children:_.map(S=>{const I=parseInt(String(S.question_number),10);if(Number.isNaN(I)||I<=0)return console.warn("Invalid question number in table-tegs-input:",S.question_number),null;const P=I-1,A=String(S.question_number),M=H.get(A)??"";return s.jsxs(ve,{id:`question-${S.question_number}`,children:[s.jsxs(be,{className:"question-text-cell",children:[S?.question_number,". ",S?.question_text]}),R?.map(F=>{const V=F.value,K=M===V,ee=!$&&Array.from(H.entries()).some(([Y,Z])=>Y!==A&&Z&&String(Z).trim()!==""&&Z===V)&&!K;return s.jsx(be,{children:s.jsx(Ne,{control:t.control,name:`answers.${P}.answer`,render:({field:Y})=>{const Z=ce=>{ce.stopPropagation(),ee||Y.onChange(V)};return s.jsxs(Se,{className:"flex items-center space-x-2",children:[s.jsx(je,{children:s.jsx("input",{type:"radio",onClick:Z,onChange:ce=>{ce.target.checked&&!ee&&Y.onChange(V)},checked:K,name:`table_tegs_input_question_${S.question_number}`,value:V,id:`${S.question_number}_${V}_input`,disabled:ee,className:`h-4 w-4 rounded-full border border-primary appearance-none
                          checked:bg-white
                          relative
                          checked:after:content-['']
                          checked:after:block
                          checked:after:w-2.5 checked:after:h-2.5
                          checked:after:rounded-full
                          checked:after:bg-primary
                          checked:after:mx-auto checked:after:my-auto
                          checked:after:absolute checked:after:inset-0
                          disabled:cursor-not-allowed disabled:opacity-50`})}),s.jsx(Ke,{})]})}})},F.value)})]},`table-tegs-input-${S.question_number}`)})})]}),R?.length>0&&T&&T!=="List"&&s.jsxs(ft,{className:"selectable-table",children:[s.jsx(ht,{children:s.jsx(ve,{children:s.jsx(Te,{colSpan:2,children:T||"Options"})})}),s.jsx(pt,{children:R.map(S=>s.jsxs(ve,{children:[s.jsx(be,{className:"w-[50px]",children:S.value}),s.jsx(be,{children:S.label})]},S.value))})]})]})}if(C.name==="drag-drop-matching-sentence-endings")return U+=1,s.jsx(fc,{blockKey:`drag-drop-${U}`,element:C,form:t,onPreventSelection:L},`drag-drop-${U}`)}}});return s.jsxs(s.Fragment,{children:[s.jsx("style",{children:`
        .highlight {
          background-color: #fde68a;
          transition: background-color 0.2s;
        }
        .highlight:hover {
          background-color: #fad980;
        }
        .drag-drop-container {
          min-height: 40px;
        }
        input, button, [draggable] {
          pointer-events: auto;
          user-select: none;
        }
        question-input, list-selection-tegs, drag-drop-tegs, table-tegs, table-tegs-input, drag-drop-matching-sentence-endings, drag-drop-sentence-input {
          user-select: text;
        }
        .selectable-table {
          user-select: text;
        }
        .selectable-table .question-text-cell {
          user-select: text;
          cursor: text;
        }
        .selectable-table td, .selectable-table th {
          user-select: text;
        }
        /* Ensure all text elements are selectable for highlighting */
        p, div, span, h1, h2, h3, h4, h5, h6, li, td, th {
          user-select: text;
          -webkit-user-select: text;
          -moz-user-select: text;
          -ms-user-select: text;
        }
        /* Ensure labels and option text are selectable */
        label, .FormLabel, [role="label"] {
          user-select: text !important;
          -webkit-user-select: text !important;
          -moz-user-select: text !important;
          -ms-user-select: text !important;
          cursor: text;
        }
        /* Ensure FormItem allows text selection (contains option labels) */
        .FormItem {
          user-select: text;
          -webkit-user-select: text;
        }
        /* But keep inputs non-selectable */
        .FormItem input[type="radio"],
        .FormItem input[type="checkbox"],
        .FormControl input {
          user-select: none !important;
          -webkit-user-select: none !important;
        }
        /* Ensure question containers are highlightable */
        [id^="question-"] {
          user-select: text !important;
          -webkit-user-select: text !important;
        }
      `}),s.jsx("div",{ref:a,className:`w-full text-sm text-[--foreground] ${n}
          [&_table]:w-full [&_table]:border-collapse
          [&_td]:border [&_td]:border-[--border] [&_td]:p-2
          [&_th]:border [&_th]:border-[--border] [&_th]:p-2
          [&_p]:mb-2 [&_p]:text-[--foreground]
          [&_h3]:text-lg [&_h3]:font-semibold [&_h3]:mb-2 [&_h3]:text-[--foreground]
          [&_strong]:font-bold [&_em]:italic select-text`,style:{userSelect:"text"},children:J}),r&&u&&(i||h)&&s.jsxs("div",{className:"absolute z-50 flex gap-2 rounded-lg border bg-muted p-2 shadow-lg -translate-x-1/2",style:{left:u.x,top:u.y},children:[!h&&s.jsxs(Le,{size:"sm",onClick:D,children:[s.jsx(pa,{className:"mr-1 h-4 w-4"})," Highlight"]}),s.jsxs(Le,{size:"sm",variant:"destructive",onClick:O,disabled:!h&&!i,children:[s.jsx(ma,{className:"mr-1 h-4 w-4"})," Clear"]})]})]})},dc=e=>{const t=[],n=r=>{r?.forEach(o=>{if(o instanceof Tt.Element){if(o.name==="drag-drop-sentence-input"){const a=o.attribs["data-question-number"];a&&t.push(a)}o.children&&o.children.length&&n(o.children)}})};return n(e||[]),t},fc=({element:e,form:t,blockKey:n,onPreventSelection:r})=>{const o=c.useMemo(()=>{try{return JSON.parse(e.attribs["data-options"]||"[]")}catch(b){return console.error("Invalid data-options JSON:",b),[]}},[e]);if(!o.length)return s.jsx("span",{className:"text-destructive block my-4",children:"No drag drop options"});const a=e.attribs["data-repeat"]==="True",i=c.useMemo(()=>dc(e.children),[e.children]),[l,u]=c.useState({});c.useEffect(()=>{const b=t.getValues("answers")||[],N={};i.forEach(E=>{const k=parseInt(E,10)-1,D=b?.[k]?.answer;D&&(N[E]=D)}),u(E=>{const k=JSON.stringify(E),D=JSON.stringify(N);return k===D?E:N})},[t,i]);const f=c.useMemo(()=>a?new Set:new Set(Object.values(l).filter(b=>b?String(b).trim().length>0:!1)),[l,a]),h=c.useCallback((b,N)=>{u(k=>{const D={...k};return a||Object.entries(D).forEach(([j,z])=>{if(j!==b&&z===N){D[j]="";const B=parseInt(j,10)-1;t.setValue(`answers.${B}.answer`,"")}}),D[b]=N,D});const E=parseInt(b,10)-1;t.setValue(`answers.${E}.answer`,N)},[t,a]),d=c.useCallback(b=>{u(E=>{if(!E[b])return E;const k={...E};return k[b]="",k});const N=parseInt(b,10)-1;t.setValue(`answers.${N}.answer`,"")},[t]),p=c.useCallback((b,N)=>{b.dataTransfer.setData("text/plain",N),b.currentTarget.style.opacity="0.5",r?.(b)},[r]),m=c.useCallback(b=>{b.currentTarget.style.opacity="1"},[]),x=c.useCallback((b,N)=>{b.preventDefault();const E=b.dataTransfer.getData("text/plain");E&&(h(N,E),b.currentTarget.style.backgroundColor="")},[h]),g=c.useCallback(b=>{b.preventDefault(),b.currentTarget.style.backgroundColor="#e0f7fa"},[]),y=c.useCallback(b=>{b.currentTarget.style.backgroundColor=""},[]),v=c.useMemo(()=>Tt.domToReact(e.children,{replace:b=>{if(b instanceof Tt.Element&&b.name==="drag-drop-sentence-input"){const N=b.attribs,E=N["data-question-number"]??"",k=N["data-question-type"]??"";if(!E||k!=="matching_sentence_endings"&&k!=="matching_headings")return s.jsx("span",{className:"text-destructive",children:"Invalid drag-drop input"},`${n}-invalid`);const D=l[E],j=o.find(z=>z.value===D)?.label||D;return s.jsx("span",{onDrop:z=>x(z,E),onDragOver:g,onDragLeave:y,className:"inline-block min-w-[150px] border-2 border-gray-400 border-dashed p-1 my-1 mx-2 rounded-md text-center align-middle","data-question-number":E,children:D?s.jsxs("span",{className:"inline-flex items-center justify-between gap-2 w-full",children:[s.jsx("span",{className:"font-semibold",children:j}),s.jsx("button",{type:"button",onClick:()=>d(E),onMouseDown:r,className:"text-destructive hover:text-destructive/70",children:s.jsx(qr,{size:16})})]}):s.jsx("span",{className:"text-muted-foreground",children:E})},`${n}-${E}`)}return b}}),[e.children,l,x,y,g,d,r,n,o]);return s.jsxs("span",{className:"block my-6",children:[v,s.jsx("span",{className:"block mt-6",children:s.jsx("div",{className:"flex flex-wrap gap-3",children:o.map(b=>{const N=!a&&f.has(b.value);return s.jsx("div",{draggable:!0,onDragStart:E=>p(E,b.value),onDragEnd:m,className:`p-2 rounded-lg min-w-[150px] text-center cursor-move transition-colors ${N?"bg-muted text-muted-foreground opacity-70":"bg-primary text-primary-foreground hover:bg-muted-foreground"}`,children:b.label},`${n}-${b.value}`)})})})]})},ir=sa()(oa(e=>({contrast:"black-on-white",textSize:"regular",setContrast:t=>e({contrast:t}),setTextSize:t=>e({textSize:t})}),{name:"test-display-storage",storage:aa(()=>localStorage)})),hc=e=>{switch(e){case"black-on-white":return"bg-white [&_p]:text-black [&_div]:text-black [&_span]:text-black [&_h1]:text-black [&_h2]:text-black [&_h3]:text-black [&_h4]:text-black [&_h5]:text-black [&_h6]:text-black [&_li]:text-black [&_td]:text-black [&_th]:text-black [&_label]:text-black";case"white-on-black":return"bg-black [&_p]:text-white [&_div]:text-white [&_span]:text-white [&_h1]:text-white [&_h2]:text-white [&_h3]:text-white [&_h4]:text-white [&_h5]:text-white [&_h6]:text-white [&_li]:text-white [&_td]:text-white [&_th]:text-white [&_label]:text-white";case"yellow-on-black":return"bg-black [&_p]:text-yellow-300 [&_div]:text-yellow-300 [&_span]:text-yellow-300 [&_h1]:text-yellow-300 [&_h2]:text-yellow-300 [&_h3]:text-yellow-300 [&_h4]:text-yellow-300 [&_h5]:text-yellow-300 [&_h6]:text-yellow-300 [&_li]:text-yellow-300 [&_td]:text-yellow-300 [&_th]:text-yellow-300 [&_label]:text-yellow-300";default:return"bg-white [&_p]:text-black [&_div]:text-black [&_span]:text-black [&_h1]:text-black [&_h2]:text-black [&_h3]:text-black [&_h4]:text-black [&_h5]:text-black [&_h6]:text-black [&_li]:text-black [&_td]:text-black [&_th]:text-black [&_label]:text-black"}},pc=e=>{switch(e){case"regular":return"text-sm [&_p]:text-sm [&_div]:text-sm [&_span]:text-sm";case"large":return"text-base [&_p]:text-base [&_div]:text-base [&_span]:text-base";case"extra-large":return"text-lg [&_p]:text-lg [&_div]:text-lg [&_span]:text-lg";default:return"text-sm [&_p]:text-sm [&_div]:text-sm [&_span]:text-sm"}},so=(e,t)=>W(hc(e),pc(t)),mc=({part:e,form:t,testId:n})=>{const{user:r}=en(),{contrast:o,textSize:a}=ir(),i=r?.id||"guest",l=n&&e.id?`listening-${i}-${n}-${e.id}-script`:void 0,u=n&&e.id?`listening-${i}-${n}-${e.id}-questions`:void 0,f=so(o,a);return s.jsx("div",{className:W("h-[calc(100vh-232px)]",f),children:e.is_script?s.jsx(Jn,{leftContent:s.jsx(qn,{className:W("h-full overflow-y-auto p-6",f),htmlString:e.audioscript,storageKey:l}),rightContent:s.jsx("div",{className:W("h-full overflow-y-auto overflow-x-hidden p-6 space-y-8",f),children:e.questions?s.jsx(s.Fragment,{children:s.jsx(Ln,{htmlString:e.questions,form:t,storageKey:u,className:f})}):s.jsx("div",{children:"No questions available"})})}):s.jsx(vs,{direction:"horizontal",className:W("w-full border rounded-none"),children:s.jsx(kn,{defaultSize:100,children:s.jsx("div",{className:W("h-full overflow-y-auto overflow-x-hidden p-6 space-y-8",f),children:e.questions?s.jsx(Ln,{htmlString:e.questions,form:t,storageKey:u,className:f}):s.jsx("div",{children:"No questions available"})})})})})},gc=({part:e,form:t,testId:n})=>{const{user:r}=en(),{contrast:o,textSize:a}=ir(),i=r?.id||"guest",l=n&&e.id?`reading-${i}-${n}-${e.id}-content`:void 0,u=n&&e.id?`reading-${i}-${n}-${e.id}-questions`:void 0,f=so(o,a);return s.jsx("div",{className:W("h-[calc(100vh-232px)]",f),children:s.jsx(Jn,{leftContent:s.jsx(qn,{className:W("h-full overflow-y-auto p-6",f),htmlString:e.content||"<p>Sample content for testing</p>",enabledHighlight:!0,storageKey:l}),rightContent:s.jsx("div",{className:W("h-full overflow-y-auto overflow-x-hidden p-6 space-y-8",f),children:e.questions?s.jsx(Ln,{htmlString:e.questions,form:t,storageKey:u,className:f}):s.jsx("div",{children:"No questions available"})})})})},On=c.forwardRef(({className:e,...t},n)=>s.jsx("textarea",{className:W("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...t}));On.displayName="Textarea";const xc=({control:e,name:t,label:n,helperText:r,required:o,className:a,rules:i,floatingError:l,...u})=>{const f=n&&s.jsxs(Ke,{className:"my-3",children:[n," ",o&&s.jsx("span",{className:"text-[--destructive]",children:"*"})]});return t&&e?s.jsx(Ne,{control:e,name:t,rules:i,render:({field:h})=>s.jsxs(Se,{children:[f,s.jsx(je,{children:s.jsx(On,{autoComplete:"off",placeholder:"...",className:W(a),...u,...h})}),r&&s.jsx(Oe,{children:r}),s.jsx(dt,{className:W(l)})]})}):s.jsxs(s.Fragment,{children:[f,s.jsx(On,{...u,className:Fr([a])}),r&&s.jsx(Oe,{children:r})]})},vc=({part:e,form:t,index:n,testId:r})=>{const o=t.watch(`answers.${n}.answer`)||"",a=o.trim().split(/\s+/).filter(f=>f.length>0).length,[i,l]=c.useState("16px"),u=r&&e.id?`writing-${r}-${e.id}-question`:void 0;return s.jsx("div",{className:"h-[calc(100vh-232px)] bg-muted",children:s.jsx(Jn,{leftContent:s.jsx(qn,{className:"h-full overflow-y-auto p-6 text-sm",htmlString:e.writing_questions[0].question,enabledHighlight:!0,storageKey:u}),rightContent:s.jsxs("div",{className:"h-full overflow-y-auto p-6 space-y-4 text-sm",children:[s.jsx(xc,{floatingError:!0,id:"1",control:t.control,name:`answers.${n}.answer`,className:"min-h-[calc(100vh-335px)]",style:{fontSize:i}}),s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Word count: ",o.trim()?a:0]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Vr,{htmlFor:"font-size-trigger",className:"text-xs text-muted-foreground",children:"Font size:"}),s.jsxs(Nn,{onValueChange:f=>l(f),defaultValue:"16px",children:[s.jsx(jn,{id:"font-size-trigger",className:"w-[75px]",children:s.jsx(Rn,{placeholder:"Select font size"})}),s.jsxs(Dn,{children:[s.jsx(Ze,{value:"12px",children:"12px"}),s.jsx(Ze,{value:"14px",children:"14px"}),s.jsx(Ze,{value:"16px",children:"16px"}),s.jsx(Ze,{value:"18px",children:"18px"}),s.jsx(Ze,{value:"20px",children:"20px"})]})]})]})]})]})})})},bc=e=>"questions"in e,wc=e=>"questions"in e&&"question_numbers"in e&&Array.isArray(e.question_numbers),_u=({data:e,activeTab:t,testType:n,form:r,testId:o})=>{const a=(i,l)=>{switch(n){case ne.READING:return bc(i)?s.jsx(s.Fragment,{children:s.jsx(gc,{part:i,form:r,testId:o})}):s.jsx(pr,{title:"Error",message:"Invalid reading data"});case ne.LISTENING:return wc(i)?s.jsx(mc,{part:i,form:r,testId:o}):s.jsx(pr,{title:"Error",message:"Invalid listening data"});case ne.WRITING:return s.jsx(vc,{part:i,index:l,form:r,testId:o});default:return s.jsx("div",{children:"Unsupported test type"})}};return s.jsx("div",{children:e.map((i,l)=>s.jsx(la,{value:`tab-${i.id}`,className:W("h-full bg-muted",t!==`tab-${i.id}`&&"hidden"),children:a(i,l)},i.id))})},ku=({activePart:e,testType:t})=>{if(!e)return null;const n=()=>{switch(t){case ne.READING:return Pe.get(e,"passage_number","");case ne.LISTENING:return Pe.get(e,"listening_section","");case ne.WRITING:return Pe.get(e,"writing_task","");default:return"Follow the instructions for this part."}};return s.jsx(tn,{className:"w-full shadow-sm rounded-none",children:s.jsxs(Wn,{className:"p-3 text-sm h-[70px]",children:[s.jsxs("div",{className:"font-semibold",children:["Part ",n()]}),s.jsx("div",{children:e.description})]})})};function gt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e?.(o),n===!1||!o.defaultPrevented)return t?.(o)}}var oo=["PageUp","PageDown"],ao=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],io={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Ct="Slider",[$n,yc,Sc]=ka(Ct),[lo,Iu]=$t(Ct,[Sc]),[Cc,hn]=lo(Ct),co=c.forwardRef((e,t)=>{const{name:n,min:r=0,max:o=100,step:a=1,orientation:i="horizontal",disabled:l=!1,minStepsBetweenThumbs:u=0,defaultValue:f=[r],value:h,onValueChange:d=()=>{},onValueCommit:p=()=>{},inverted:m=!1,form:x,...g}=e,y=c.useRef(new Set),v=c.useRef(0),N=i==="horizontal"?Ec:Nc,[E=[],k]=Gn({prop:h,defaultProp:f,onChange:O=>{[...y.current][v.current]?.focus(),d(O)}}),D=c.useRef(E);function j(O){const L=kc(E,O);G(O,L)}function z(O){G(O,v.current)}function B(){const O=D.current[v.current];E[v.current]!==O&&p(E)}function G(O,L,{commit:X}={commit:!1}){const U=Tc(a),J=Pc(Math.round((O-r)/a)*a+r,U),C=Gr(J,[r,o]);k((w=[])=>{const R=Dc(w,C,L);if(zc(R,u*a)){v.current=R.indexOf(C);const _=String(R)!==String(w);return _&&X&&p(R),_?R:w}else return w})}return s.jsx(Cc,{scope:e.__scopeSlider,name:n,disabled:l,min:r,max:o,valueIndexToChangeRef:v,thumbs:y.current,values:E,orientation:i,form:x,children:s.jsx($n.Provider,{scope:e.__scopeSlider,children:s.jsx($n.Slot,{scope:e.__scopeSlider,children:s.jsx(N,{"aria-disabled":l,"data-disabled":l?"":void 0,...g,ref:t,onPointerDown:gt(g.onPointerDown,()=>{l||(D.current=E)}),min:r,max:o,inverted:m,onSlideStart:l?void 0:j,onSlideMove:l?void 0:z,onSlideEnd:l?void 0:B,onHomeKeyDown:()=>!l&&G(r,0,{commit:!0}),onEndKeyDown:()=>!l&&G(o,E.length-1,{commit:!0}),onStepKeyDown:({event:O,direction:L})=>{if(!l){const J=oo.includes(O.key)||O.shiftKey&&ao.includes(O.key)?10:1,C=v.current,w=E[C],R=a*J*L;G(w+R,C,{commit:!0})}}})})})})});co.displayName=Ct;var[uo,fo]=lo(Ct,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Ec=c.forwardRef((e,t)=>{const{min:n,max:r,dir:o,inverted:a,onSlideStart:i,onSlideMove:l,onSlideEnd:u,onStepKeyDown:f,...h}=e,[d,p]=c.useState(null),m=ge(t,N=>p(N)),x=c.useRef(void 0),g=Kr(o),y=g==="ltr",v=y&&!a||!y&&a;function b(N){const E=x.current||d.getBoundingClientRect(),k=[0,E.width],j=lr(k,v?[n,r]:[r,n]);return x.current=E,j(N-E.left)}return s.jsx(uo,{scope:e.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:s.jsx(ho,{dir:g,"data-orientation":"horizontal",...h,ref:m,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:N=>{const E=b(N.clientX);i?.(E)},onSlideMove:N=>{const E=b(N.clientX);l?.(E)},onSlideEnd:()=>{x.current=void 0,u?.()},onStepKeyDown:N=>{const k=io[v?"from-left":"from-right"].includes(N.key);f?.({event:N,direction:k?-1:1})}})})}),Nc=c.forwardRef((e,t)=>{const{min:n,max:r,inverted:o,onSlideStart:a,onSlideMove:i,onSlideEnd:l,onStepKeyDown:u,...f}=e,h=c.useRef(null),d=ge(t,h),p=c.useRef(void 0),m=!o;function x(g){const y=p.current||h.current.getBoundingClientRect(),v=[0,y.height],N=lr(v,m?[r,n]:[n,r]);return p.current=y,N(g-y.top)}return s.jsx(uo,{scope:e.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:s.jsx(ho,{"data-orientation":"vertical",...f,ref:d,style:{...f.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const y=x(g.clientY);a?.(y)},onSlideMove:g=>{const y=x(g.clientY);i?.(y)},onSlideEnd:()=>{p.current=void 0,l?.()},onStepKeyDown:g=>{const v=io[m?"from-bottom":"from-top"].includes(g.key);u?.({event:g,direction:v?-1:1})}})})}),ho=c.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:o,onSlideEnd:a,onHomeKeyDown:i,onEndKeyDown:l,onStepKeyDown:u,...f}=e,h=hn(Ct,n);return s.jsx(Ce.span,{...f,ref:t,onKeyDown:gt(e.onKeyDown,d=>{d.key==="Home"?(i(d),d.preventDefault()):d.key==="End"?(l(d),d.preventDefault()):oo.concat(ao).includes(d.key)&&(u(d),d.preventDefault())}),onPointerDown:gt(e.onPointerDown,d=>{const p=d.target;p.setPointerCapture(d.pointerId),d.preventDefault(),h.thumbs.has(p)?p.focus():r(d)}),onPointerMove:gt(e.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&o(d)}),onPointerUp:gt(e.onPointerUp,d=>{const p=d.target;p.hasPointerCapture(d.pointerId)&&(p.releasePointerCapture(d.pointerId),a(d))})})}),po="SliderTrack",mo=c.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,o=hn(po,n);return s.jsx(Ce.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...r,ref:t})});mo.displayName=po;var Fn="SliderRange",go=c.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,o=hn(Fn,n),a=fo(Fn,n),i=c.useRef(null),l=ge(t,i),u=o.values.length,f=o.values.map(p=>bo(p,o.min,o.max)),h=u>1?Math.min(...f):0,d=100-Math.max(...f);return s.jsx(Ce.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...r,ref:l,style:{...e.style,[a.startEdge]:h+"%",[a.endEdge]:d+"%"}})});go.displayName=Fn;var Hn="SliderThumb",xo=c.forwardRef((e,t)=>{const n=yc(e.__scopeSlider),[r,o]=c.useState(null),a=ge(t,l=>o(l)),i=c.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return s.jsx(jc,{...e,ref:a,index:i})}),jc=c.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:o,...a}=e,i=hn(Hn,n),l=fo(Hn,n),[u,f]=c.useState(null),h=ge(t,b=>f(b)),d=u?i.form||!!u.closest("form"):!0,p=Vn(u),m=i.values[r],x=m===void 0?0:bo(m,i.min,i.max),g=_c(r,i.values.length),y=p?.[l.size],v=y?Ic(y,x,l.direction):0;return c.useEffect(()=>{if(u)return i.thumbs.add(u),()=>{i.thumbs.delete(u)}},[u,i.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${x}% + ${v}px)`},children:[s.jsx($n.ItemSlot,{scope:e.__scopeSlider,children:s.jsx(Ce.span,{role:"slider","aria-label":e["aria-label"]||g,"aria-valuemin":i.min,"aria-valuenow":m,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...a,ref:h,style:m===void 0?{display:"none"}:e.style,onFocus:gt(e.onFocus,()=>{i.valueIndexToChangeRef.current=r})})}),d&&s.jsx(vo,{name:o??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:m},r)]})});xo.displayName=Hn;var Rc="RadioBubbleInput",vo=c.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const o=c.useRef(null),a=ge(o,r),i=Bn(t);return c.useEffect(()=>{const l=o.current;if(!l)return;const u=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(u,"value").set;if(i!==t&&h){const d=new Event("input",{bubbles:!0});h.call(l,t),l.dispatchEvent(d)}},[i,t]),s.jsx(Ce.input,{style:{display:"none"},...n,ref:a,defaultValue:t})});vo.displayName=Rc;function Dc(e=[],t,n){const r=[...e];return r[n]=t,r.sort((o,a)=>o-a)}function bo(e,t,n){const a=100/(n-t)*(e-t);return Gr(a,[0,100])}function _c(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function kc(e,t){if(e.length===1)return 0;const n=e.map(o=>Math.abs(o-t)),r=Math.min(...n);return n.indexOf(r)}function Ic(e,t,n){const r=e/2,a=lr([0,50],[0,r]);return(r-a(t)*n)*n}function Ac(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function zc(e,t){if(t>0){const n=Ac(e);return Math.min(...n)>=t}return!0}function lr(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Tc(e){return(String(e).split(".")[1]||"").length}function Pc(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var wo=co,Mc=mo,Lc=go,Oc=xo;const yo=c.forwardRef(({className:e,...t},n)=>s.jsxs(wo,{ref:n,className:W("relative flex w-full touch-none select-none items-center",e),...t,children:[s.jsx(Mc,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:s.jsx(Lc,{className:"absolute h-full bg-primary"})}),s.jsx(Oc,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));yo.displayName=wo.displayName;const Au=({timeLeft:e,formatTime:t,testType:n=ne.READING,audioRef:r,handleVolumeChange:o,handlePauseToggle:a,isPaused:i=!1,studentHasStarted:l=!1,userHasStarted:u=!1,type:f})=>{const h=$r(),d=()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},p=()=>{m?.role===ct.TEACHER?h(f==="Thematic"?"/teacher/tests/thematic":"/teacher/tests/mock"):h(f==="Thematic"?"/student/tests/thematic":"/student/tests/mock"),d()},{user:m}=en(),{contrast:x,textSize:g,setContrast:y,setTextSize:v}=ir(),[b,N]=c.useState(.5),[E,k]=c.useState(0),[D,j]=c.useState(0),z=r?.current;c.useEffect(()=>{if(n!==ne.LISTENING||!z){k(0),j(0);return}const L=()=>{k(z.currentTime||0)},X=()=>{const U=Number.isFinite(z.duration)?z.duration:0;j(U)};return L(),X(),z.addEventListener("timeupdate",L),z.addEventListener("loadedmetadata",X),z.addEventListener("durationchange",X),z.addEventListener("ended",L),()=>{z.removeEventListener("timeupdate",L),z.removeEventListener("loadedmetadata",X),z.removeEventListener("durationchange",X),z.removeEventListener("ended",L)}},[n,z]);const B=L=>{const X=Math.floor(L/60),U=Math.floor(L%60);return`${X.toString().padStart(2,"0")}:${U.toString().padStart(2,"0")}`},G=D>0?Math.max(D-E,0):E,O=L=>{const X=L[0];N(X),o&&o(X)};return s.jsx(tn,{className:"w-full shadow-md rounded-none",children:s.jsxs(Wn,{className:"p-3 grid grid-cols-3 items-center h-[50px]",children:[s.jsxs("div",{className:"text-sm flex items-center gap-2",children:[s.jsx(ga,{}),s.jsx("b",{children:"Candidate:"})," ",m?.full_name||m?.username]}),s.jsx("div",{className:"text-sm font-semibold font-mono flex items-center gap-2 justify-center",children:n===ne.LISTENING&&r?s.jsxs(s.Fragment,{children:[s.jsx(mr,{className:"w-5 h-5"}),B(G)]}):s.jsx("span",{className:"text-muted-foreground",children:"-"})}),s.jsxs("div",{className:"flex items-center gap-8 justify-end",children:[s.jsxs("div",{className:"text-sm font-semibold font-mono flex items-center gap-2 whitespace-nowrap",children:[s.jsx(mr,{className:"w-5 h-5"}),s.jsx("span",{className:"whitespace-nowrap",children:"Time Left:"}),s.jsx("span",{className:W("text-red-400",e<600&&"text-red-700"),children:t(e)})]}),n===ne.LISTENING&&r&&o&&s.jsxs("div",{className:"flex items-center gap-4",children:[f==="Thematic"&&a&&s.jsx(Le,{onClick:a,variant:"outline",size:"sm",type:"button",className:"flex items-center gap-1 h-8 w-8 p-0",disabled:m?.role===ct.STUDENT&&l&&!i,title:m?.role===ct.STUDENT&&l&&!i?"Students cannot pause after starting audio":u?i?"Resume audio":"Pause audio":"Start audio",children:!u||i?s.jsx(xa,{className:"w-4 h-4"}):s.jsx(va,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex items-center gap-2",children:[b===0?s.jsx(ba,{className:"w-5 h-5"}):s.jsx(wa,{className:"w-5 h-5"}),s.jsx(yo,{id:"volume",min:0,max:1,step:.01,defaultValue:[.5],onValueChange:O,className:"w-24"})]})]}),(n===ne.LISTENING||n===ne.READING)&&s.jsxs(Aa,{children:[s.jsx(za,{asChild:!0,children:s.jsxs(Le,{variant:"outline",size:"sm",type:"button",className:"flex items-center gap-2 h-7",children:[s.jsx(ya,{className:"w-4 h-4"}),"Options"]})}),s.jsxs(Ta,{align:"end",className:"w-56",children:[s.jsx(Pa,{children:"Options"}),s.jsx(Ma,{}),s.jsxs(gr,{children:[s.jsx(xr,{children:s.jsx("span",{children:"Contrast"})}),s.jsx(vr,{children:s.jsxs(br,{value:x,onValueChange:L=>y(L),children:[s.jsx(it,{value:"black-on-white",children:"Black on white"}),s.jsx(it,{value:"white-on-black",children:"White on Black"}),s.jsx(it,{value:"yellow-on-black",children:"Yellow on black"})]})})]}),s.jsxs(gr,{children:[s.jsx(xr,{children:s.jsx("span",{children:"Text size"})}),s.jsx(vr,{children:s.jsxs(br,{value:g,onValueChange:L=>v(L),children:[s.jsx(it,{value:"regular",children:"Regular"}),s.jsx(it,{value:"large",children:"Large"}),s.jsx(it,{value:"extra-large",children:"Extra large"})]})})]})]})]}),(m?.role===ct.TEACHER||m?.role===ct.STUDENT&&f==="Thematic")&&s.jsxs(Le,{onClick:p,variant:"default",type:"button",className:"flex items-center gap-2 h-7 w-24",children:[s.jsx(Sa,{className:"w-4 h-4"}),"Back"]})]})]})})};var So="AlertDialog",[$c,zu]=$t(So,[Xr]),$e=Xr(),Co=e=>{const{__scopeAlertDialog:t,...n}=e,r=$e(t);return s.jsx(Oa,{...r,...n,modal:!0})};Co.displayName=So;var Fc="AlertDialogTrigger",Eo=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=$e(n);return s.jsx($a,{...o,...r,ref:t})});Eo.displayName=Fc;var Hc="AlertDialogPortal",No=e=>{const{__scopeAlertDialog:t,...n}=e,r=$e(t);return s.jsx(Fa,{...r,...n})};No.displayName=Hc;var qc="AlertDialogOverlay",jo=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=$e(n);return s.jsx(Va,{...o,...r,ref:t})});jo.displayName=qc;var bt="AlertDialogContent",[Gc,Bc]=$c(bt),Vc=Na("AlertDialogContent"),Ro=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...o}=e,a=$e(n),i=c.useRef(null),l=ge(t,i),u=c.useRef(null);return s.jsx(Ha,{contentName:bt,titleName:Do,docsSlug:"alert-dialog",children:s.jsx(Gc,{scope:n,cancelRef:u,children:s.jsxs(qa,{role:"alertdialog",...a,...o,ref:l,onOpenAutoFocus:wt(o.onOpenAutoFocus,f=>{f.preventDefault(),u.current?.focus({preventScroll:!0})}),onPointerDownOutside:f=>f.preventDefault(),onInteractOutside:f=>f.preventDefault(),children:[s.jsx(Vc,{children:r}),s.jsx(Uc,{contentRef:i})]})})})});Ro.displayName=bt;var Do="AlertDialogTitle",_o=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=$e(n);return s.jsx(Ga,{...o,...r,ref:t})});_o.displayName=Do;var ko="AlertDialogDescription",Io=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=$e(n);return s.jsx(Ba,{...o,...r,ref:t})});Io.displayName=ko;var Wc="AlertDialogAction",Ao=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,o=$e(n);return s.jsx(Yr,{...o,...r,ref:t})});Ao.displayName=Wc;var zo="AlertDialogCancel",To=c.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:o}=Bc(zo,n),a=$e(n),i=ge(t,o);return s.jsx(Yr,{...a,...r,ref:i})});To.displayName=zo;var Uc=({contentRef:e})=>{const t=`\`${bt}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${bt}\` by passing a \`${ko}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${bt}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return c.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},Kc=Co,Xc=Eo,Yc=No,Po=jo,Mo=Ro,Lo=Ao,Oo=To,$o=_o,Fo=Io;const Jc=Kc,Qc=Xc,Zc=Yc,Ho=c.forwardRef(({className:e,...t},n)=>s.jsx(Po,{className:W("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));Ho.displayName=Po.displayName;const qo=c.forwardRef(({className:e,...t},n)=>s.jsxs(Zc,{children:[s.jsx(Ho,{}),s.jsx(Mo,{ref:n,className:W("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));qo.displayName=Mo.displayName;const Go=({className:e,...t})=>s.jsx("div",{className:W("flex flex-col space-y-2 text-center sm:text-left",e),...t});Go.displayName="AlertDialogHeader";const Bo=({className:e,...t})=>s.jsx("div",{className:W("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Bo.displayName="AlertDialogFooter";const Vo=c.forwardRef(({className:e,...t},n)=>s.jsx($o,{ref:n,className:W("text-lg font-semibold",e),...t}));Vo.displayName=$o.displayName;const Wo=c.forwardRef(({className:e,...t},n)=>s.jsx(Fo,{ref:n,className:W("text-sm text-muted-foreground",e),...t}));Wo.displayName=Fo.displayName;const Uo=c.forwardRef(({className:e,...t},n)=>s.jsx(Lo,{ref:n,className:W(Hr(),e),...t}));Uo.displayName=Lo.displayName;const Ko=c.forwardRef(({className:e,...t},n)=>s.jsx(Oo,{ref:n,className:W(Hr({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Ko.displayName=Oo.displayName;const eu=({trigger:e,title:t,description:n,onConfirm:r,confirmText:o="Confirm",cancelText:a="Cancel",isLoading:i})=>s.jsxs(Jc,{children:[s.jsx(Qc,{asChild:!0,children:e}),s.jsxs(qo,{children:[s.jsxs(Go,{children:[s.jsx(Vo,{children:t}),s.jsx(Wo,{children:n})]}),s.jsxs(Bo,{children:[s.jsx(Ko,{disabled:i,children:a}),s.jsx(Uo,{asChild:!0,children:s.jsx(Le,{onClick:r,disabled:i,loading:i,children:o})})]})]})]}),Tu=({data:e,form:t,activeTab:n,testType:r,setActiveTab:o,currentTabIndex:a,handlePrevious:i,handleNext:l,onSubmit:u,isTestFinished:f,isLoading:h,disableSubmit:d=!1,disableSubmitReason:p})=>{const m=g=>{switch(r){case ne.READING:return Pe.get(g,"passage_number","");case ne.LISTENING:return Pe.get(g,"listening_section","");case ne.WRITING:return Pe.get(g,"writing_task","");default:return""}},x=(g,y)=>{o(`tab-${y}`),setTimeout(()=>{const v=document.getElementById(`question-${g}`);v&&v.scrollIntoView({behavior:"smooth",block:"center"})},100)};return s.jsx(tn,{className:"w-full shadow-md p-2 sticky bottom-0 z-50 rounded-none",children:s.jsxs(Wn,{className:"p-0 flex items-center justify-between gap-2 h-[80px]",children:[s.jsx(ca,{className:W(r===ne.WRITING?"!flex !flex-row w-full gap-2 min-h-min":"grid grid-cols-2 gap-2 min-h-min"),children:e.map(g=>{const y=Pe.get(g,"question_numbers",[]);return s.jsxs("div",{className:W(r===ne.WRITING?"flex gap-1":"flex gap-2"),children:[s.jsxs(ua,{value:`tab-${g.id}`,className:W(r===ne.WRITING?"flex items-center gap-1 px-2 py-1 text-sm":"flex items-center gap-2"),children:["Part ",m(g)]}),!Pe.isEmpty(y)&&s.jsx("div",{className:"flex flex-wrap gap-1",children:y?.sort((v,b)=>v.question_number-b.question_number).map(v=>{const b=t.watch(`answers.${v?.question_number-1}.answer`),N=!!b&&b.trim()!=="";return s.jsx(Vr,{onClick:E=>{E.preventDefault(),E.stopPropagation(),x(v?.question_number,g.id)},className:W("cursor-pointer rounded text-sm flex items-center justify-center",r===ne.WRITING?"h-6 w-6":"h-7 w-7",N?"bg-primary text-background hover:bg-primary/90":"border border-primary text-primary hover:bg-primary/10"),children:v?.question_number},v.id)})})]},g.id)})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Le,{type:"button",onClick:i,disabled:a===0||f,variant:"outline",size:"sm",className:"p-0 w-8 h-8",children:s.jsx(Ca,{className:"w-4 h-4"})}),s.jsx(Le,{type:"button",onClick:l,disabled:a===e.length-1||f,variant:"outline",size:"sm",className:"p-0 w-8 h-8",children:s.jsx(Ea,{className:"w-4 h-4"})}),s.jsx(eu,{trigger:s.jsx(Le,{type:"button",disabled:f||d,className:"w-full md:w-auto",children:"Submit"}),title:"Submit Test ?",description:"Are you sure you want to submit the test? This action cannot be undone.",onConfirm:u,confirmText:"Yes, Submit",cancelText:"No, Cancel",isLoading:h}),d&&p&&s.jsx("p",{className:"text-xs text-muted-foreground max-w-[200px]",children:p})]})]})})},Pu=e=>{const{user:t}=en(),n=ia(),r=$r(),o=t?.role===ct.STUDENT,a=c.useCallback(()=>{const u=document.documentElement;u.requestFullscreen&&u.requestFullscreen().catch(f=>{console.error("Fullscreen rejimini yoqishda xato:",f)})},[]),i=c.useCallback(()=>{document.exitFullscreen&&document.fullscreenElement&&document.exitFullscreen().catch(u=>{console.error("Fullscreen rejimidan chiqishda xato:",u)})},[]),l=c.useCallback(()=>{o&&e&&(window.confirm("Test hali tugamadi! Chiqishni xohlaysizmi?")?i():r(n.pathname,{replace:!0}))},[o,e,n.pathname,r,i]);c.useEffect(()=>{if(!o)return;if(!e){i();return}a();const u=d=>{e&&(d.preventDefault(),d.returnValue="Test hali tugamadi! Chiqishni tasdiqlasangiz, natijalar saqlanmaydi!")},f=d=>{e&&(d.ctrlKey&&d.key==="r"||d.key==="F5")&&(d.preventDefault(),alert("Test tugamaguncha sahifani yangilash taqiqlangan!")),e&&d.key==="F11"&&(d.preventDefault(),alert("Test tugamaguncha fullscreen rejimidan chiqish taqiqlangan!"))},h=()=>{e&&!document.fullscreenElement&&(a(),alert("Test tugamaguncha fullscreen rejimida qolishingiz kerak!"))};return window.addEventListener("beforeunload",u),window.addEventListener("keydown",f),window.addEventListener("popstate",l),document.addEventListener("fullscreenchange",h),()=>{window.removeEventListener("beforeunload",u),window.removeEventListener("keydown",f),window.removeEventListener("popstate",l),document.removeEventListener("fullscreenchange",h)}},[o,e,l,a,i])};export{_u as C,ku as P,Au as T,ne as a,Tu as b,Pu as u};
